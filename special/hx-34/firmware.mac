;  
;   HX34FIRM -> Source re-created by Z80DIS 2.2
;      Z80DIS was written by Kenneth Gielow
;                            Palo Alto, CA

; Firmware is in slot 3-3, RAM in in slot 3-0
; 7FFF is mapper
;
; x11xxxxx	select SRAM in page 2 (8000H-87FFH)
; x00xxxxx	select ROM in page 2
; xxxxxx00	select ROM segement 0 in page 2 (screencopy, japanese wordprocessor)
; xxxxxx01	select ROM segement 1 in page 2 (japanese wordprocessor)
; xxxxxx10	select ROM segement 2 in page 2 (european wordprocessor)
; xxxxxx11	select ROM segement 3 in page 2 (japanese wordprocessor)

; kxxxxxxx	COPY key

	.Z80
	ORG	4000H
X.0000	EQU	0000H	; -CS-I
J.0001	EQU	0001H	; J---I
J.0002	EQU	0002H	; J---I
I.0003	EQU	0003H	; ----I
I.0004	EQU	0004H	; ----I
I.0007	EQU	0007H	; ----I
C.0008	EQU	0008H	; -C--I
I.0009	EQU	0009H	; ----I
C.000A	EQU	000AH	; -C--I
J.000B	EQU	000BH	; J----
RDSLT	EQU	000CH	; -C--I
I.000D	EQU	000DH	; ----I
I$000E	EQU	000EH	; ----I
I.000F	EQU	000FH	; ----I
C.0010	EQU	0010H	; -C--I
I$0013	EQU	0013H	; ----I
WRSLT	EQU	0014H
C.0014	EQU	0014H	; -C--I
I.0015	EQU	0015H	; ----I
I$0016	EQU	0016H	; ----I
I$0017	EQU	0017H	; ----I
C.0018	EQU	0018H	; -C--I
CALSLT	EQU	001CH	; -C---
I.001E	EQU	001EH	; ----I
C.0020	EQU	0020H	; -C--I
I$0024	EQU	0024H	; ----I
C.0028	EQU	0028H	; -C---
I.002D	EQU	002DH	; ----I
X.0030	EQU	0030H	; -CS-I
I$0032	EQU	0032H	; ----I
I.0036	EQU	0036H	; ----I
C.0038	EQU	0038H	; -C---
I$003E	EQU	003EH	; ----I
WRTVDP	EQU	0047H	; JC---
I.004B	EQU	004BH	; ----I
D$0050	EQU	0050H	; --S--
I.005A	EQU	005AH	; ----I
I$0060	EQU	0060H	; ----I
I.0061	EQU	0061H	; ----I
I$0064	EQU	0064H	; ----I
I.0066	EQU	0066H	; ----I
I.0067	EQU	0067H	; ----I
I$0069	EQU	0069H	; ----I
I.006B	EQU	006BH	; ----I
I$006C	EQU	006CH	; ----I
I$0072	EQU	0072H	; ----I
I$0075	EQU	0075H	; ----I
I.0078	EQU	0078H	; ----I
I$007B	EQU	007BH	; ----I
I$007D	EQU	007DH	; ----I
I$007E	EQU	007EH	; ----I
I$009B	EQU	009BH	; ----I
CHSNS	EQU	009CH	; -C---
CHGET	EQU	009FH	; -C---
CHPUT	EQU	00A2H	; -C---
LPTOUT	EQU	00A5H	; -C---
LPTSTT	EQU	00A8H	; -C---
QINLIN	EQU	00B4H	; -C---
BREAKX	EQU	00B7H	; -C--I
BEEP	EQU	00C0H	; -C---
TAPION	EQU	00E1H	; -C---
TAPIN	EQU	00E4H	; -C---
TAPIOF	EQU	00E7H	; -C---
TAPOON	EQU	00EAH	; -C---
TAPOUT	EQU	00EDH	; -C---
TAPOOF	EQU	00F0H	; -C--I
I$00F1	EQU	00F1H	; ----I
I$00F2	EQU	00F2H	; ----I
STMOTR	EQU	00F3H
C.00F3	EQU	00F3H	; -C--I
I$00F4	EQU	00F4H	; ----I
I$00F5	EQU	00F5H	; ----I
I.00F6	EQU	00F6H	; ----I
I$00F7	EQU	00F7H	; ----I
I$00F8	EQU	00F8H	; ----I
I$00F9	EQU	00F9H	; ----I
I.0100	EQU	0100H	; ----I
I$0109	EQU	0109H	; ----I
I.0125	EQU	0125H	; ----I
I.012C	EQU	012CH	; ----I
I.0130	EQU	0130H	; ----I
I$0133	EQU	0133H	; ----I
I$0135	EQU	0135H	; ----I
I$0136	EQU	0136H	; ----I
I.0138	EQU	0138H	; ----I
I$0142	EQU	0142H	; ----I
I$0144	EQU	0144H	; ----I
I$0146	EQU	0146H	; ----I
I$0148	EQU	0148H	; ----I
I$014A	EQU	014AH	; ----I
I$014B	EQU	014BH	; ----I
I$014C	EQU	014CH	; ----I
I$014E	EQU	014EH	; ----I
I$0150	EQU	0150H	; ----I
I.0152	EQU	0152H	; ----I
I.0154	EQU	0154H	; ----I
KILBUF	EQU	0156H
J.0156	EQU	0156H	; J---I
I$0158	EQU	0158H	; ----I
I$015A	EQU	015AH	; ----I
I$0162	EQU	0162H	; ----I
I$0164	EQU	0164H	; ----I
I$0166	EQU	0166H	; ----I
I$0168	EQU	0168H	; ----I
I$016A	EQU	016AH	; ----I
C.016B	EQU	016BH	; -C---
I$016C	EQU	016CH	; ----I
I$016E	EQU	016EH	; ----I
I$0170	EQU	0170H	; ----I
I$0172	EQU	0172H	; ----I
I$0174	EQU	0174H	; ----I
I$0176	EQU	0176H	; ----I
I$0178	EQU	0178H	; ----I
I$0179	EQU	0179H	; ----I
I$017A	EQU	017AH	; ----I
I$0180	EQU	0180H	; ----I
I$0183	EQU	0183H	; ----I
I.0184	EQU	0184H	; ----I
I$0187	EQU	0187H	; ----I
I$0188	EQU	0188H	; ----I
I.018B	EQU	018BH	; ----I
I$018D	EQU	018DH	; ----I
I$018F	EQU	018FH	; ----I
I.0193	EQU	0193H	; ----I
I.0197	EQU	0197H	; ----I
I.0199	EQU	0199H	; ----I
I.019B	EQU	019BH	; ----I
I$01A1	EQU	01A1H	; ----I
I.01A6	EQU	01A6H	; ----I
I.01A7	EQU	01A7H	; ----I
I$01AA	EQU	01AAH	; ----I
I$01AC	EQU	01ACH	; ----I
I$01AE	EQU	01AEH	; ----I
I$01B2	EQU	01B2H	; ----I
I$01B8	EQU	01B8H	; ----I
I.01BE	EQU	01BEH	; ----I
I$01C0	EQU	01C0H	; ----I
I$01C2	EQU	01C2H	; ----I
I$01C3	EQU	01C3H	; ----I
I$01C7	EQU	01C7H	; ----I
I$01C8	EQU	01C8H	; ----I
I$01C9	EQU	01C9H	; ----I
I$01CA	EQU	01CAH	; ----I
I.01CC	EQU	01CCH	; ----I
I$01CF	EQU	01CFH	; ----I
I$01E3	EQU	01E3H	; ----I
I.01E4	EQU	01E4H	; ----I
I.01E6	EQU	01E6H	; ----I
I$01E7	EQU	01E7H	; ----I
I$01EA	EQU	01EAH	; ----I
I$01ED	EQU	01EDH	; ----I
I.01F1	EQU	01F1H	; ----I
I$01F5	EQU	01F5H	; ----I
I.01F9	EQU	01F9H	; ----I
I$01FB	EQU	01FBH	; ----I
I$01FD	EQU	01FDH	; ----I
I.01FF	EQU	01FFH	; ----I
I.0200	EQU	0200H	; ----I
I$0201	EQU	0201H	; ----I
I$0203	EQU	0203H	; ----I
I$020C	EQU	020CH	; ----I
I$020F	EQU	020FH	; ----I
I.0212	EQU	0212H	; ----I
I$0213	EQU	0213H	; ----I
I$0214	EQU	0214H	; ----I
I.0215	EQU	0215H	; ----I
I$0223	EQU	0223H	; ----I
I.0229	EQU	0229H	; ----I
I.022A	EQU	022AH	; ----I
D.0230	EQU	0230H	; --S--
I$0233	EQU	0233H	; ----I
I$0258	EQU	0258H	; ----I
I.0300	EQU	0300H	; ----I
I.0352	EQU	0352H	; ----I
I.0400	EQU	0400H	; ----I
I.0401	EQU	0401H	; ----I
I.0402	EQU	0402H	; ----I
I.0403	EQU	0403H	; ----I
I$0406	EQU	0406H	; ----I
I$0409	EQU	0409H	; ----I
I$040C	EQU	040CH	; ----I
I$040F	EQU	040FH	; ----I
I$0412	EQU	0412H	; ----I
I.0415	EQU	0415H	; ----I
I$0417	EQU	0417H	; ----I
I$04B0	EQU	04B0H	; ----I
I$0504	EQU	0504H	; ----I
I$052B	EQU	052BH	; ----I
I$0530	EQU	0530H	; ----I
I$0554	EQU	0554H	; ----I
I$0555	EQU	0555H	; ----I
I.0600	EQU	0600H	; ----I
I$0602	EQU	0602H	; ----I
I$0612	EQU	0612H	; ----I
I$0794	EQU	0794H	; ----I
I.0800	EQU	0800H	; ----I
I$0801	EQU	0801H	; ----I
I.0802	EQU	0802H	; ----I
I$0804	EQU	0804H	; ----I
D.0830	EQU	0830H	; --S--
I$083E	EQU	083EH	; ----I
C.08C9	EQU	08C9H	; -C---
I$08D5	EQU	08D5H	; ----I
I.0900	EQU	0900H	; ----I
I$090F	EQU	090FH	; ----I
I$0960	EQU	0960H	; ----I
I$0A05	EQU	0A05H	; ----I
I$0A13	EQU	0A13H	; ----I
I$0A1D	EQU	0A1DH	; ----I
I$0AB7	EQU	0AB7H	; ----I
I$0B02	EQU	0B02H	; ----I
I.0B12	EQU	0B12H	; ----I
I$0B3E	EQU	0B3EH	; ----I
I$0C02	EQU	0C02H	; ----I
I$0C03	EQU	0C03H	; ----I
I$0C07	EQU	0C07H	; ----I
I$0C69	EQU	0C69H	; ----I
I$0CDC	EQU	0CDCH	; ----I
I$0D0C	EQU	0D0CH	; ----I
I$0D32	EQU	0D32H	; ----I
I$0D38	EQU	0D38H	; ----I
I$0DFD	EQU	0DFDH	; ----I
I.0E03	EQU	0E03H	; ----I
I$0E04	EQU	0E04H	; ----I
I$0E08	EQU	0E08H	; ----I
I.0E0F	EQU	0E0FH	; ----I
I$0E14	EQU	0E14H	; ----I
I$0E15	EQU	0E15H	; ----I
I.0E34	EQU	0E34H	; ----I
I$0F06	EQU	0F06H	; ----I
I$0F09	EQU	0F09H	; ----I
D.0F3E	EQU	0F3EH	; --S-I
I.0F42	EQU	0F42H	; ----I
I.0FCE	EQU	0FCEH	; ----I
I$1002	EQU	1002H	; ----I
I$1013	EQU	1013H	; ----I
I$110F	EQU	110FH	; ----I
I$1202	EQU	1202H	; ----I
I$1204	EQU	1204H	; ----I
I$1207	EQU	1207H	; ----I
I.120A	EQU	120AH	; ----I
I.120D	EQU	120DH	; ----I
I.1210	EQU	1210H	; ----I
I$12C0	EQU	12C0H	; ----I
I.1312	EQU	1312H	; ----I
I$1402	EQU	1402H	; ----I
I.1404	EQU	1404H	; ----I
I.1407	EQU	1407H	; ----I
I.140A	EQU	140AH	; ----I
I.140D	EQU	140DH	; ----I
I.140E	EQU	140EH	; ----I
I.1410	EQU	1410H	; ----I
I.1413	EQU	1413H	; ----I
I$1415	EQU	1415H	; ----I
D$1430	EQU	1430H	; --S--
J$1437	EQU	1437H	; J----
I$1500	EQU	1500H	; ----I
J$150B	EQU	150BH	; J----
I$1600	EQU	1600H	; ----I
D.1632	EQU	1632H	; --S--
I$1707	EQU	1707H	; ----I
I.1802	EQU	1802H	; ----I
I$1804	EQU	1804H	; ----I
I$1810	EQU	1810H	; ----I
D.1834	EQU	1834H	; --S--
I$1844	EQU	1844H	; ----I
I$184F	EQU	184FH	; ----I
I$1850	EQU	1850H	; ----I
I$190E	EQU	190EH	; ----I
I$1A07	EQU	1A07H	; ----I
I$1A15	EQU	1A15H	; ----I
D.1A36	EQU	1A36H	; --S--
I$1B31	EQU	1B31H	; ----I
I$1B36	EQU	1B36H	; ----I
D$1B3E	EQU	1B3EH	; --S--
I.1B51	EQU	1B51H	; ----I
I$1BF8	EQU	1BF8H	; ----I
I.1C02	EQU	1C02H	; ----I
I$1C04	EQU	1C04H	; ----I
I$1C13	EQU	1C13H	; ----I
D.1C38	EQU	1C38H	; --S--
I$1D00	EQU	1D00H	; ----I
I$1E0A	EQU	1E0AH	; ----I
I$2000	EQU	2000H	; ----I
I.2002	EQU	2002H	; ----I
J.20DD	EQU	20DDH	; J----
I.2121	EQU	2121H	; ----I
D$212D	EQU	212DH	; ---L-
I$2202	EQU	2202H	; ----I
I$2207	EQU	2207H	; ----I
I$2309	EQU	2309H	; ----I
D$232D	EQU	232DH	; --S--
I$2403	EQU	2403H	; ----I
I$2407	EQU	2407H	; ----I
I.240A	EQU	240AH	; ----I
I.240D	EQU	240DH	; ----I
I$2410	EQU	2410H	; ----I
I.2413	EQU	2413H	; ----I
I$2500	EQU	2500H	; ----I
I$2580	EQU	2580H	; ----I
I$272B	EQU	272BH	; ----I
I.2800	EQU	2800H	; ----I
I$2803	EQU	2803H	; ----I
I$2807	EQU	2807H	; ----I
I$280B	EQU	280BH	; ----I
I$2A00	EQU	2A00H	; ----I
I$2A04	EQU	2A04H	; ----I
I$2A0C	EQU	2A0CH	; ----I
I$2A10	EQU	2A10H	; ----I
D$2B02	EQU	2B02H	; ---L-
I$2C00	EQU	2C00H	; ----I
I$2C04	EQU	2C04H	; ----I
I.2C13	EQU	2C13H	; ----I
I$2C16	EQU	2C16H	; ----I
I$2C26	EQU	2C26H	; ----I
D$2C2B	EQU	2C2BH	; ---L-
I$2D00	EQU	2D00H	; ----I
C$2D1B	EQU	2D1BH	; -C---
I$2D21	EQU	2D21H	; ----I
I$2D44	EQU	2D44H	; ----I
I$2D49	EQU	2D49H	; ----I
I$2E10	EQU	2E10H	; ----I
I$2E15	EQU	2E15H	; ----I
I$2F00	EQU	2F00H	; ----I
I$3007	EQU	3007H	; ----I
I$300F	EQU	300FH	; ----I
D.3030	EQU	3030H	; --S--
D.3031	EQU	3031H	; --S-I
D.3032	EQU	3032H	; --S--
I$3033	EQU	3033H	; ----I
D.3036	EQU	3036H	; --S-I
J$3104	EQU	3104H	; J----
I$3130	EQU	3130H	; ----I
I.3201	EQU	3201H	; ----I
I$321B	EQU	321BH	; ----I
D.3230	EQU	3230H	; --S--
I.3300	EQU	3300H	; ----I
I$3400	EQU	3400H	; ----I
D$3401	EQU	3401H	; --S--
I$3403	EQU	3403H	; ----I
I$3416	EQU	3416H	; ----I
D$3420	EQU	3420H	; --S--
D$3435	EQU	3435H	; --S--
I$3501	EQU	3501H	; ----I
I$3531	EQU	3531H	; ----I
D$3605	EQU	3605H	; ---L-
I$3609	EQU	3609H	; ----I
I.3613	EQU	3613H	; ----I
I$3700	EQU	3700H	; ----I
I$3732	EQU	3732H	; ----I
I$3803	EQU	3803H	; ----I
I.3812	EQU	3812H	; ----I
D$3827	EQU	3827H	; ---L-
I$3839	EQU	3839H	; ----I
D$3926	EQU	3926H	; ---L-
I$3939	EQU	3939H	; ----I
I$3A00	EQU	3A00H	; ----I
I.3A03	EQU	3A03H	; ----I
I.3A11	EQU	3A11H	; ----I
I.3A12	EQU	3A12H	; ----I
C$3AFF	EQU	3AFFH	; -C---
D$3B2D	EQU	3B2DH	; ---L-
I$3C00	EQU	3C00H	; ----I
D$3D3B	EQU	3D3BH	; ---L-
I$3E12	EQU	3E12H	; ----I
I$3E16	EQU	3E16H	; ----I
J$C101	EQU	0C101H	; J----
J$C200	EQU	0C200H	; J----
I$C300	EQU	0C300H	; ----I
J$C4DE	EQU	0C4DEH	; J----
C$C5DE	EQU	0C5DEH	; -C---
C$C601	EQU	0C601H	; -C---
J$CA00	EQU	0CA00H	; J----
C$CC00	EQU	0CC00H	; -C---
C$CD00	EQU	0CD00H	; -C---
C$CD01	EQU	0CD01H	; -C---
I$CEBF	EQU	0CEBFH	; ----I
I.CEC0	EQU	0CEC0H	; ----I
C$CF0D	EQU	0CF0DH	; -C---
I.CF35	EQU	0CF35H	; ----I
I.CF37	EQU	0CF37H	; ----I
I.CF38	EQU	0CF38H	; ----I
I$D0D0	EQU	0D0D0H	; ----I
I$D0F0	EQU	0D0F0H	; ----I
I.D110	EQU	0D110H	; ----I
J$D300	EQU	0D300H	; J----
C$D505	EQU	0D505H	; -C---
I$D8C9	EQU	0D8C9H	; ----I
I$D8D0	EQU	0D8D0H	; ----I
C.D8FB	EQU	0D8FBH	; -C--I
C$D900	EQU	0D900H	; -C---
D.D905	EQU	0D905H	; --SLI
D.D906	EQU	0D906H	; --SL-
D.D907	EQU	0D907H	; --SLI
D.D908	EQU	0D908H	; --SL-
D.D909	EQU	0D909H	; --SL-
D.D90B	EQU	0D90BH	; --SL-
D.D90D	EQU	0D90DH	; --SL-
D.D90E	EQU	0D90EH	; --SL-
D.D90F	EQU	0D90FH	; --SL-
I.D912	EQU	0D912H	; ----I
D.D919	EQU	0D919H	; --SL-
D.D91B	EQU	0D91BH	; --S-I
D.D91C	EQU	0D91CH	; --S--
D.D921	EQU	0D921H	; --SL-
D.D923	EQU	0D923H	; --SL-
I.D924	EQU	0D924H	; ----I
I.D94D	EQU	0D94DH	; ----I
D$D950	EQU	0D950H	; --S--
I.D955	EQU	0D955H	; ----I
D$D958	EQU	0D958H	; --S--
D$D95C	EQU	0D95CH	; --S--
I.D95D	EQU	0D95DH	; ----I
I$D965	EQU	0D965H	; ----I
I.D98D	EQU	0D98DH	; ----I
I$D995	EQU	0D995H	; ----I
I$D9AD	EQU	0D9ADH	; ----I
D.D9B5	EQU	0D9B5H	; --S-I
I$D9BA	EQU	0D9BAH	; ----I
I$D9BB	EQU	0D9BBH	; ----I
I.D9C2	EQU	0D9C2H	; ----I
I.D9C4	EQU	0D9C4H	; ----I
I.D9C7	EQU	0D9C7H	; ----I
I.D9C8	EQU	0D9C8H	; ----I
I$D9C9	EQU	0D9C9H	; ----I
D.D9CB	EQU	0D9CBH	; --SL-
I.D9CC	EQU	0D9CCH	; ----I
I.D9D2	EQU	0D9D2H	; ----I
D.D9E0	EQU	0D9E0H	; --SLI
D.D9E1	EQU	0D9E1H	; --SL-
D.D9E2	EQU	0D9E2H	; --SL-
I.D9EA	EQU	0D9EAH	; ----I
I$D9EE	EQU	0D9EEH	; ----I
I$D9F2	EQU	0D9F2H	; ----I
I.D9FA	EQU	0D9FAH	; ----I
I$D9FE	EQU	0D9FEH	; ----I
I$DA02	EQU	0DA02H	; ----I
I.DA1B	EQU	0DA1BH	; ----I
I$DA1C	EQU	0DA1CH	; ----I
I$DA23	EQU	0DA23H	; ----I
I.DA2B	EQU	0DA2BH	; ----I
I$DA2C	EQU	0DA2CH	; ----I
I$DA33	EQU	0DA33H	; ----I
D.DA3D	EQU	0DA3DH	; --SL-
D.DA5E	EQU	0DA5EH	; --SL-
D.DA62	EQU	0DA62H	; --SL-
D.DA64	EQU	0DA64H	; --S--
D$DA66	EQU	0DA66H	; --S--
D.DA67	EQU	0DA67H	; --SL-
D.DA69	EQU	0DA69H	; --SL-
D.DA6A	EQU	0DA6AH	; --SL-
D.DA6B	EQU	0DA6BH	; --SL-
D.DA6C	EQU	0DA6CH	; --SLI
D.DA6D	EQU	0DA6DH	; --SL-
D.DA6E	EQU	0DA6EH	; --SLI
D.DA6F	EQU	0DA6FH	; --SL-
D.DA70	EQU	0DA70H	; --SLI
D.DA71	EQU	0DA71H	; --SL-
D.DA72	EQU	0DA72H	; --SL-
D.DA73	EQU	0DA73H	; --SL-
D.DA74	EQU	0DA74H	; --SL-
D.DA75	EQU	0DA75H	; --SL-
D.DA76	EQU	0DA76H	; --SL-
D.DA77	EQU	0DA77H	; --SL-
D.DA79	EQU	0DA79H	; --SL-
D.DA7A	EQU	0DA7AH	; --SL-
D.DA7B	EQU	0DA7BH	; --SL-
D.DA7C	EQU	0DA7CH	; --SL-
D.DA7D	EQU	0DA7DH	; --SL-
D.DA7E	EQU	0DA7EH	; --SL-
D.DA7F	EQU	0DA7FH	; --SL-
D.DA80	EQU	0DA80H	; --SLI
D.DA81	EQU	0DA81H	; --SL-
I$DA82	EQU	0DA82H	; ----I
I.DA83	EQU	0DA83H	; ----I
D.DA88	EQU	0DA88H	; --SL-
D.DA8B	EQU	0DA8BH	; --SLI
D.DA8C	EQU	0DA8CH	; --SL-
D.DA8E	EQU	0DA8EH	; --SL-
D.DA8F	EQU	0DA8FH	; --SL-
D.DA94	EQU	0DA94H	; --SL-
D.DA95	EQU	0DA95H	; --SLI
D.DA96	EQU	0DA96H	; --SL-
D.DA97	EQU	0DA97H	; --SL-
D.DA98	EQU	0DA98H	; ---LI
I$DA99	EQU	0DA99H	; ----I
I$DA9F	EQU	0DA9FH	; ----I
I.DAAC	EQU	0DAACH	; ----I
D.DAAE	EQU	0DAAEH	; ---L-
I$DAAF	EQU	0DAAFH	; ----I
D.DAB1	EQU	0DAB1H	; ---LI
I$DAB3	EQU	0DAB3H	; ----I
I$DAB6	EQU	0DAB6H	; ----I
I$DAB9	EQU	0DAB9H	; ----I
I$DABC	EQU	0DABCH	; ----I
D.DAC1	EQU	0DAC1H	; ---L-
D.DAC2	EQU	0DAC2H	; ---LI
D.DAC3	EQU	0DAC3H	; ---L-
D.DAC4	EQU	0DAC4H	; --SL-
D.DAC5	EQU	0DAC5H	; --SL-
D.DAC6	EQU	0DAC6H	; --SL-
D.DAC7	EQU	0DAC7H	; --SL-
D.DAC8	EQU	0DAC8H	; --SL-
D.DAC9	EQU	0DAC9H	; --SL-
D.DACA	EQU	0DACAH	; --S--
D.DAD0	EQU	0DAD0H	; --SL-
D.DAD6	EQU	0DAD6H	; --S--
D.DAD8	EQU	0DAD8H	; --SL-
D.DAD9	EQU	0DAD9H	; --S--
I$DADA	EQU	0DADAH	; ----I
I$DADF	EQU	0DADFH	; ----I
C$DAE1	EQU	0DAE1H	; -C---
D.DAFB	EQU	0DAFBH	; --SL-
D.DAFD	EQU	0DAFDH	; --SL-
J$DB00	EQU	0DB00H	; J----
D.DB02	EQU	0DB02H	; --SL-
D.DB0E	EQU	0DB0EH	; --SL-
D.DB0F	EQU	0DB0FH	; --SL-
D.DB10	EQU	0DB10H	; --SL-
C$DC00	EQU	0DC00H	; -C---
C$E042	EQU	0E042H	; -C---
D$E102	EQU	0E102H	; --S--
I$E109	EQU	0E109H	; ----I
C$E201	EQU	0E201H	; -C---
J$E401	EQU	0E401H	; J----
J$EA0B	EQU	0EA0BH	; J----
J$F301	EQU	0F301H	; J----

CNSDFG	EQU	0F3DEH	; --S--
PUTPNT	EQU	0F3F8H	; --S--
GETPNT	EQU	0F3FAH	; --S--
LPTPOS	EQU	0F415H	; --S--
I$F420	EQU	0F420H	; ----I
I.F528	EQU	0F528H	; ----I
I.F52B	EQU	0F52BH	; ----I
I$F52C	EQU	0F52CH	; ----I
D$F530	EQU	0F530H	; --S--
D$F532	EQU	0F532H	; --S--
I$F54F	EQU	0F54FH	; ----I
I$F550	EQU	0F550H	; ----I
D.F55E	EQU	0F55EH	; --SL-
D.F55F	EQU	0F55FH	; --SL-
D.F560	EQU	0F560H	; --SL-
D.F561	EQU	0F561H	; --SLI
D.F562	EQU	0F562H	; --SLI
D.F563	EQU	0F563H	; --SLI
D.F564	EQU	0F564H	; --SL-
D.F565	EQU	0F565H	; --SL-
I$F567	EQU	0F567H	; ----I
I.F56E	EQU	0F56EH	; ----I
I$F5A0	EQU	0F5A0H	; ----I
I.F5B0	EQU	0F5B0H	; ----I
I$F5B8	EQU	0F5B8H	; ----I
I.F5C0	EQU	0F5C0H	; ----I
I$F5C8	EQU	0F5C8H	; ----I
I.F5D0	EQU	0F5D0H	; ----I
VALTYP	EQU	0F663H	; ----I
DAC	EQU	0F7F6H	; ----I
C$F80D	EQU	0F80DH	; -C---
FILTAB	EQU	0F860H	; ---L-
NULBUF	EQU	0F862H	; ---L-
PTRFIL	EQU	0F864H	; --S--
FILNAM	EQU	0F866H	; ----I
D.F86C	EQU	0F86CH	; --SL-
FILNM2	EQU	0F871H	; ----I
D$F877	EQU	0F877H	; ---L-
D.F878	EQU	0F878H	; --S--
FNKSTR	EQU	0F87FH	; ----I

C.F882	EQU	0F882H	; -C---
D$F887	EQU	0F887H	; --S--
I.F8CF	EQU	0F8CFH	; ----I
I$F8DF	EQU	0F8DFH	; ----I
I$F8EF	EQU	0F8EFH	; ----I

CHRCNT	EQU	0FAF9H	; --SL-
ROMA	EQU	0FAFAH	; ----I
MODE	EQU	0FAFCH	; ---L-

RSTMP	EQU	0FB03H	; --SL-
RSFCB	EQU	0FB04H	; --SL-
RSIQLN	EQU	0FB06H	; --SLI
MEXBIH	EQU	0FB07H	; J---I
OLDSTT	EQU	0FB0CH	; J---I
OLDINT	EQU	0FB11H	; J---I
DEVNUM	EQU	0FB16H	; ---LI
DATCNT	EQU	0FB17H	; ---LI
D$FB18	EQU	0FB18H	; ---L-
D.FB1A	EQU	0FB1AH	; --SLI
D.FB1B	EQU	0FB1BH	; --SLI
ERRORS	EQU	0FB1CH	; --SLI
ESTBLS	EQU	0FB1DH	; --S-I
COMMSV	EQU	0FB1EH	; --SL-
LSTCOM	EQU	0FB1FH	; --SL-
HOKVLD	EQU	0FB20H	; ----I
ONGSBF	EQU	0FBD8H	; ----I
OLDKEY	EQU	0FBE0H	; ---LI
KEYBUF	EQU	0FBF0H	; ----I
HIMEM	EQU	0FC4AH	; --S--
TRPTBL	EQU	0FC82H	; ----I
INTFLG	EQU	0FC9BH	; --SL-
CSRSR	EQU	0FCA9H	; ---L-

SLTWRK	EQU	0FD09H
; SLTWRK + main_slot*32 + sub_slot*8 + page*2.

D.FD0D	EQU	SLTWRK + 0*32 + 0*8 + 2*2 + 0	; in spooler interrupt flag
D.FD19	EQU	SLTWRK + 0*32 + 2*8 + 0*2 + 0	; ?
D.FD7F	EQU	SLTWRK + 3*32 + 2*8 + 3*2 + 0	; spooler get pointer / toshiba rs232 found flag
D.FD81	EQU	SLTWRK + 3*32 + 3*8 + 0*2 + 0	; spooler put pointer
C.FD83	EQU	SLTWRK + 3*32 + 3*8 + 1*2 + 0	; old H.TIMI (Spooler)
D.FD88	EQU	C.FD83+5			; spooler empty flag

PROCNM	EQU	0FD89H	; ----I
H.KEYI	EQU	0FD9AH	; --SLI
H.TIMI	EQU	0FD9FH	; ----I

I.FF00	EQU	0FF00H	; ----I
I$FF02	EQU	0FF02H	; ----I
H.NEWS	EQU	0FF3EH	; --S-I
H.LPTO	EQU	0FFB6H	; --S-I
I.FFC0	EQU	0FFC0H	; ----I
EXTBIO	EQU	0FFCAH	; -CS-I
DISINT	EQU	0FFCFH	; ----I
D.FFFF	EQU	0FFFFH	; --S-I

I4000:	DEFB	"AB"			; extension header
I4002:	DEFW	C4075			; extension INIT handler
I4004:	DEFW	C502E			; extension STATEMENT handler
I4006:	DEFW	C420A			; extension DEVICE handler
        DEFW    0			; extension BASIC program (no BASIC program)
        DEFS    6,0			; extension reserved

I4010:	DEFB	010H			; +00 MSX serial features (no TxReady INT, No Sync detect, No Timer INT, No CD, No RI)
	DEFB	000H			; +01 MSX serial version (version 1.0)
	DEFB	000H			; +02 reserved
	JP	J4040			; +03 RS232.INIT
	JP	C4282			; +06 RS232.OPEN
	JP	C4F98			; +09 RS232.STAT
	JP	C42E7			; +0C RS232.GETCHR
	JP	C4E17			; +0F RS232.SNDCHR
	JP	C42B2			; +12 RS232.CLOSE
	JP	J406A			; +15 RS232.EOF
	JP	C4339			; +18 RS232.LOC
	JP	C4364			; +1B RS232.LOF
	JP	C43A1			; +1E RS232.BACKUP
	JP	C4F1B			; +21 RS232.SNDBRK
	JP	C4F80			; +24 RS232.DTR
	RET				; +27 Reserved (with version 1.0)
	RET
	RET
	RET				; +2A Reserved (with version 1.0)
	RET
	RET
	RET				; +2D Reserved (with version 1.0)
	RET
	RET


J4040:	EI
	PUSH	BC
	PUSH	DE
	PUSH	HL
	LD	IY,-13
	ADD	IY,SP
	LD	SP,IY
	PUSH	IY
	POP	DE
	LD	C,13 
J4051:	CALL	C44E1
	LD	(DE),A
I4055:	INC	DE
	DEC	C
	JR	NZ,J4051
	CALL	C4B0D
	PUSH	AF
	LD	IY,13+2
	ADD	IY,SP
	POP	AF
	LD	SP,IY
	POP	HL
	POP	DE
	POP	BC
	RET

J406A:	LD	HL,0
I406D:	CALL	C4C88
	RET	Z
	CALL	C4381
	RET

;	  Subroutine ROM extension INIT handler
;	     Inputs  ________________________
;	     Outputs ________________________

C4075:	IN	A,(82H)			; read MSX serial system status register
	BIT	3,A			; reserved bit 3 should be '1'
	RET	Z			; nope, quit MSX serial INIT
	LD	A,0FEH			; enable RxReady interupt, reserved bits 7-4 '1'
	OUT	(82H),A			; write MSX serial interrupt mask register
	IN	A,(82H)
	BIT	3,A			; reserved bit 3 should be '0'
	RET	NZ			; nope, quit MSX serial INIT
	CPL
	LD	(D.FD7F),A		; toshiba MSX serial found
	CALL	C4C74
	LD	IY,I4155
	CALL	C4B0D
	CALL	C4143
	DI
	LD	DE,OLDINT
	LD	HL,H.KEYI
	LD	BC,5
	LDIR
	LD	DE,OLDSTT
	LD	HL,H.NEWS
	LD	BC,5
	LDIR
	CALL	C4C58
	LD	(H.KEYI+1),A
	LD	(H.NEWS+1),A
	LD	A,0F7H
	LD	(H.KEYI+0),A
	LD	(H.NEWS+0),A
	LD	HL,I4C82
	LD	(H.KEYI+2),HL
	LD	HL,I4A11
	LD	(H.NEWS+2),HL
	LD	A,0C9H
	LD	(H.KEYI+4),A
	LD	(H.NEWS+4),A
	EI
	LD	HL,HOKVLD
	BIT	0,(HL)
	JR	NZ,J40E4
	SET	0,(HL)
	LD	HL,EXTBIO
	LD	B,05H	; 5 
J40DF:	LD	(HL),0C9H
	INC	HL
	DJNZ	J40DF
J40E4:	XOR	A
	LD	DE,8*256+1
	CALL	EXTBIO
	LD	HL,DEVNUM
	LD	(HL),A
	XOR	A
	LD	DE,0*256+1
	CALL	EXTBIO
	ADD	A,A
	ADD	A,A
	ADD	A,A
	ADD	A,A
	OR	(HL)
	LD	(HL),A
	LD	DE,MEXBIH
	DI
I4100:	LD	HL,EXTBIO
	LD	BC,5
	LDIR
	CALL	C4C58
	LD	(EXTBIO+1),A
	LD	A,0F7H
	LD	(EXTBIO+0),A
	LD	HL,I43F6
	LD	(EXTBIO+2),HL
	LD	A,0C9H
	LD	(EXTBIO+4),A
	LD	BC,L412B
	LD	HL,I412B
	LD	DE,DISINT
	LDIR
	EI
	RET

I412B:	PUSH	DE
	LD	E,2
	JR	J4133

?4130:	PUSH	DE
	LD	E,3
J4133:	LD	D,0
	PUSH	IX
	PUSH	IY
	CALL	EXTBIO
	EI
	POP	IY
	POP	IX
	POP	DE
	RET

L412B	EQU	$-I412B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4143:	XOR	A
	LD	(D.FB1B),A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4147:	PUSH	HL
	LD	HL,DATCNT
	XOR	A
	LD	(HL),A
	INC	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	POP	HL
	RET

I4155:	JR	C,J41A5
	LD	SP,I4858
	LD	C,(HL)
	LD	C,(HL)
	LD	C,(HL)
	OR	B
	INC	B
	OR	B
	INC	B
	NOP

;	  Subroutine ROM extension STATEMENT handler (MSX serial statements)
;	     Inputs  ________________________
;	     Outputs ________________________

J4162:	LD	A,(D.FD7F)
	OR	A			; toshiba MSX serial found ?
	SCF
	RET	Z			; nope, quit
	EI
	PUSH	HL
	POP	IX
	LD	DE,I41B7
	CALL	C4175
	RET	C
	PUSH	DE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4175:	PUSH	BC
	PUSH	HL
J4177:	LD	HL,PROCNM
	LD	A,(DE)
	INC	A
	JR	Z,J4190
	CALL	C4194
	JR	Z,J4188
	INC	DE
	INC	DE
	INC	DE
	JR	J4177

J4188:	EX	DE,HL
	INC	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	AND	A
	JR	J4191

J4190:	SCF
J4191:	POP	HL
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4194:	LD	A,(DE)
	CALL	C4B04
	LD	C,A
	LD	A,(HL)
	CALL	C4B04
	CP	C
	JR	NZ,J41A6
	AND	A
	RET	Z
	INC	DE
	INC	HL
	JR	C4194
J41A5	EQU	$-1

J41A6:	LD	A,(DE)
	AND	A
	JR	Z,J41AD
	INC	DE
	JR	J41A6

J41AD:	LD	A,(HL)
	AND	A
	JR	Z,J41B4
	INC	HL
	JR	J41AD

J41B4:	LD	A,L
	OR	H
	RET

I41B7:	DEFB	"COMINI"
	DEFB	0
	DEFW	I45AE
	DEFB	"COMDTR"
	DEFB	0
	DEFW	I4671
	DEFB	"COMSTAT"
	DEFB	0
	DEFW	I468F
	DEFB	"COMBREAK"
	DEFB	0
	DEFW	I46B3
	DEFB	"COMTERM"
	DEFB	0
	DEFW	I46F8
	DEFB	"COM"
	DEFB	0
	DEFW	I4968
	DEFB	"COMON"
	DEFB	0
	DEFW	I49C0
	DEFB	"COMOFF"
	DEFB	0
	DEFW	I49A2
	DEFB	"COMSTOP"
	DEFB	0
	DEFW	I49DE
	DEFB	0FFH

;	  Subroutine ROM extension DEVICE handler
;	     Inputs  ________________________
;	     Outputs ________________________

C420A:	PUSH	HL
	LD	L,A
	LD	A,(D.FD7F)
	OR	A			; toshiba MSX serial found ?
	LD	A,L
	POP	HL
	JR	Z,J424F			; nope, return device not recognized
	EI
	CP	0FFH
	JP	NZ,J4251
	LD	HL,PROCNM
	LD	A,(HL)
	CP	"C"
	JR	NZ,J424F
	INC	HL
	LD	A,(HL)
	CP	"O"
	JR	NZ,J424F
	INC	HL
	LD	A,(HL)
	CP	"M"
	JR	NZ,J424F
	INC	HL
	LD	A,(HL)
	AND	A
	JR	NZ,J4236
	DEC	HL
	LD	A,"0"
J4236:	SUB	"0"
	JR	C,J424F
	CP	0AH	; 10 
	JR	NC,J424F
	PUSH	BC
	PUSH	AF
	LD	A,(DEVNUM)
	AND	0FH	; 15 
	LD	B,A
	POP	AF
	CP	B
	POP	BC
	JR	NZ,J424F
	INC	HL
	LD	A,(HL)
	AND	A
	RET	Z
J424F:	SCF
	RET

J4251:	PUSH	HL
	PUSH	AF
	LD	HL,I4262
	ADD	A,L
	LD	L,A
	JR	NC,J425B
	INC	H
J425B:	LD	A,(HL)
	INC	HL
	LD	H,(HL)
	LD	L,A
	POP	AF
	EX	(SP),HL
	RET

I4262:	HALT

?4263:	LD	B,D
	OR	D
	LD	B,D
	SBC	A,D
	LD	B,H
	CALL	NC,C$E042
	LD	B,D
	DEC	HL
	LD	B,E
	LD	E,(HL)
	LD	B,E
	LD	A,B
	LD	B,E
	CP	B
	LD	B,H
	AND	C
	LD	B,E

	LD	C,127
	CALL	C4282
	JP	C,J448E
	LD	(PTRFIL),HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4282:	PUSH	BC
	PUSH	DE
	PUSH	HL
	LD	(RSFCB),HL
	LD	A,C
	LD	(RSIQLN),A
	LD	(HL),E
	XOR	A
	INC	HL
	INC	HL
	LD	(HL),A
	INC	HL
	LD	(HL),A
	INC	HL
	INC	HL
I4295:	INC	HL
	LD	(HL),A
	CALL	C4143
	LD	A,E
	CP	08H	; 8 
	JR	Z,J42AD
	LD	HL,D.FB1B
	SET	3,(HL)
	DI
	CALL	C4C7B
	CALL	C4F6D			; RTS=1
	EI
	SCF
J42AD:	CCF
	POP	HL
	POP	DE
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C42B2:	PUSH	HL
	LD	HL,(RSFCB)
	LD	A,(HL)
	CP	02H	; 2 
	SCF
	CCF
	JR	NZ,J42C2
	LD	A,1AH
	CALL	C4E17
J42C2:	DI
	CALL	C4FBE
	CALL	C4F75
	CALL	C4C74
	EI
	LD	HL,D.FB1B
	RES	3,(HL)
	POP	HL
	RET

?42D4:	LD	A,C
	CALL	C4E17
	EI
	JP	C,J44C4
	JP	Z,J44C4
	RET

?42E0:	CALL	C42E7
	JP	M,J44C4
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C42E7:	PUSH	HL
	PUSH	BC
	CALL	C43B9
	LD	C,(HL)
	LD	(HL),00H
	DEC	HL
	LD	A,(HL)
	LD	(D.FB1A),A
	LD	(HL),00H
	INC	HL
	AND	A
	JR	NZ,J4321
	LD	A,C
	AND	A
	JR	NZ,J430D
	CALL	C4C9C
I4300	EQU	$-1
	EI
	LD	C,A
	JP	M,J4321
	CALL	C4EDE
	JR	C,J4321
	JR	Z,J4321
J430D:	PUSH	HL
	LD	HL,(RSFCB)
	LD	A,(HL)
	POP	HL
	CP	04H	; 4 
	JR	Z,J4325
	LD	A,C
	CP	1AH
	JR	NZ,J4325
	LD	(HL),A
	AND	A
	SCF
	JR	J4328

J4321:	OR	80H
	JR	J4327

J4325:	XOR	A
	INC	A
J4327:	LD	A,C
J4328:	POP	BC
	POP	HL
	RET

?432B:	PUSH	HL
	CALL	C4339
J432F:	LD	(DAC+2),HL
	LD	HL,VALTYP
	LD	(HL),2
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4339:	PUSH	AF
	EI
	LD	HL,(RSFCB)
	LD	A,(HL)
	CP	01H	; 1 
	JR	NZ,J4356
	CALL	C43B1
	JR	Z,J434E
	SUB	1AH
	JR	Z,J4359
	LD	A,01H	; 1 
J434E:	PUSH	BC
	CALL	C43C0
	ADD	A,B
	POP	BC
	JR	J4359

J4356:	CALL	C4C88
J4359:	LD	L,A
	LD	H,00H
	POP	AF
	RET

?435E:	PUSH	HL
	CALL	C4364
J4362:	JR	J432F

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4364:	PUSH	AF
	EI
	CALL	C4339
	PUSH	DE
	EX	DE,HL
	LD	A,(RSIQLN)
	LD	L,A
	LD	H,00H
	AND	A
	SBC	HL,DE
	INC	HL
	POP	DE
	POP	AF
	RET

?4378:	PUSH	HL
	CALL	C4381
	JP	M,J44C4
	JR	J4362

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4381:	PUSH	BC
	LD	B,A
	EI
	CALL	C42E7
	JP	M,J439E
	PUSH	BC
	LD	C,A
	CALL	C43A1
	POP	BC
	CP	1AH
	JR	Z,J439A
	XOR	A
	LD	L,A
	LD	H,A
	INC	A
	JR	J439E

J439A:	LD	HL,D.FFFF
	SCF
J439E:	LD	A,B
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C43A1:	PUSH	HL
	CALL	C43B9
	LD	(HL),C
	PUSH	AF
	DEC	HL
	LD	A,(D.FB1A)
	AND	38H	; "8"
	LD	(HL),A
	POP	AF
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C43B1:	PUSH	HL
	CALL	C43B9
	LD	A,(HL)
	POP	HL
	AND	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C43B9:	LD	HL,(RSFCB)
	INC	HL
	INC	HL
	INC	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C43C0:	PUSH	AF
	PUSH	HL
	LD	B,00H
	CALL	C4C97
	JR	Z,J43D6
	LD	C,A
J43CA:	CALL	C43D9
	LD	A,(HL)
	CP	1AH
	JR	Z,J43D6
	INC	B
	DEC	C
	JR	NZ,J43CA
J43D6:	POP	HL
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C43D9:	PUSH	DE
	LD	A,(D$FB18)
	LD	HL,RSIQLN
	ADD	A,B
	JR	C,J43E6
	CP	(HL)
	JR	C,J43E7
J43E6:	SUB	(HL)
J43E7:	LD	HL,(RSFCB)
	LD	E,09H	; 9 
	LD	D,00H
	ADD	HL,DE
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	ADD	HL,DE
	POP	DE
	RET

I43F6:	EI
	PUSH	AF
	LD	A,D
	INC	A
	JP	Z,J444B
	DEC	A
	JP	NZ,J445E
	LD	A,E
	AND	A
	JR	Z,J4411
	DEC	A
	JR	Z,J441E
	DEC	A
	JR	Z,J4424
	DEC	A
	JR	Z,J4438
	JP	J4479

J4411:	LD	A,08H	; 8 
	CALL	C44CB
	LD	A,00H
	CALL	C44CB
	JP	J4479

J441E:	POP	AF
	INC	A
	PUSH	AF
	JP	J4479

J4424:	CALL	C4A52
	JR	Z,J4435
	PUSH	BC
	CALL	C4DE3
	EI
	NOP
	POP	BC
	DI
	CALL	C4C74
	EI
J4435:	JP	J4479

J4438:	CALL	C4A52
	JR	Z,J4448
	DI
I443E:	CALL	C4C7B
	CALL	C4F6D			; RTS=1
	CALL	C4DC9			; signal sender to resume sending
	EI
J4448:	JP	J4479

J444B:	LD	A,E
	AND	A
	JR	NZ,J445C
	CALL	C447D
	LD	A,00H
	CALL	C44CB
	LD	A,00H
	CALL	C44CB
J445C:	JR	J4479

J445E:	CP	08H	; 8 
	JR	NZ,J4479
	LD	A,E
	AND	A
	JR	Z,J446C
	CP	01H	; 1 
	JR	Z,J4476
	JR	J4479

J446C:	CALL	C447D
	LD	A,00H
	CALL	C44CB
	JR	J4479

J4476:	POP	AF
	INC	A
	PUSH	AF
J4479:	POP	AF
	JP	MEXBIH

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C447D:	CALL	C4C58
	CALL	C44CB
	LD	A,10H	; 16 
	CALL	C44CB
	LD	A,40H	; "@"
	CALL	C44CB
	RET

J448E:	LD	IX,M6E6B
	JR	J44C8

?4494:	LD	IX,M6E80
	JR	J44C8

?449A:	LD	IX,M6E86
	JR	J44C8

J44A0:	LD	IX,M6E6E
	JR	J44C8

J44A6:	LD	IX,M6E77
	JR	J44C8

J44AC:	LD	IX,M481C
	JR	J44C8

J44B2:	LD	IX,M4055
	JR	J44C8

J44B8:	LD	IX,M475A
	JR	J44C8

J44BE:	LD	IX,M406D
	JR	J44C8

J44C4:	LD	IX,M73B2
J44C8:	JP	C459D

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C44CB:	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	IX
	LD	E,A
	LD	A,B
	LD	IX,WRSLT
	CALL	C45A2
	EI
	INC	HL
	POP	IX
	POP	DE
	POP	BC
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C44E1:	PUSH	BC
	PUSH	DE
	PUSH	IX
	LD	A,B
	LD	IX,RDSLT
	CALL	C45A2
	EI
	INC	HL
	POP	IX
	POP	DE
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C44F4:	PUSH	IX
	LD	IX,BREAKX
	CALL	C45A2
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4500:	PUSH	BC
	LD	B,A
	LD	A,(D.F561)
	AND	A
	JR	Z,J4526
	LD	A,B
	CP	20H	; " "
	JR	NC,J4526
	LD	A,5EH	; "^"
	CALL	C4528
	LD	A,B
	ADD	A,40H	; "@"
	CALL	C4528
	LD	A,B
	CP	0AH	; 10 
	POP	BC
	RET	NZ
	LD	A,0DH	; 13 
	CALL	C4528
	LD	A,0AH	; 10 
	JR	C4528

J4526:	LD	A,B
	POP	BC
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4528:	PUSH	AF
	CALL	CHPUT
	EI
	LD	A,(D.F563)
	AND	A
	JR	Z,J4539
	POP	AF
	PUSH	AF
	CALL	LPTOUT
	EI
J4539:	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C453B:	LD	A,(HL)
	EX	(SP),HL
	CP	(HL)
	JP	NZ,J44B2
	INC	HL
	EX	(SP),HL
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4543:	PUSH	IX
	LD	IX,M4666
	EXX
	PUSH	HL
	EXX
	CALL	C459D
	EXX
	POP	HL
	EXX
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4555:	PUSH	IX
	LD	IX,M4C64
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4561:	PUSH	IX
	LD	IX,M542F
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C456D:	PUSH	IX
	LD	IX,M521C
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4579:	PUSH	IX
	LD	IX,M5EA4
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4585:	PUSH	IX
	LD	IX,M67D0
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4591:	PUSH	IX
	LD	IX,M517A
	CALL	C459D
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C459D:	CALL	C45A2
	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C45A2:	PUSH	IY
	LD	IY,(EXPTBL+0-1)
	CALL	CALSLT
	POP	IY
	RET

;	  Subroutine _COMINI handler
;	     Inputs  ________________________
;	     Outputs ________________________

I45AE:	CALL	C4A58
	CALL	C4A52
	DI
	CALL	C4C74
	EI
	LD	A,(COMMSV)
	LD	(D.F560),A
	LD	IY,I$F567
	PUSH	BC
	PUSH	DE
	PUSH	HL
	LD	BC,13
	PUSH	IY
	POP	DE
	LD	HL,I4155
	LDIR
	POP	HL
	POP	DE
	POP	BC
	LD	A,B
	AND	C
	INC	A
	JR	NZ,J45EE
	LD	A,D
	AND	A
	JP	Z,J465A
	CP	3AH	; ":"
	JP	Z,J465A
	CP	29H	; ")"
	JP	Z,J4657
	CALL	C453B
	INC	L
	JR	J4614

J45EE:	PUSH	HL
	EXX
	PUSH	HL
	EXX
	POP	HL
	LD	A,B
	AND	A
	JR	Z,J4607
	PUSH	IY
	POP	DE
J45FA:	LD	A,(HL)
	CP	20H	; " "
	JR	Z,J4603
	CALL	C4B04
I4600	EQU	$-2
	LD	(DE),A
J4603:	INC	DE
	INC	HL
	DJNZ	J45FA
J4607:	POP	HL
	DEC	HL
	CALL	C4543
	CP	29H	; ")"
	JR	Z,J4657
	CALL	C453B
	INC	L
J4614:	CP	2CH	; ","
	JR	Z,J462E
	CALL	C4561
	LD	(IY+8),E
	LD	(IY+9),D
	LD	A,(HL)
	CP	29H	; ")"
	JR	NZ,J462E
	LD	(IY+10),E
	LD	(IY+11),D
	JR	J4657

J462E:	CALL	C453B
	INC	L
	CP	2CH	; ","
	JR	Z,J4644
	CALL	C4561
	LD	(IY+10),E
	LD	(IY+11),D
	LD	A,(HL)
	CP	29H	; ")"
	JR	Z,J4657
J4644:	CALL	C453B
	INC	L
	CP	29H	; ")"
	JR	Z,J4657
	CALL	C456D
	LD	(IY+12),A
	CALL	C453B
	ADD	HL,HL
	DEC	HL
J4657:	CALL	C4543
J465A:	EI
	CALL	C4B0D
	JP	C,J44B8
	CALL	C4A52
	CALL	NZ,C4C7B
I4666	EQU	$-1
	LD	A,(D.F560)
	BIT	5,A
	CALL	NZ,C4F6D		; RTS=1
	AND	A
	RET

;	  Subroutine _COMDTR handler
;	     Inputs  ________________________
;	     Outputs ________________________

I4671:	CALL	C4A58
	CALL	C4AC1
	CALL	C453B
	INC	L
	CALL	C4A52
	JP	Z,J44A6
	CALL	C4561
	CALL	C453B
	ADD	HL,HL
	LD	A,D
	OR	E
	CALL	C4F80
	EI
	RET

;	  Subroutine _COMSTAT handler
;	     Inputs  ________________________
;	     Outputs ________________________

I468F:	CALL	C4A58
	CALL	C4AC1
	CALL	C453B
	INC	L
	CALL	C4A52
	JP	Z,J44A6
	CALL	C4579
	PUSH	HL
	CALL	C4F98
	LD	(DAC+2),HL
	POP	HL
	CALL	C4ACB
	CALL	C453B
	ADD	HL,HL
	AND	A
	RET

;	  Subroutine _COMBREAK handler
;	     Inputs  ________________________
;	     Outputs ________________________

I46B3:	CALL	C4A58
	CALL	C4AC1
	CALL	C4A52
	JP	Z,J44A6
	LD	A,D
	CP	2CH	; ","
	JR	Z,J46D4
	AND	A
	JR	Z,J46CF
	CP	3AH	; ":"
	JR	Z,J46CF
	CALL	C453B
	ADD	HL,HL
J46CF:	LD	DE,C.000A
	JR	J46DE

J46D4:	CALL	C4543
	CALL	C4561
	CALL	C453B
	ADD	HL,HL
J46DE:	PUSH	HL
	LD	HL,J.0002
	AND	A
	SBC	HL,DE
	JP	NC,J44B8
	POP	HL
	CALL	C4F1B
	EI
	LD	A,00H
	INC	A
	CALL	C4EDE
	JP	C,J44C4
	AND	A
	RET

;	  Subroutine _COMTERM handler
;	     Inputs  ________________________
;	     Outputs ________________________

I46F8:	CALL	C4A58
	CALL	C4AC1
	LD	A,D
	AND	A
	JR	Z,J470A
	CP	3AH	; ":"
	JR	Z,J470A
	CALL	C453B
	ADD	HL,HL
J470A:	LD	(D.F565),HL
	CALL	C4A52
	JP	NZ,J44A0
	XOR	A
	LD	(D.F55E),A
	LD	(D.F563),A
	LD	(D.F561),A
	LD	(D.F562),A
	LD	HL,I.F8CF
	LD	DE,I.F56E
	LD	BC,48
	PUSH	BC
	PUSH	HL
	LDIR
	POP	HL
	POP	BC
	LD	B,C
	PUSH	HL
J4731:	LD	(HL),00H
	INC	HL
	DJNZ	J4731
	POP	DE
	LD	HL,I491A
	LD	BC,5
	PUSH	BC
	LDIR
	POP	BC
	LD	DE,I$F8DF
	PUSH	BC
	LDIR
	POP	BC
	LD	DE,I$F8EF
	PUSH	BC
	LDIR
	POP	BC
	LD	A,(CSRSR)
	LD	(D.F564),A
	CALL	C493B
	LD	HL,(NULBUF)
	LD	E,04H	; 4 
	LD	C,120
	CALL	C4282
J4762:	EI
	CALL	C4339
	LD	A,L
	OR	H
	JR	Z,J4794
	CALL	C4929
	JR	C,J47C9
	LD	C,A
	LD	A,(D.F55E)
	AND	A
	JR	NZ,J4786
	LD	A,C
	CP	1BH
	JR	NZ,J4781
	LD	A,01H	; 1 
	LD	(D.F55E),A
	LD	A,C
J4781:	CALL	C4500
	JR	J479D

J4786:	XOR	A
	LD	(D.F55E),A
	LD	A,C
	CP	1BH
	JR	NZ,J4781
	CALL	C4500
	JR	J47EC

J4794:	CALL	C4F6D			; RTS=1
	CALL	C4DC9			; signal sender to resume sending
	EI
	JR	C,J47C9
J479D:	CALL	C495D			; STOP or CTRL-STOP pressed ?
	CALL	NZ,C4933		; yep,
	CALL	C44F4
	JR	C,J47C9
	CALL	CHSNS
	EI
	JR	Z,J4762
	CALL	CHGET
	EI
	CP	0A0H
	JP	Z,J48F9
	CALL	C492E
	LD	C,A
	LD	A,(D.F562)
	AND	A
	JP	Z,J4762
	LD	A,C
	CALL	C4500
	JP	J4762

J47C9:	CALL	C42B2
	LD	HL,I.F56E
	LD	DE,I.F8CF
	LD	BC,48
	LDIR
	LD	HL,(D.F565)
	LD	A,(D.F564)
	AND	A
	PUSH	AF
	CALL	Z,C494B
	POP	AF
	CALL	NZ,C493B
	XOR	A
	DI
	LD	(INTFLG),A		; reset STOP or CTRL-STOP flag
	RET

J47EC:	LD	A,(D.F561)
	AND	A
	JP	NZ,J4762
	CALL	C494B
	LD	A,0FFH
	LD	(D.F55F),A
J47FB:	CALL	C4929
	JP	C,J47C9
I4800	EQU	$-1
	CP	3AH	; ":"
	JR	NZ,J47FB
	CALL	C48C7
	JP	C,J487E
I4809	EQU	$-2
	AND	A
	JR	Z,J4855
	LD	B,A
	LD	E,A
	CALL	C48BC
	JP	C,J487E
	CALL	C48C7
	JP	C,J487E
I481C:	ADD	A,L
	ADD	A,H
	ADD	A,E
	LD	E,A
J4820:	CALL	C48C7
	JR	C,J487E
	LD	(HL),A
	ADD	A,E
	LD	E,A
	INC	HL
	DJNZ	J4820
	CALL	C48C7
	JR	C,J487E
	ADD	A,E
	JR	NZ,J487E
	LD	A,47H	; "G"
	CALL	C492E
	LD	A,(D.F55F)
	AND	A
	JR	Z,J4849
	INC	A
	LD	(D.F55F),A
	LD	A,2AH	; "*"
	CALL	C4500
	JR	J4852

J4849:	DEC	A
	LD	(D.F55F),A
	LD	A,7FH
	CALL	C4500
J4852:	JP	J47FB

J4855:	CALL	C48BC
I4858:	JR	C,J487E
	LD	A,H
	OR	L
	JR	NZ,J4886
	CALL	C48C7
	JR	C,J487E
	CP	01H	; 1 
	JR	NZ,J487E
	CALL	C48C7
	JR	C,J487E
	CP	0FFH
	JR	NZ,J487E
J4870:	LD	A,47H	; "G"
	CALL	C492E
	CALL	C4954
	CALL	C493B
	JP	J4762

J487E:	LD	A,42H	; "B"
	CALL	C492E
	JP	J47FB

J4886:	CALL	C48C7
	JR	C,J487E
	CP	01H	; 1 
	JR	NZ,J487E
	ADD	A,L
	ADD	A,H
	LD	E,A
	CALL	C48C7
	JR	C,J487E
	ADD	A,E
	JR	NZ,J487E
	CALL	C4929
	JP	C,J47C9
	CP	0AH	; 10 
	JR	NZ,J4870
	LD	A,47H	; "G"
	CALL	C492E
	CALL	C4954
	PUSH	IX
	PUSH	HL
	LD	HL,I48B4
	EX	(SP),HL
	JP	(HL)

I48B4:	POP	IX
	CALL	C493B
	JP	J4762

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C48BC:	CALL	C48C7
	RET	C
	LD	H,A
	CALL	C48C7
	RET	C
	LD	L,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C48C7:	PUSH	BC
	CALL	C4929
	JR	C,J48E2
	CALL	C48E4
	JR	C,J48E2
	ADD	A,A
	ADD	A,A
	ADD	A,A
	ADD	A,A
	LD	B,A
	CALL	C4929
	JR	C,J48E2
	CALL	C48E4
	JR	C,J48E2
	ADD	A,B
J48E2:	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C48E4:	CALL	C4B04
	SUB	30H	; "0"
	RET	C
	CP	0AH	; 10 
	JR	C,J48F7
	SUB	11H	; 17 
	RET	C
	CP	06H	; 6 
	CCF
	RET	C
	ADD	A,0AH	; 10 
J48F7:	AND	A
	RET

J48F9:	CALL	CHGET
	EI
	SUB	06H	; 6 
	JR	Z,J490C
	DEC	A
	JR	Z,J4911
	DEC	A
	JR	NZ,J4917
	LD	HL,D.F563
	JR	J4914

J490C:	LD	HL,D.F561
	JR	J4914

J4911:	LD	HL,D.F562
J4914:	LD	A,(HL)
	CPL
	LD	(HL),A
J4917:	JP	J4762

I491A:	AND	B
	LD	B,00H
	LD	L,H
	LD	L,C
	AND	B
	RLCA
	NOP
	LD	L,B
	LD	H,(HL)
	AND	B
	EX	AF,AF'
	NOP
	LD	(HL),B
	LD	H,L
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4929:	CALL	C4C9C
	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C492E:	CALL	C4E17
	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4933:	LD	DE,I$0064
I4936:	CALL	C4F1B
	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C493B:	LD	A,1BH
	CALL	C4500
	LD	A,79H	; "y"
J4942:	CALL	C4500
	LD	A,35H	; "5"
J4947:	CALL	C4500
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C494B:	LD	A,1BH
	CALL	C4500
	LD	A,78H	; "x"
	JR	J4942

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4954:	LD	A,0DH	; 13 
	CALL	C4500
	LD	A,0AH	; 10 
	JR	J4947

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C495D:	LD	A,(INTFLG)
	AND	A			; STOP or CTRL-STOP pressed ?
	RET	Z			; nope, quit
	XOR	A
	LD	(INTFLG),A		; reset STOP or CTRL-STOP flag
	INC	A
	RET

;	  Subroutine _COM handler
;	     Inputs  ________________________
;	     Outputs ________________________

I4968:	CALL	C4A58
	CALL	C4AC1
	CALL	C4A45
	JP	C,J44B8
	CALL	C453B
	INC	L
	CALL	C453B
	ADC	A,L
	LD	IX,M4769
	CALL	C459D
	PUSH	HL
	LD	A,E
	OR	D
	JR	Z,J4994
	LD	IX,M4295
	CALL	C459D
	JP	NC,J44AC
	LD	E,C
	LD	D,B
J4994:	CALL	C4A32
	INC	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	POP	HL
	CALL	C453B
	ADD	HL,HL
	AND	A
	RET

;	  Subroutine _COMOFF handler
;	     Inputs  ________________________
;	     Outputs ________________________

I49A2:	CALL	C4A58
	CALL	C4AC1
	LD	A,D
	AND	A
	JR	Z,J49B4
	CP	3AH	; ":"
	JR	Z,J49B4
	CALL	C453B
	ADD	HL,HL
J49B4:	CALL	C4A45
	JP	C,J44B8
	LD	IX,M632B
	JR	J4A07

;	  Subroutine _COMON handler
;	     Inputs  ________________________
;	     Outputs ________________________

I49C0:	CALL	C4A58
	CALL	C4AC1
	LD	A,D
	AND	A
	JR	Z,J49D2
	CP	3AH	; ":"
	JR	Z,J49D2
	CALL	C453B
	ADD	HL,HL
J49D2:	CALL	C4A45
	JP	C,J44B8
	LD	IX,M631B
	JR	J49FA

;	  Subroutine _COMSTOP handler
;	     Inputs  ________________________
;	     Outputs ________________________

I49DE:	CALL	C4A58
	CALL	C4AC1
	LD	A,D
	AND	A
	JR	Z,J49F0
	CP	3AH	; ":"
	JR	Z,J49F0
	CALL	C453B
	ADD	HL,HL
J49F0:	CALL	C4A45
	JP	C,J44B8
	LD	IX,M6331
J49FA:	PUSH	HL
	PUSH	AF
	CALL	C4A32
	LD	A,(HL)
	AND	01H	; 1 
	CALL	Z,C4147
	POP	AF
	POP	HL
J4A07:	PUSH	HL
	CALL	C4A32
	CALL	C459D
	POP	HL
	AND	A
	RET

I4A11:	EI
	CALL	C4C88
	PUSH	HL
	CALL	NZ,C4A1D
	POP	HL
	JP	OLDSTT

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4A1D:	CALL	C4A32
D$4A20:	LD	A,(HL)
	AND	01H	; 1 
	RET	Z
	LD	A,(HL)
	OR	04H	; 4 
	CP	(HL)
	RET	Z
	CP	05H	; 5 
	RET	NZ
	LD	(HL),A
	LD	HL,ONGSBF
	INC	(HL)
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4A32:	CALL	C4A45
	JP	C,J44B8
	PUSH	BC
	LD	C,A
	ADD	A,A
	ADD	A,C
	LD	C,A
	LD	B,00H
	LD	HL,TRPTBL+18*3
	ADD	HL,BC
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4A45:	LD	A,(DEVNUM)
	AND	0F0H
	RRCA
	RRCA
	RRCA
	RRCA
	CP	06H	; 6 
	CCF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4A52:	LD	A,(D.FB1B)
	BIT	3,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4A58:	DEC	HL
	CALL	C4543
	LD	D,A
	JR	NZ,J4A66
J4A5F:	XOR	A
	LD	BC,D.FFFF
	PUSH	HL
	JR	J4AA4

J4A66:	CP	28H	; "("
	JP	Z,J4A71
	CP	2CH	; ","
	JR	Z,J4A5F
	JR	J4A79

J4A71:	CALL	C4543
	LD	D,A
	CP	2CH	; ","
	JR	Z,J4A5F
J4A79:	CALL	C4555
	PUSH	HL
	CALL	C4585
	LD	C,00H
	LD	B,(HL)
	INC	HL
	LD	A,(HL)
	INC	HL
	LD	H,(HL)
	LD	L,A
	LD	A,B
	AND	A
	JR	Z,J4AA4
	INC	HL
	LD	A,(HL)
	CP	3AH	; ":"
	JR	Z,J4A96
	DEC	HL
	XOR	A
	JR	J4AA4

J4A96:	DEC	HL
	LD	A,(HL)
	SUB	30H	; "0"
	JR	C,J4ABE
	CP	0AH	; 10 
	JR	NC,J4ABE
	INC	HL
	INC	HL
	DEC	B
	DEC	B
J4AA4:	LD	E,A
	LD	A,(DEVNUM)
	AND	0FH	; 15 
	PUSH	HL
	EXX
	POP	HL
	EXX
	POP	HL
	PUSH	AF
	DEC	HL
	CALL	C4543
	LD	D,A
	POP	AF
	CP	E
	RET	Z
J4AB8:	POP	HL
	PUSH	IX
	POP	HL
	SCF
	RET

J4ABE:	POP	HL
	JR	J4AB8

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4AC1:	LD	A,B
	OR	C
	RET	Z
	LD	A,B
	AND	C
	INC	A
	RET	Z
	JP	J44B8

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4ACB:	PUSH	HL
	LD	HL,VALTYP
	LD	A,(HL)
	CP	2
	JR	Z,J4AF9
	CP	4
	JR	Z,J4AE9
	CP	8
	JP	NZ,J44BE
	LD	(HL),2
	PUSH	DE
	LD	A,8
	CALL	C4591
	LD	C,8
	JR	J4AF3

J4AE9:	LD	(HL),02H	; 2 
	PUSH	DE
	LD	A,4
	CALL	C4591
	LD	C,4
J4AF3:	POP	DE
	LD	HL,DAC
	JR	J4AFE

J4AF9:	LD	HL,DAC+2
	LD	C,2
J4AFE:	LD	B,0
	LDIR
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4B04:	CP	61H	; "a"
	RET	C
	CP	7BH	; "{"
	RET	NC
	SUB	20H	; " "
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4B0D:	LD	A,(IY+0)
	SUB	35H	; "5"
	CP	04H	; 4 
	JR	NC,J4B2E
	LD	B,A
	LD	D,A
	CALL	C4BD9
	LD	A,(IY+1)
	CP	45H	; "E"
	JR	Z,J4B30
	CP	4FH	; "O"
	JR	Z,J4B32
	CP	49H	; "I"
	JR	Z,J4B36
	CP	4EH	; "N"
	JR	Z,J4B3C
J4B2E:	SCF
	RET

J4B30:	SET	3,B
J4B32:	SET	2,B
	JR	J4B3C

J4B36:	LD	A,B
	CP	03H	; 3 
	JR	Z,J4B2E
	INC	B
J4B3C:	RLC	B
	RLC	B
	LD	A,(IY+2)
	SUB	31H	; "1"
	CP	03H	; 3 
	JR	NC,J4B2E
	INC	A
	RRCA
	RRCA
	OR	B
	LD	B,A
	LD	C,00H
	LD	A,(IY+3)
	CP	58H	; "X"
	JR	NZ,J4B5B
	SET	0,C
	JR	J4B5F

J4B5B:	CP	4EH	; "N"
	JR	NZ,J4B2E
J4B5F:	LD	A,(IY+4)
	CP	48H	; "H"
	JR	NZ,J4B6A
	SET	1,C
	JR	J4B6E

J4B6A:	CP	4EH	; "N"
	JR	NZ,J4B2E
J4B6E:	LD	A,(IY+5)
	CP	41H	; "A"
	JR	NZ,J4B79
	SET	3,C
	JR	J4B7D

J4B79:	CP	4EH	; "N"
	JR	NZ,J4B2E
J4B7D:	LD	A,(IY+6)
	CP	41H	; "A"
	JR	NZ,J4B88
	SET	2,C
	JR	J4B8C

J4B88:	CP	4EH	; "N"
	JR	NZ,J4B2E
J4B8C:	LD	A,(IY+7)
	CP	53H	; "S"
	JR	NZ,J4B9C
	LD	A,D
	CP	02H	; 2 
	JR	NZ,J4B2E
	SET	4,C
	JR	J4BA0

J4B9C:	CP	4EH	; "N"
	JR	NZ,J4B2E
J4BA0:	LD	A,C
	LD	(ERRORS),A
	LD	A,02H	; 2 
	OR	B
	LD	(LSTCOM),A
	CALL	C4EF0
	LD	E,(IY+8)
	LD	D,(IY+9)
	CALL	C4BED
J4BB6:	JP	C,J4B2E
	LD	C,00H
	CALL	C5017
	LD	E,(IY+10)
	LD	D,(IY+11)
	CALL	C4BED
	JR	C,J4BB6
	LD	C,01H	; 1 
	CALL	C5017
	LD	A,(IY+12)
	LD	(RSTMP),A
	CALL	C4F83
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4BD9:	PUSH	AF
	PUSH	BC
	XOR	03H	; 3 
	LD	C,0FFH
	JR	Z,J4BE6
	LD	B,A
J4BE2:	SRL	C
	DJNZ	J4BE2
J4BE6:	LD	A,C
	LD	(ESTBLS),A
	POP	BC
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4BED:	PUSH	HL
	BIT	7,D
	JR	Z,J4BFF
	LD	A,E
	AND	D
	INC	A
	JR	Z,J4C1B
	LD	HL,X.0000
	SBC	HL,DE
	EX	DE,HL
	JR	J4C1A

J4BFF:	LD	HL,I4C1E
J4C02:	LD	C,(HL)
	INC	HL
	LD	B,(HL)
I4C05:	INC	HL
	LD	A,B
	OR	C
	JR	Z,J4C1B
I4C09	EQU	$-1
	PUSH	HL
	LD	L,E
	LD	H,D
	AND	A
	SBC	HL,BC
	POP	HL
	JR	Z,J4C17
	INC	HL
	INC	HL
	JR	J4C02

J4C17:	LD	E,(HL)
	INC	HL
	LD	D,(HL)
J4C1A:	SCF
J4C1B:	CCF
	POP	HL
	RET

I4C1E:	LD	(X.0000),A
	ADD	HL,BC
	LD	C,E
	DEFB	0,0
	LD	B,6EH	; "n"
	NOP
	RLA
	INC	B
	INC	L
	LD	BC,I$0180
	LD	E,B
	LD	(BC),A
	RET	NZ
	NOP
	OR	B
	INC	B
	LD	H,B
I4C35:	NOP
I4C36:	EX	AF,AF'
	RLCA
	LD	B,B
	NOP
	RET	NC
	RLCA
	LD	A,(D.6000)
	ADD	HL,BC
	JR	NC,J4C42
J4C42:	DJNZ	J4C52
	JR	NZ,J4C46
J4C46:	RET	NZ
	LD	(DE),A
	JR	J4C4A

J4C4A:	JR	NZ,J4C68
	DJNZ	J4C4E
J4C4E:	ADD	A,B
	DEC	H
	INC	C
	DEFB	0
J4C52:	DEFB	0
	LD	C,E
	LD	B,00H
	DEFB	0,0

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C58:	PUSH	BC
	PUSH	HL
	IN	A,(0A8H)
	RRCA
	RRCA
	AND	03H	; 3 
	LD	C,A
	LD	B,00H
	LD	HL,EXPTBL
I4C64	EQU	$-2
	ADD	HL,BC
	OR	(HL)
J4C68:	LD	C,A
	INC	HL
	INC	HL
	INC	HL
	INC	HL
	LD	A,(HL)
	AND	0CH	; 12 
	OR	C
	POP	HL
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C74:	PUSH	AF
	LD	A,0FFH
	OUT	(82H),A
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C7B:	PUSH	AF
	LD	A,0FEH
	OUT	(82H),A
	POP	AF
	RET

I4C82:	CALL	C4D0C
	JP	OLDINT

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C88:	CALL	C4C97
	PUSH	BC
	LD	B,A
	CALL	C43B1
	JR	Z,J4C94
	LD	A,01H	; 1 
J4C94:	ADD	A,B
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C97:	LD	A,(DATCNT)
	AND	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4C9C:	PUSH	HL
	PUSH	DE
	PUSH	BC
	LD	HL,DATCNT
J4CA2:	EI
	CALL	C44F4
	JR	C,J4D04
	LD	A,(HL)
	AND	A
	JR	NZ,J4CB8
	CALL	C4F6D			; RTS=1
	CALL	C4DC9			; signal sender to resume sending
	JR	C,J4D04
	JR	Z,J4D04
	JR	J4CA2

J4CB8:	DI
	DEC	(HL)
	CALL	C4DAE
	LD	C,(HL)
	LD	B,81H
	INC	HL
	LD	A,(HL)
	LD	(D.FB1A),A
	AND	A
	JR	NZ,J4CFC
	DEC	B
	LD	A,C
	CP	0DH	; 13 
	JR	NZ,J4CFC
	LD	HL,(FILTAB)
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	HL,(RSFCB)
	RST	20H
	JR	NZ,J4CFC
	PUSH	BC
	CALL	C4DE3
	EI
	JR	C,J4CF9
	JR	Z,J4CF9
	CALL	C4F75
	CALL	C5006
J4CE9:	CALL	C5012
	JR	NC,J4CE9
	CALL	C5006
J4CF1:	CALL	C5012
	JR	NC,J4CF1
	POP	BC
	JR	J4CFC

J4CF9:	POP	BC
	JR	J4D04

J4CFC:	LD	A,C
	OR	A
	DEC	B
J4CFF:	EI
	POP	BC
	POP	DE
	POP	HL
	RET

J4D04:	PUSH	AF
	POP	BC
	RES	7,C
	PUSH	BC
	POP	AF
	JR	J4CFF

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4D0C:	CALL	C4F68
	RET	Z
	CALL	C4F4E
	LD	HL,ESTBLS
	AND	(HL)
	LD	C,A
	CALL	C4F54
	LD	B,A
	AND	A
	JR	NZ,J4D39
	LD	HL,D.FB1B
	LD	A,C
	CP	11H	; 17 
	JR	Z,J4D2F
	CP	13H	; 19 
	JR	NZ,J4D4A
	SET	2,(HL)
	JR	J4D31

J4D2F:	RES	2,(HL)
J4D31:	LD	A,(ERRORS)
	BIT	0,A
	RET	NZ
	JR	J4D4A

J4D39:	AND	20H	; " "
	JR	Z,J4D62
	LD	A,C
	AND	A
	JR	NZ,J4D62
	LD	HL,D.FB1B
	SET	4,(HL)
	LD	B,00H
	JR	J4D62

J4D4A:	LD	A,(ERRORS)
	BIT	4,A
	JR	Z,J4D62
	LD	HL,D.FB1B
	LD	A,C
	SUB	0FH	; 15 
	JR	NZ,J4D5C
	RES	7,(HL)
	RET

J4D5C:	INC	A
	JR	NZ,J4D62
	SET	7,(HL)
	RET

J4D62:	LD	HL,DATCNT
	LD	A,(RSIQLN)
	CP	(HL)
	RET	Z
	INC	(HL)
	INC	HL
	PUSH	BC
	CALL	C4DAE
	POP	BC
	LD	A,(ERRORS)
	BIT	4,A
	LD	A,C
	JR	Z,J4D87
	CP	20H	; " "
	JR	C,J4D87
	LD	A,(D.FB1B)
	BIT	7,A
	LD	A,C
	JR	Z,J4D87
	OR	80H
J4D87:	LD	(HL),A
	PUSH	HL
	LD	HL,DATCNT
	LD	A,(RSIQLN)
	SUB	(HL)
	POP	HL
	JR	NZ,J4D95
	SET	7,B
J4D95:	CP	10H	; 16 
	CALL	C,C4DE3
	LD	A,B
	INC	HL
	LD	(HL),A
	DEC	HL
	AND	A
	RET	NZ
	LD	A,(ERRORS)
	BIT	3,A
	RET	Z
	LD	A,(HL)
	CP	0DH	; 13 
	RET	NZ
	LD	C,0AH	; 10 
	JR	J4D62

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4DAE:	INC	HL
	LD	A,(HL)
	LD	C,A
	INC	A
	PUSH	HL
	LD	HL,RSIQLN
	CP	(HL)
	POP	HL
	JR	C,J4DBB
	XOR	A
J4DBB:	LD	(HL),A
	EX	DE,HL
	LD	HL,(RSFCB)
	LD	B,00H
	ADD	HL,BC
	ADD	HL,BC
	LD	BC,I.0009
	ADD	HL,BC
	RET

;         Subroutine signal sender to resume sending
;	     Inputs  ________________________
;	     Outputs ________________________

C4DC9:	DI
	LD	A,(D.FB1B)
	BIT	1,A
	JR	NZ,J4DD4
	XOR	A
	INC	A
	RET

J4DD4:	LD	C,11H	; 17 
	CALL	C4DFF
	RET	C
	RET	Z
	PUSH	HL
	LD	HL,D.FB1B
	RES	1,(HL)
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4DE3:	DI
	XOR	A
	INC	A
	LD	A,(D.FB1B)
	BIT	1,A
	RET	NZ
	PUSH	HL
	LD	HL,D.FB1B
	SET	1,(HL)
	POP	HL
	LD	C,13H	; 19 
	CALL	C4DFF
	CALL	C4FBE
	CALL	C4F75
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4DFF:	LD	A,(ERRORS)
I4E00	EQU	$-2
	BIT	0,A
	JR	NZ,J4E09
	XOR	A
	INC	A
	RET

J4E09:	CALL	C4FBE
	PUSH	DE
	CALL	C4FCD
	POP	DE
	RET	C
	RET	Z
	LD	A,C
	JP	C4F51

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4E17:	EI
	PUSH	BC
	LD	C,A
	LD	A,(ERRORS)
	BIT	4,A
	JR	Z,J4E59
	LD	A,C
	CP	20H	; " "
	JR	C,J4E59
	LD	A,(D.FB1B)
	BIT	0,A
	JR	NZ,J4E43
	BIT	7,C
	JR	Z,J4E59
	LD	A,0EH	; 14 
	CALL	C4E5B
	JR	C,J4EA5
	JR	Z,J4EA5
	PUSH	HL
	LD	HL,D.FB1B
	SET	0,(HL)
	POP	HL
	JR	J4E57

J4E43:	BIT	7,C
	JR	NZ,J4E57
	LD	A,0FH	; 15 
	CALL	C4E5B
	JR	C,J4EA5
	JR	Z,J4EA5
	PUSH	HL
	LD	HL,D.FB1B
	RES	0,(HL)
	POP	HL
J4E57:	RES	7,C
J4E59:	LD	A,C
	POP	BC
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4E5B:	PUSH	HL
	LD	HL,ERRORS
	BIT	2,(HL)
	POP	HL
	JR	Z,J4E7A
	CP	0AH	; 10 
	JR	NZ,J4E7A
	LD	A,(D.FB1B)
	BIT	5,A
	LD	A,0AH	; 10 
	JR	Z,J4E7A
	PUSH	HL
	LD	HL,D.FB1B
	RES	5,(HL)
	POP	HL
	AND	A
	RET

J4E7A:	PUSH	BC
	LD	C,A
	PUSH	DE
	CALL	C4EAB
	POP	DE
	JR	C,J4EA5
	JR	Z,J4EA5
	CALL	C4FBE
	CALL	C4FCD
	JR	C,J4EA5
	JR	Z,J4EA5
	LD	A,C
	CALL	C4F51
	EI
	PUSH	HL
	LD	HL,D.FB1B
	CP	0DH	; 13 
	JR	NZ,J4EA0
	SET	5,(HL)
	JR	J4EA2

J4EA0:	RES	5,(HL)
J4EA2:	POP	HL
	XOR	A
	INC	A
J4EA5:	CALL	C4EDE
	LD	A,C
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4EAB:	LD	A,(ERRORS)
	BIT	0,A
	JR	Z,J4EDB
	LD	A,(RSTMP)
	LD	D,A
J4EB6:	LD	E,64H	; "d"
J4EB8:	CALL	C5006
J4EBB:	EI
	CALL	C44F4
	DI
	RET	C
	LD	A,(D.FB1B)
	BIT	2,A
	JR	Z,J4EDB
	LD	A,(RSTMP)
	AND	A
	JR	Z,J4EBB
	CALL	C5012
	JR	NC,J4EBB
	AND	A
	DEC	E
	JR	NZ,J4EB8
	DEC	D
	JR	NZ,J4EB6
	RET

J4EDB:	XOR	A
	INC	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4EDE:	PUSH	HL
	LD	HL,D.FB1A
	LD	(HL),00H
	JR	C,J4EEC
	JR	NZ,J4EEE
	SET	6,(HL)
	JR	J4EEE

J4EEC:	SET	2,(HL)
J4EEE:	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4EF0:	XOR	A
	OUT	(81H),A
	PUSH	AF
	POP	AF
	OUT	(81H),A
	PUSH	AF
	POP	AF
	OUT	(81H),A
	PUSH	AF
	POP	AF
	LD	A,40H	; "@"
	OUT	(81H),A
	PUSH	AF
	POP	AF
	LD	A,(LSTCOM)
	OUT	(81H),A
	PUSH	AF
	POP	AF
	CALL	C4F4E
	CALL	C4F54
	LD	A,07H	; 7 
	CALL	C4FFE
	CALL	C4F4E
	JP	C4F54

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F1B:	PUSH	BC
	DI
	CALL	C4C74
	EI
	LD	A,(COMMSV)
	OR	08H	; 8 
	LD	B,A
J4F27:	CALL	C44F4
	JR	C,J4F3C
	CALL	C4FBE
	XOR	A
	CALL	C4F51
	LD	A,B
	CALL	C4FFE
I4F35	EQU	$-2
	DEC	DE
	LD	A,E
	OR	D
	JR	NZ,J4F27
J4F3C:	PUSH	AF
	CALL	C4FBE
	LD	A,B
	AND	0F7H
	CALL	C4FFE
	DI
	CALL	C4C7B
	EI
	POP	AF
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F4E:	IN	A,(80H)
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F51:	OUT	(80H),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F54:	IN	A,(81H)
	AND	38H	; "8"
	PUSH	AF
	LD	A,(COMMSV)
	PUSH	AF
	OR	10H	; 16 
	CALL	C4FFE
	POP	AF
	CALL	C4FFE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F68:	IN	A,(81H)
	AND	02H	; 2 
	RET

;         Subroutine RTS=1
;	     Inputs  ________________________
;	     Outputs ________________________

C4F6D:	PUSH	AF
	LD	A,(COMMSV)
	SET	5,A
	JR	J4F7B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F75:	PUSH	AF
	LD	A,(COMMSV)
	RES	5,A
J4F7B:	CALL	C4FFE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F80:	AND	A
	JR	Z,J4F8C
;
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F83:	DI
	PUSH	AF
	LD	A,(COMMSV)
	OR	02H	; 2 
	JR	J4F93

J4F8C:	DI
	PUSH	AF
	LD	A,(COMMSV)
	AND	0FDH
J4F93:	CALL	C4FFE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4F98:	PUSH	AF
	IN	A,(82H)
	LD	L,0C1H
	XOR	L
	AND	L
	LD	L,A
	IN	A,(81H)
	AND	80H
	JR	Z,J4FA8
	SET	3,L
J4FA8:	DI
	LD	A,(D.FB1B)
	BIT	4,A
	JR	Z,J4FB7
	SET	2,L
	RES	4,A
	LD	(D.FB1B),A
J4FB7:	EI
	LD	A,(D.FB1A)
	LD	H,A
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4FBE:	PUSH	AF
J4FBF:	EI
	NOP
	NOP
	DI
	IN	A,(81H)
	AND	05H	; 5 
	CP	05H	; 5 
	JR	NZ,J4FBF
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4FCD:	LD	A,(ERRORS)
	BIT	1,A
	JR	Z,J4FFB
	LD	A,(RSTMP)
	LD	D,A
J4FD8:	LD	E,100
J4FDA:	CALL	C5006
J4FDD:	CALL	C44F4
	EI
	RET	C
	IN	A,(82H)
	BIT	7,A
	JR	Z,J4FFB
	LD	A,(RSTMP)
	AND	A
	JR	Z,J4FDD
	CALL	C5012
	JR	NC,J4FDD
	AND	A
	DEC	E
	JR	NZ,J4FDA
	DEC	D
	JR	NZ,J4FD8
	RET

J4FFB:	XOR	A
	INC	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C4FFE:	OUT	(81H),A
	LD	(COMMSV),A
	PUSH	AF
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5006:	PUSH	AF
	PUSH	BC
	PUSH	DE
	LD	A,0B0H
	LD	C,86H
	LD	DE,04800H
	JR	J5024

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5012:	IN	A,(82H)
	RLCA
	RLCA
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5017:	PUSH	AF
	PUSH	BC
	PUSH	DE
	LD	A,C
	LD	B,C
	ADD	A,84H
	LD	C,A
	LD	A,B
	RRCA
	RRCA
	OR	36H	; "6"
J5024:	OUT	(87H),A
	OUT	(C),E
	OUT	(C),D
	POP	DE
	POP	BC
	POP	AF
	RET

;
; Toshiba firmware
;
;	

;	  Subroutine ROM extension STATEMENT handler
;	     Inputs  ________________________
;	     Outputs ________________________

C502E:	EI
	PUSH	HL
	LD	HL,I508E
	CALL	C5078
	JP	NC,J515E		; SPOLON
	LD	HL,I5095
	CALL	C5078
	JP	NC,J51AE		; SPOLOFF
	LD	HL,I509D
	CALL	C5078
	JP	NC,J51DE		; LCOPY
	LD	HL,I50A3
	CALL	C5078
	JP	NC,J5061		; JWP
	LD	HL,I50A7
	CALL	C5078
	JP	NC,J5067		; EWP
	POP	HL
	JP	J4162			; MSX serial STATEMENT handler

;	  Subroutine _JWP
;	     Inputs  ________________________
;	     Outputs ________________________

J5061:	CALL	C506D			; check HIMEM
	JP	J6235			; start japanese wordprocessor

;	  Subroutine _EWP
;	     Inputs  ________________________
;	     Outputs ________________________

J5067:	CALL	C506D			; check HIMEM
	JP	J61E3			; start european wordprocessor

;	  Subroutine check HIMEM
;	     Inputs  ________________________
;	     Outputs ________________________

C506D:	LD	A,(HIMEM+1)
	CP	HIGH 0DE00H
	RET	NC
	LD	E,7
	JP	J61C8			; BASIC out of memory error

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5078:	LD	BC,16
	LD	DE,PROCNM
J507E:	LD	A,(DE)
	OR	A
	JR	Z,J5089
	INC	DE
	CPI
	JR	NZ,J508C
	JR	J507E

J5089:	LD	A,(HL)
	OR	A
	RET	Z
J508C:	SCF
	RET

I508E:	DEFB	"SPOLON"
	DEFB	0

I5095:	DEFB	"SPOLOFF"
	DEFB	0

I509D:	DEFB	"LCOPY"
	DEFB	0

I50A3:	DEFB	"JWP"
	DEFB	0

I50A7:	DEFB	"EWP"
	DEFB	0

C50AB:	LD	HL,D.FD19 + 1
	LD	(HL),77H
	INC	HL
	LD	(HL),0C9H

;	  Subroutine Spooler interrupt handler
;	     Inputs  ________________________
;	     Outputs ________________________

C50B4:	XOR	A
	LD	B,A
	LD	HL,D.FD0D
	XOR	A
	OR	(HL)			; already in spooler interrupt handler ?
	LD	A,B
	RET	NZ			; yep, quit
	LD	(HL),H			; flag in spooler interrupt handler
	PUSH	AF
	PUSH	HL
	CALL	C50ED			; if queue is not empty and printer ready, print byte
	CALL	C50DC			; if queue is not empyy and printer ready soon, print byte
	CALL	C50ED			; if queue is not empty and printer ready, print byte
	CALL	C50DC			; if queue is not empyy and printer ready soon, print byte
	CALL	C50ED			; if queue is not empty and printer ready, print byte
	CALL	C50ED			; if queue is not empty and printer ready, print byte
	CALL	C50ED			; if queue is not empty and printer ready, print byte
	CALL	C.FD83
	POP	HL
	XOR	A
	LD	(HL),A			; flag not in spooler interrupt handler
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C50DC:	EI
	LD	A,(D.FD88)
	OR	A			; spooler queue empty ?
	RET	Z			; yep, quit
	LD	B,60
J50E4:	CALL	LPTSTT			; printer ready ?
	JR	NZ,J50F7		; yep,
	DEC	B
	RET	Z
	JR	J50E4

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C50ED:	EI
	LD	A,(D.FD88)
	OR	A			; spooler queue empty ?
	RET	Z			; yep, quit
	CALL	LPTSTT			; printer ready ?
	RET	Z			; nope, quit
J50F7:	LD	A,83H			; slot 3-0 (RAM)
	LD	HL,(D.FD7F)		; spooler GET pointer
	CALL	RDSLT
	EI
	CALL	M08C9			; write byte to printer port (NOT ACCORDING TO MSX RULES!)
	INC	HL
	BIT	7,H
	JR	Z,J510A
	LD	H,0
J510A:	LD	(D.FD7F),HL
	LD	DE,(D.FD81)
	RST	20H
	RET	NZ
	XOR	A
	LD	(D.FD88),A		; spooler queue empty
	RET

;	  Subroutine H.LPTO handler
;	     Inputs  ________________________
;	     Outputs ________________________

C5118:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
J511C:	EI
	CALL	BREAKX			; CTRL-STOP pressed ?
	JR	NC,J512C		; nope,
	XOR	A
	LD	(LPTPOS),A
	POP	AF
	SCF
J5128:	POP	BC
	POP	DE
	POP	HL
	RET

J512C:	DI
	LD	HL,(D.FD81)		; put pointer
	LD	DE,(D.FD7F)		; get pointer
	RST	20H			; buffer empty or full ?
	JR	NZ,J513D		; nope, put in buffer
	LD	A,(D.FD88)
	OR	A			; spooler queue empty ?
	JR	NZ,J511C		; nope, buffer is full, keep waiting
J513D:	POP	AF
	PUSH	AF
	LD	E,A
	LD	A,83H			; slot 3-0 (RAM)
	CALL	WRSLT
	INC	HL
	BIT	7,H			; end of buffer reached ?
	JR	Z,J514C
	LD	H,0			; yep, warp around
J514C:	LD	A,0FFH
	LD	(D.FD81),HL		; update put pointer
	LD	(D.FD88),A		; spooler queue not empty
	EI

;	+0	+0	af
;	+2	+2	bc
;	+4	+4	de
;	+6	+6	hl
;       +8      +8      callf BIOS registers
;       +10     +18     returnaddress CALLF caller
;       +12     +20     returnaddress hook caller

	LD	HL,22
	ADD	HL,SP
	LD	(HL),0D3H
	POP	AF
	JR	J5128

;	  Subroutine _SPOLON
;	     Inputs  ________________________
;	     Outputs ________________________

J515E:	LD	E,36H
	LD	A,(SLTWRK + 0*32 + 0*8 + 0*2 +0)
	BIT	5,A			; ramdisk disabled ?
	JP	NZ,J61C8		; yep, BASIC File already open
	BIT	6,A			; ramdisk in use ?
	JP	NZ,J61C8		; yep, BASIC File already open
	LD	BC,5
	LD	HL,H.TIMI
	LD	DE,C.FD83
	DI
	LDIR				; save H.TIMI
	LD	C,5
	LD	HL,I51A4
	LD	DE,H.TIMI
	LDIR				; install spooler H.TIMI handler
	LD	C,5
	LD	HL,I51A9
	LD	DE,H.LPTO
	LDIR				; install spooler H.LPTO handler
	XOR	A
	LD	(D.FD88),A		; spooler queue empty
	LD	HL,D.FD7F
	LD	B,4
J5196:	LD	(HL),A
	INC	HL
	DJNZ	J5196			; initialize spooler GET/PUT pointers
	DEC	A
	LD	HL,SLTWRK + 0*32 + 0*8 + 0*2 +0
	SET	5,(HL)			; ramdisk disabled
	EI
	POP	HL
	XOR	A
	RET

I51A4:	RST	30H
	DEFB	08FH			; slot 3-3
	DEFW	C50B4
	RET

I51A9:	RST	30H
	DEFB	08FH			; slot 3-3
	DEFW	C5118
	RET

;	  Subroutine _SPOLOFF
;	     Inputs  ________________________
;	     Outputs ________________________

J51AE:	LD	E,36H
	LD	A,(SLTWRK + 0*32 + 0*8 + 0*2 +0)
	BIT	6,A			; ramdisk in use ?
	JP	NZ,J61C8		; yep, BASIC File already open
	BIT	5,A			; ramdisk disabled ?
	JR	Z,J51DC			; nope, quit
	LD	BC,5
	LD	HL,C.FD83
	LD	DE,H.TIMI
	DI
	LDIR
	LD	A,0C9H
	LD	(H.LPTO+0),A
	XOR	A
	LD	(LPTPOS),A
	LD	HL,SLTWRK + 0*32 + 0*8 + 0*2 +0
	RES	5,(HL)			; ramdisk enabled
	EI
	LD	A,0DH	; 13 
	CALL	C.08C9
J51DC:	POP	HL
	RET

;	  Subroutine _LCOPY
;	     Inputs  ________________________
;	     Outputs ________________________

J51DE:	LD	E,3BH
	LD	A,(SLTWRK + 0*32 + 0*8 + 0*2 +0)
	BIT	5,A			; ramdisk disabled ?
	JP	Z,J61C8			; nope, BASIC File not OPEN error
	LD	E,36H
	LD	A,(D.FD88)
	OR	A			; spooler queue empty ?
	JP	NZ,J61C8		; nope, BASIC File already open error
	LD	E,35H
	LD	A,(D.FD81+0)
	OR	A
	JR	NZ,J5200
	LD	A,(D.FD81+1)
	OR	A
	JP	Z,J61C8			; BASIC File not found
J5200:	DI
	LD	HL,0
	LD	(D.FD7F),HL
	LD	A,0FFH
	LD	(D.FD88),A		; spooler queue not empty
	POP	HL
	XOR	A
	EI
	RET

;	  Subroutine interrupt handler (COPY key ?)
;	     Inputs  ________________________
;	     Outputs ________________________

C5210:	LD	A,(D.7FFF)
	OR	60H			; 01100000b: looks like invoke SRAM on page 2
	LD	(D.7FFF),A
	LD	(D.80BE),SP		; save stack pointer
I521C:	LD	SP,I87FF		; temporary stack in SRAM
	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	IX
	PUSH	IY
	CALL	C5934
	CP	128+15
	JR	Z,J5242
	CALL	C5BBB			; save PSG volume and silence
	CALL	C52EF			; RP501
	CALL	C5259
I5236:	CALL	C5B9D			; wait for STOP pressed and released
	CALL	C531C			; RP501
	CALL	C5BD7			; restore PSG volume
	CALL	C59D3
J5242:	POP	IY
	POP	IX
	POP	BC
	POP	DE
	POP	HL
	LD	SP,(D.80BE)		; restore stack pointer
	LD	A,(D.7FFF)
	AND	9FH			; 10011111b: looks like invoke ROM on page 2
	LD	(D.7FFF),A
	XOR	A			; interrupt handled
	JP	M1437

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5259:	LD	A,(D.80A0)
	AND	0FEH			; screenmode 0 (TEXT40/TEXT80) ?
	JR	NZ,J52AF		; nope,
	LD	HL,I5295
	CALL	C592B			; send string to printer
	CALL	C532B
	CALL	C550B
	XOR	A
J526D:	LD	(D.80B9),A
	CALL	C5928
	XOR	A
J5274:	LD	(X.80B8),A
	CALL	C5603
	CALL	C5664
	LD	A,(X.80B8)
	INC	A
	LD	HL,D.80C4
	CP	(HL)
	JR	NZ,J5274
	LD	A,(D.80B9)
	INC	A
	LD	HL,D.80C3
	CP	(HL)
	JR	NZ,J526D
	CALL	C573A
	RET

I5295:	DEFB	"   "
I5298:	DEFB	"TOSHIBA  PASOPIA IQ   "
	DEFB	0

J52AF:	LD	HL,I5295
	IN	A,(90H)
	BIT	0,A			; unknown printer bit (8/16 switch ?)
	JR	NZ,J52BB
	LD	HL,I5298
J52BB:	CALL	C592B			; send string to printer
	CALL	C532B
	CALL	C5380
	LD	A,0FCH
J52C6:	LD	(X.80B8),A
	CALL	C5922
	LD	A,(D.8017)
J52CF:	LD	(D.80B9),A
	CALL	C570D
	CALL	C5731
	LD	A,(D.80B9)
	INC	A
	LD	HL,D.80C3
	CP	(HL)
	JR	NZ,J52CF
	LD	A,(X.80B8)
	SUB	04H	; 4 
	CP	0FCH
	JR	NZ,J52C6
	CALL	C573A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C52EF:	LD	HL,I8140
	IN	A,(0B4H)
	LD	(HL),A
	LD	A,13
	OUT	(0B4H),A
	IN	A,(0B5H)
	INC	HL
	LD	(HL),A
	LD	HL,I8142
	XOR	A
	OUT	(0B5H),A		; select RP-501 bank 0
	LD	A,12
J5305:	OUT	(0B4H),A
	PUSH	AF
	IN	A,(0B5H)
	AND	0FH
	LD	(HL),A
	INC	HL
	POP	AF
	DEC	A
	JR	NZ,J5305		; save bank 0
	LD	A,13
	OUT	(0B4H),A
	LD	A,(HL)
	OR	08H
	OUT	(0B5H),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C531C:	LD	HL,I8141
	LD	A,0DH
I5321:	OUT	(0B4H),A
	LD	A,(HL)
	OUT	(0B5H),A
	DEC	HL
	LD	A,(HL)
	OUT	(0B4H),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C532B:	LD	HL,I8142
	LD	A,(HL)
	ADD	A,08H	; 8 
	CP	0AH	; 10 
	JR	C,J5338
I5335:	LD	A,(HL)
I5336:	DEC	A
	DEC	A
J5338:	OR	30H	; "0"
	CALL	C5B51			; send byte to printer
	INC	HL
	LD	A,(HL)
	OR	30H	; "0"
	CALL	C5B51			; send byte to printer
	INC	HL
	LD	B,02H	; 2 
J5347:	PUSH	BC
	LD	A,2FH	; "/"
	CALL	C5B51			; send byte to printer
	CALL	C5374
	POP	BC
	DJNZ	J5347
	LD	A,20H	; " "
	CALL	C5B51			; send byte to printer
	LD	A,20H	; " "
	CALL	C5B51			; send byte to printer
	INC	HL
	CALL	C5374
	LD	A,3AH	; ":"
	CALL	C5B51			; send byte to printer
	CALL	C5374
	LD	A,0DH	; 13 
	CALL	C5B51			; send byte to printer
	LD	A,0AH	; 10 
	CALL	C5B51			; send byte to printer
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5374:	LD	B,02H	; 2 
J5376:	LD	A,(HL)
	INC	HL
	OR	30H	; "0"
	CALL	C5B51			; send byte to printer
	DJNZ	J5376
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5380:	LD	HL,(D.80AB)
	LD	A,(D.80B2)
	LD	DE,I8200
	LD	B,0A0H
J538B:	CALL	C5B22			; read byte from VRAM
	LD	(DE),A
	INC	DE
	INC	HL
	LD	A,(D.80B2)
	DJNZ	J538B
	IN	A,(90H)
	BIT	0,A			; unknown printer bit (8/16 switch ?)
	JR	NZ,J53B0
	LD	HL,I54CB
	LD	(X.80D6),HL
	LD	HL,I54BD
	CALL	C592B			; send string to printer
	LD	HL,I5EF5
	LD	(D.80D8),HL
	JR	J53C2

J53B0:	LD	HL,I54E3
	LD	(X.80D6),HL
	LD	HL,I54C4
	CALL	C592B			; send string to printer
	LD	HL,I5E88
	LD	(D.80D8),HL
J53C2:	LD	A,(D.8009)
	AND	80H			; 192 lines mode ?
	JR	Z,J53DA			; yep,
	LD	A,212
	LD	(D.80C3),A
	LD	HL,(X.80D6)
	LD	DE,12
	ADD	HL,DE
	LD	(X.80D6),HL
	JR	J53DF

J53DA:	LD	A,192
	LD	(D.80C3),A
J53DF:	LD	A,(D.8017)
	LD	B,A
	LD	A,(D.80C3)
	LD	(D.8122),A
	ADD	A,B
	LD	(D.80C3),A
	LD	IX,I8040
	LD	HL,I8100
	LD	B,10H	; 16 
J53F6:	LD	A,(IX+0)
	LD	D,(IX+1)
	INC	IX
	INC	IX
	CALL	C5853
	LD	(HL),A
	INC	HL
	DJNZ	J53F6
	XOR	A
	LD	DE,D.813A
	CALL	C5FE6
	LD	A,(D.80C0)
	OR	A			; color 0 transparent ?
	JR	NZ,J5463		; nope,
	LD	A,(D.80A0)
	CP	07H			; screenmode 6 ?
	JR	NZ,J544E		; nope,
	LD	A,(D.8007)
	AND	0FH
	PUSH	AF
	RRCA
	RRCA
	AND	03H	; 3 
	LD	DE,X.8132
	CALL	C5FE6
	POP	AF
	AND	03H	; 3 
	LD	DE,D.8134
I542F	EQU	$-2
	CALL	C5FE6
	LD	A,(X.8132)
I5436	EQU	$-1
	LD	C,A
	LD	A,(D.8134)
	ADD	A,C
	RRA
	LD	(D.813A),A
	LD	A,(D.8135)
	LD	C,A
	LD	A,(D.8133)
	ADD	A,C
	RRA
	LD	(D.813B),A
	JR	J5463

J544E:	LD	HL,I8100
	PUSH	HL
	LD	A,(D.8007)
	AND	0FH
	JR	Z,J545B
	LD	L,A
	LD	A,(HL)
J545B:	POP	HL
	LD	(HL),A
	LD	DE,D.813A
	CALL	C5FE6
J5463:	LD	A,(D.80A0)		; screenmode
	LD	HL,I5876
	LD	(D.80D0),HL
	LD	HL,I5BF9
	LD	(D.80D2),HL
	LD	HL,I58D0
	LD	(D.80D4),HL
	CP	02H			; screenmode 3 ?
	RET	Z			; yep, quit
	LD	HL,I5749
	LD	(D.80D0),HL
	CP	03H	; 3 
	RET	Z
	CP	04H	; 4 
	RET	Z
	LD	HL,I5D14
	LD	(D.80D2),HL
	CP	05H	; 5 
	RET	Z
	LD	HL,I580E
	LD	(D.80D0),HL
	CP	06H	; 6 
	RET	Z
	CP	07H	; 7 
	RET	Z
	LD	HL,I583E
	LD	(D.80D0),HL
	LD	HL,I58E1
	LD	(D.80D4),HL
	CP	08H	; 8 
	RET	Z
	LD	HL,I5914
	LD	(D.80D4),HL
	LD	HL,J54FB
	LD	DE,I8100
	LD	BC,16
	LDIR
	RET

I54BD:	DEFB	27,"P"
	DEFB	27,"T12"
	DEFB	0

I54C4:	DEFB	27,"M"
	DEFB	27,"T16"
	DEFB	0

I54CB:	DEFB	13,10
	DEFB	27,"S1152"
	DEFB	0,0,0,0

I54E3:	DEFB	13,10
	DEFB	"   "
	DEFB	27,"I0768"
	DEFB	0

I54EF:	DEFB	13,10
	DEFB	"   "
	DEFB	27,"I0848"
	DEFB	0

J54FB:	DEFB	000H
	DEFB	001H
	DEFB	00CH
	DEFB	00DH
	DEFB	060H
	DEFB	061H
	DEFB	06CH
	DEFB	06DH
	DEFB	09DH
	DEFB	003H
	DEFB	01CH
	DEFB	01FH
	DEFB	0E0H
	DEFB	0E3H
	DEFB	0FCH
	DEFB	0FFH

C550B:	LD	A,(D.8007)
	LD	(D.813C),A
	PUSH	AF
	AND	0FH	; 15 
	LD	DE,X.8132
	CALL	C5FD9
	POP	AF
	RRCA
	RRCA
	RRCA
	RRCA
	AND	0FH	; 15 
	LD	DE,D.8134
	CALL	C5FD9
	LD	HL,X.8132
	LD	DE,D.8134
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J5545
	INC	HL
	INC	DE
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J5545
	LD	A,(D.813C)
	AND	0FH	; 15 
	LD	H,A
	RRCA
	RRCA
	RRCA
	RRCA
	OR	H
	LD	(D.813C),A
J5545:	LD	HL,I55F7
	LD	(X.80D6),HL
	LD	HL,(D.80A7)
	LD	A,H
	AND	0FEH
	LD	H,A
	XOR	A
	LD	L,A
	LD	(D.80A7),HL
	LD	A,(D.8009)
	AND	80H			; 212 lines mode ?
	JR	NZ,J5565		; yep,
	LD	A,30H	; "0"
	LD	(D.80C3),A
	JR	J556A

J5565:	LD	A,35H	; "5"
	LD	(D.80C3),A
J556A:	LD	A,(D.80A0)
	OR	A			; screenmode 0 TEXT40 ?
	JR	NZ,J5577		; nope,
	LD	A,40
	LD	(D.80C4),A
	JR	J55D5

J5577:	LD	A,80
	LD	(D.80C4),A
	LD	A,(D$800C)
	LD	(D.813D),A
	PUSH	AF
	AND	0FH	; 15 
	LD	DE,I8136
	CALL	C5FD9
	POP	AF
	RRCA
	RRCA
	RRCA
	RRCA
	AND	0FH	; 15 
	LD	DE,I8138
	CALL	C5FD9
	LD	HL,X.8132
	LD	DE,I8136
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J55B7
	INC	DE
	INC	HL
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J55B7
	LD	A,(D.813C)
	AND	0FH	; 15 
	LD	H,A
	LD	A,(D.813D)
	AND	0F0H
	OR	H
	LD	(D.813D),A
J55B7:	LD	HL,I8136
	LD	DE,I8138
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J55D5
	INC	DE
	INC	HL
	LD	A,(DE)
	CP	(HL)
	JR	NZ,J55D5
	LD	A,(D.813D)
	AND	0FH	; 15 
	LD	H,A
	RRCA
	RRCA
	RRCA
	RRCA
	OR	H
	LD	(D.813D),A
J55D5:	IN	A,(90H)
	BIT	0,A			; unknown printer bit (8/16 switch ?)
	JR	NZ,J55E2
	LD	HL,I55E9
	CALL	C592B			; send string to printer
	RET

J55E2:	LD	HL,I55F0
	CALL	C592B			; send string to printer
	RET

I55E9:	DEC	DE
	LD	C,(HL)
	DEC	DE
	LD	D,H
	LD	SP,I.0036

I55F0:	DEC	DE
	LD	B,H
	DEC	DE
	LD	D,H
	LD	SP,I.0036
I55F7:	DEC	C
	LD	A,(BC)
	JR	NZ,J561B
	JR	NZ,J5618
	LD	D,E
	JR	NC,J5634
	JR	C,J5632
	NOP

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5603:	LD	HL,(D.80A5)
	LD	A,(X.80B8)
	LD	E,A
	LD	D,0
	ADD	HL,DE
	LD	A,(D.80C4)
	LD	E,A
	LD	A,(D.80B9)
	SRL	A
	CALL	C5BB0
J5618	EQU	$-1
	LD	A,(D.80AF)
J561B	EQU	$-1
	CALL	C5B22			; read byte from VRAM
	LD	HL,(D.80A9)
I5621	EQU	$-1
	LD	DE,8
	CALL	C5BB0
	LD	BC,4
	LD	A,(D.80B9)
	BIT	0,A
	JR	Z,J5633
J5632:	ADD	HL,BC
J5633:	LD	A,(D.80B1)
J5634	EQU	$-2
	LD	DE,I80F0
	CALL	C5B40			; read block from VRAM
	LD	DE,I8300
	LD	B,06H	; 6 
J5641:	PUSH	BC
	LD	HL,I80F0
	LD	B,04H	; 4 
J5647:	LD	C,(HL)
	BIT	7,C
	JR	NZ,J5652
	RES	1,A
	RES	0,A
	JR	J5656

J5652:	SET	1,A
	SET	0,A
J5656:	RRCA
	RRCA
	RL	C
	LD	(HL),C
	INC	HL
	DJNZ	J5647
	LD	(DE),A
	INC	DE
	POP	BC
	DJNZ	J5641
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5664:	PUSH	BC
	PUSH	HL
	LD	A,(D.80A0)
	OR	A			; screenmode 0 TEXT40 ?
	JR	NZ,J5686		; nope,
	LD	A,(D.813C)
	CALL	C56FB
	LD	HL,I8300
	LD	B,06H	; 6 
J5677:	LD	A,(HL)
	INC	HL
	PUSH	AF
	CALL	C5B51			; send byte to printer
	POP	AF
	CALL	C5B51			; send byte to printer
	DJNZ	J5677
	POP	HL
	POP	BC
	RET

J5686:	LD	A,(D.800D)
	AND	0F0H			; ON
	LD	A,(D.813C)
	JR	Z,J56E9
	LD	DE,10
	LD	HL,0
	LD	A,(D.80B9)
	SRL	A
	CALL	C5BB0
	LD	A,(X.80B8)
	RRCA
	RRCA
	RRCA
	AND	0FH	; 15 
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	EX	DE,HL
	LD	HL,(D.80A7)
	ADD	HL,DE
	LD	A,(X.80B0)
	CALL	C5B22			; read byte from VRAM
	LD	C,A
	LD	A,(X.80B8)
	AND	07H	; 7 
	LD	B,A
	INC	B
	LD	A,01H	; 1 
J56BF:	RRCA
	DJNZ	J56BF
	AND	C
	LD	A,(D.813C)
	JR	Z,J56E9
	AND	0FH	; 15 
	LD	B,A
	LD	A,(D.813D)
	LD	C,A
	AND	0FH	; 15 
	CP	B
	LD	A,C
	JR	Z,J56E9
	CALL	C56FB
	LD	HL,I8300
	LD	B,06H	; 6 
J56DD:	LD	A,(HL)
	XOR	0FFH
	CALL	C5B51			; send byte to printer
	INC	HL
	DJNZ	J56DD
	POP	HL
	POP	BC
	RET

J56E9:	CALL	C56FB
	LD	HL,I8300
	LD	B,06H	; 6 
J56F1:	LD	A,(HL)
	CALL	C5B51			; send byte to printer
	INC	HL
	DJNZ	J56F1
	POP	HL
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C56FB:	LD	B,A
	RRCA
	RRCA
	RRCA
	RRCA
	CP	B
	RET	NZ
	LD	HL,I8300
	XOR	A
	LD	B,06H	; 6 
J5708:	LD	(HL),A
	INC	HL
	DJNZ	J5708
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C570D:	LD	HL,I80F0
	LD	B,08H	; 8 
	LD	A,0F0H
J5714:	LD	(HL),A
	INC	HL
	DJNZ	J5714
	LD	HL,(D.80D0)
	LD	DE,I5720
	PUSH	DE
	JP	(HL)

I5720:	LD	HL,(D.80D4)
	LD	DE,I5728
	PUSH	DE
	JP	(HL)

I5728:	LD	HL,(D.80D2)
	LD	DE,I5730
	PUSH	DE
	JP	(HL)

I5730:	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5731:	LD	HL,I5739
	PUSH	HL
	LD	HL,(D.80D8)
	JP	(HL)

I5739:	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C573A:	LD	B,02H	; 2 
J573C:	LD	A,0DH	; 13 
	CALL	C5B51			; send byte to printer
	LD	A,0AH	; 10 
	CALL	C5B51			; send byte to printer
	DJNZ	J573C
	RET

I5749:	LD	A,(X.80B8)
	RRCA
	RRCA
	RRCA
	AND	1FH
	LD	(D.80B5),A
	LD	A,(D.80B9)
	LD	B,A
	RRCA
	RRCA
	RRCA
	AND	1FH
	LD	(D.80B6),A
	LD	A,B
	AND	07H	; 7 
	LD	(D.80B7),A
	LD	HL,(D.80A5)
	LD	A,(D.80B5)
	LD	L,A
	LD	A,(D.80B6)
	LD	DE,32
	CALL	C5BB0
	LD	A,(D.80AF)
	CALL	C5B22			; read byte from VRAM
	LD	(D.80B4),A
	LD	HL,(D.80A9)
	LD	A,(D.80A0)
	CP	03H			; screenmode 1 ?
	JR	Z,J5792			; yep,
	LD	A,(D.80B6)
	AND	38H	; "8"
	LD	D,A
	LD	E,00H
	ADD	HL,DE
J5792:	LD	A,(D.80B4)
	LD	DE,8
	CALL	C5BB0
	LD	A,(D.80B7)
	ADD	A,L
	LD	L,A
	LD	A,(D.80B1)
	CALL	C5B22			; read byte from VRAM
	LD	HL,I80F3
	LD	(HL),A
	LD	A,(X.80B8)
	BIT	2,A
	JR	NZ,J57B3
	RRD
J57B3:	XOR	A
	RRD
	LD	B,04H	; 4 
J57B8:	LD	(HL),A
	RRCA
	DEC	HL
	DJNZ	J57B8
	LD	A,(D.80A0)
	CP	03H			; screenmode 1 ?
	JR	NZ,J57D5		; nope,
	LD	HL,(D.80A7)
	LD	A,(D.80B4)
	RRCA
	RRCA
	RRCA
	AND	1FH
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	JR	J57EC

J57D5:	LD	HL,(D.80A7)
	LD	A,(D.80B6)
	AND	38H	; "8"
	LD	D,A
	LD	A,(D.80B7)
	LD	E,A
	ADD	HL,DE
	LD	A,(D.80B4)
	LD	DE,8
	CALL	C5BB0
J57EC:	LD	A,(X.80B0)
	CALL	C5B22			; read byte from VRAM
	LD	HL,I80C6
	LD	(HL),A
	XOR	A
	RRD
	LD	E,(HL)
	LD	D,A
	LD	HL,I80F0
	LD	B,04H	; 4 
J5800:	LD	A,(HL)
	BIT	0,A
	JR	Z,J5808
	LD	A,E
	JR	J5809

J5808:	LD	A,D
J5809:	LD	(HL),A
	INC	HL
	DJNZ	J5800
	RET

I580E:	LD	HL,(D.80A5)
	LD	A,(X.80B8)
	LD	E,A
	LD	A,(D.80B9)
	SRL	A
	RR	E
	LD	D,A
	ADD	HL,DE
	LD	A,(D.80AF)
	LD	BC,2
	LD	DE,I80F0
	CALL	C5B40			; read block from VRAM
	LD	A,(D$80F1)
	LD	(D$80F2),A
	LD	HL,I80F0
	LD	B,02H	; 2 
J5835:	XOR	A
	RRD
	INC	HL
	LD	(HL),A
	INC	HL
	DJNZ	J5835
	RET

I583E:	LD	DE,I80F0
	LD	A,(X.80B8)
	LD	L,A
	LD	A,(D.80B9)
	LD	H,A
	LD	BC,4
	LD	A,(D.80AF)
	CALL	C5B40			; read block from VRAM
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5853:	PUSH	HL
	LD	H,A
	RRA
	LD	H,A
	AND	03H	; 3 
	LD	L,A
	LD	A,H
	RRA
	AND	1CH
	OR	L
	LD	L,A
	LD	A,D
	RRCA
	RRCA
	RRCA
	AND	0E0H
	OR	L
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5869:	PUSH	HL
	PUSH	BC
	LD	HL,I60C8
	LD	C,A
	LD	B,00H
	ADD	HL,BC
	LD	A,(HL)
	POP	BC
	POP	HL
	RET

I5876:	LD	HL,(D.80A5)
	LD	A,(X.80B8)
	RRCA
	RRCA
	RRCA
	AND	1FH
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	LD	A,(D.80B9)
	RRCA
	RRCA
	RRCA
	AND	1FH
	LD	(D.80B6),A
	LD	DE,32
	CALL	C5BB0
	LD	A,(D.80AF)
	CALL	C5B22			; read byte from VRAM
	LD	HL,(D.80A9)
	LD	DE,8
	CALL	C5BB0
	LD	A,(D.80B9)
	RRCA
	RRCA
	AND	07H	; 7 
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	LD	A,(D.80B1)
	CALL	C5B22			; read byte from VRAM
	LD	HL,I80F0
	LD	(HL),A
	LD	A,(X.80B8)
	AND	04H	; 4 
	JR	Z,J58C6
	XOR	A
	RRD
	JR	J58C9

J58C6:	XOR	A
	RLD
J58C9:	LD	B,04H	; 4 
J58CB:	LD	(HL),A
	INC	HL
	DJNZ	J58CB
	RET

I58D0:	LD	DE,I80F0
	LD	B,04H	; 4 
J58D5:	LD	A,(DE)
	CALL	C5F95
	CALL	C5869
	LD	(DE),A
	INC	DE
	DJNZ	J58D5
	RET

I58E1:	LD	HL,I80F0
	LD	B,04H	; 4 
J58E6:	XOR	A
	RRD
	LD	DE,X.8132
	CALL	C5FD9
	LD	A,(HL)
	LD	DE,D.8134
	CALL	C5FD9
	LD	A,(D.8135)
	LD	C,A
	LD	A,(D.8133)
	ADD	A,C
	RRA
	LD	D,A
	LD	A,(D.8134)
	LD	C,A
	LD	A,(X.8132)
	ADD	A,C
	RRA
	CALL	C5853
	CALL	C5869
	LD	(HL),A
	INC	HL
	DJNZ	J58E6
	RET

I5914:	LD	HL,I80F0
	LD	B,04H	; 4 
J5919:	LD	A,(HL)
	CALL	C5869
	LD	(HL),A
	INC	HL
	DJNZ	J5919
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5922:	LD	HL,I8300
	LD	(D.8120),HL
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5928:	LD	HL,(X.80D6)

;	  Subroutine send string to printer
;	     Inputs  ________________________
;	     Outputs ________________________

C592B:	LD	A,(HL)
	OR	A
	RET	Z
	CALL	C5B51			; send byte to printer
	INC	HL
	JR	C592B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________


C5934:	XOR	A
	LD	(D.80C8),A
	LD	A,6
	CALL	C5B78			; read keyboard row 6
	LD	B,A
	BIT	1,A			; CTRL pressed ?
	JR	NZ,C5962		; nope, quit
	LD	A,B
	AND	01H
	LD	(D.80E5),A		; SHIFT status
	LD	A,(D.8001)
	BIT	6,A			; vertical retract interrupt enabled ?
	JR	Z,C5962			; nope, quit
	LD	A,2
	OUT	(99H),A
	LD	A,128+15
	OUT	(99H),A			; select VDP status register 2
	EX	(SP),HL
	EX	(SP),HL
	IN	A,(99H)			; read VDP status register
	LD	(D.80C9),A
	BIT	0,A			; command executing ?
	JR	Z,J596C			; nope,

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________


C5962:	LD	A,(X.800F)
	OUT	(99H),A
	LD	A,128+15
	OUT	(99H),A			; select VDP status register
	RET

J596C:	CALL	C5962
	CALL	C5A07
	CALL	C5A61
	LD	A,(D.80A0)
	CP	06H			; screenmode 0, 3, 1, 2 or 4 ?
	RET	C			; yep, quit
	LD	A,(D.8002)
	AND	20H
	RET	Z
	LD	A,(D.800D)
	LD	B,A
	AND	0F0H			; ON
	JR	Z,J59AE
	RRCA
	RRCA
	RRCA
	RRCA
	LD	H,A
	LD	A,B
	AND	0FH	; 15 
	SUB	H
	JR	NC,J59AE
J5994:	CALL	C59C0
	LD	A,0F0H

J5999:	OUT	(99H),A
	LD	A,128+13
	OUT	(99H),A			; vdp blink register
	LD	(D.80C8),A
	LD	A,(D.8009)
	AND	0F3H			; IL = 0, EO = 0
	OUT	(99H),A
	LD	A,128+9
	OUT	(99H),A			; interlace off
	RET

J59AE:	LD	A,(D.8009)
	AND	04H			; EO = 0 ?
	JR	Z,J59BC			; yep,
	LD	A,(D.80C9)
	AND	04H
	JR	Z,J5994
J59BC:	LD	A,0FH
	JR	J5999

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C59C0:	LD	A,(D.80A0)
	CP	08H			; screenmode 7 or 8 ?
	JR	C,J59CC			; nope,
	XOR	A
	LD	(D.80AF),A
	RET

J59CC:	LD	HL,X.0000
	LD	(D.80A5),HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C59D3:	LD	A,(D$8060)
	OUT	(99H),A
	LD	A,128+14
	OUT	(99H),A			; write adress latch register
	LD	A,(D.8062)
	OUT	(99H),A
	LD	A,(D$8061)
	OUT	(99H),A
	LD	A,(D.80C8)
	OR	A
	RET	Z
	LD	A,(D.800D)
	OUT	(99H),A
	LD	A,128+13
	OUT	(99H),A			; vdp blink register
	LD	A,(D.8002)
	OUT	(99H),A
	LD	A,128+2
	OUT	(99H),A			; vdp pattern name table base address
	LD	A,(D.8009)
	OUT	(99H),A
	LD	A,128+9
	OUT	(99H),A			; vdp register 9
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5A07:	LD	A,(X.8000)
	LD	C,A
	LD	A,(D.8001)
	LD	B,A
	AND	18H			; M1 M2
	CP	10H			; TEXT40 or TEXT80 ?
	JR	Z,J5A26			; yep,
	CP	08H			; screenmode 3 ?
	JR	Z,J5A2F			; yep,
	LD	A,C
	AND	0EH			; M5 M4 M3
	RRCA
	ADD	A,3
	CP	10			; screenmode 8 ?
	JR	NZ,J5A31		; nope,
	DEC	A			; screenmode 8 = 9
	JR	J5A31

J5A26:	LD	A,C
	AND	04H
	RRCA
	RRCA
	LD	(D.80A0),A		; TEXT40 = 0, TEXT80 = 1
	RET

J5A2F:	LD	A,2			; screenmode 3 = 2
J5A31:	LD	(D.80A0),A
	LD	A,B
	AND	03H			; 8*8 sprites without magnification ?
	JR	Z,J5A45			; yep,
	CP	03H			; 16*16 sprites with magnification ?
	JR	Z,J5A41			; yep,
	LD	A,0F0H
	JR	J5A47

J5A41:	LD	A,0E0H
	JR	J5A47

J5A45:	LD	A,0F8H
J5A47:	LD	(D.80A2),A
	LD	A,B
	RRCA
	AND	01H
	LD	(D.80A3),A		; sprite size
	LD	A,(D$8008)
	LD	B,A
	AND	20H			; transparent mode
	LD	(D.80C0),A
	LD	A,B
	AND	02H			; sprite disable
	LD	(D.80A4),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5A61:	LD	B,02H	; 2 
	LD	A,(D.8002)
	LD	H,A
	LD	L,00H
	CALL	C5AED
	LD	(D.80A5),HL
	LD	(D.80AF),A
	LD	B,06H	; 6 
	LD	A,(D$800A)
	LD	H,A
	LD	A,(D$8003)
	LD	L,A
	CALL	C5AED
	LD	(D.80A7),HL
	LD	(X.80B0),A
	LD	B,03H	; 3 
	LD	A,(D$8004)
	LD	H,A
	LD	L,00H
	CALL	C5AED
	LD	(D.80A9),HL
	LD	(D.80B1),A
	LD	B,07H	; 7 
	LD	A,(D$800B)
	LD	H,A
	LD	A,(D$8005)
	LD	L,A
	CALL	C5AED
	LD	(D.80AB),HL
	LD	(D.80B2),A
	LD	B,03H	; 3 
	LD	A,(D$8006)
	LD	H,A
	LD	L,00H
	CALL	C5AED
	LD	(D.80AD),HL
	LD	(X.80B3),A
	LD	A,(D.80A0)		; screenmode
	LD	HL,I5AF6
	LD	DE,2
	CALL	C5BB0
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	A,D
	OR	E
	JR	Z,J5AD9
	LD	HL,D.80A5
	LD	B,08H	; 8 
J5AD2:	LD	A,(DE)
	AND	(HL)
	LD	(HL),A
	INC	HL
	INC	DE
	DJNZ	J5AD2
J5AD9:	LD	A,(D.80A0)
	BIT	3,A			; screenmode 7 or 8 ?
	RET	Z			; nope, quit
	LD	HL,(D.80A5)
	XOR	A
	SLA	H
	RLA
	LD	(D.80AF),A
	LD	(D.80A5),HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5AED:	XOR	A
J5AEE:	SLA	L
	RL	H
	DJNZ	J5AEE
	RLA
	RET

I5AF6:	DEFB	0,0
	LD	A,(BC)
	LD	E,E
	DEFB	0,0,0,0
	LD	(DE),A
	LD	E,E
	LD	(DE),A
	LD	E,E
	LD	A,(DE)
	LD	E,E
	LD	A,(DE)
	LD	E,E
	LD	A,(DE)
	LD	E,E
J5B08:	LD	A,(DE)
	LD	E,E
	NOP
	RET	P
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	NOP
	RET	PO
	NOP
	RET	PO
	RST	38H
	RST	38H
	NOP
	ADD	A,B
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	NOP
	DEFB	0FEH

;	  Subroutine read byte from VRAM
;	     Inputs  AHL = VRAM address
;	     Outputs ________________________

C5B22:	PUSH	BC
	LD	B,H
	RL	B
	RLA
	RL	B
	RLA
	AND	07H
	OUT	(99H),A
	LD	A,128+14
	OUT	(99H),A
	LD	A,L
	OUT	(99H),A
	LD	A,H
	AND	3FH
	OUT	(99H),A			; set VRAM address latch for reading
	EX	(SP),HL
	EX	(SP),HL
	IN	A,(98H)
	POP	BC
	RET

;	  Subroutine read block from VRAM
;	     Inputs  AHL = VRAM address, BC = size
;	     Outputs ________________________

C5B40:	CALL	C5B22			; read byte from VRAM
	DEC	BC
	LD	(DE),A
J5B45:	INC	DE
	EX	(SP),HL
	EX	(SP),HL
	IN	A,(98H)
	LD	(DE),A
	DEC	BC
	LD	A,C
	OR	B
	JR	NZ,J5B45
	RET

;	  Subroutine send byte to printer
;	     Inputs  ________________________
;	     Outputs ________________________

C5B51:	PUSH	AF
	PUSH	BC
	LD	B,4
J5B55:	CALL	C5B8B			; CTRL-STOP pressed ?
	JR	Z,J5B6C			; yep,
	CALL	C5B73			; get printer status
	JR	C,J5B55			; busy, wait
	DJNZ	J5B55
	POP	BC
	POP	AF
	OUT	(91H),A
	XOR	A
	OUT	(90H),A
	INC	A
	OUT	(90H),A			; strobe
	RET

J5B6C:	LD	SP,I87F5
	LD	HL,I5236
	JP	(HL)

;	  Subroutine get printer status
;	     Inputs  ________________________
;	     Outputs ________________________

C5B73:	IN	A,(90H)
	RRCA
	RRCA
	RET

;	  Subroutine read keyboard row
;	     Inputs  ________________________
;	     Outputs ________________________


C5B78:	PUSH	BC
	LD	B,A
	IN	A,(0AAH)
	PUSH	AF
	AND	0F0H
	OR	B
	OUT	(0AAH),A
	IN	A,(0A9H)
	LD	B,A
	POP	AF
	OUT	(0AAH),A
	LD	A,B
	POP	BC
	RET

;	  Subroutine CTRL-STOP pressed ?
;	     Inputs  ________________________
;	     Outputs ________________________

C5B8B:	LD	A,6
	CALL	C5B78			; read keyboard row 6
	BIT	1,A			; CTRL pressed ?
	RET	NZ			; nope, quit
	LD	A,7
	CALL	C5B78			; read keyboard row 7
	BIT	4,A			; STOP pressed ?
	RET	NZ			; nope, quit
	XOR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________


C5B9D:	LD	A,7
	CALL	C5B78			; read keyboard row 7
	BIT	4,A			; STOP pressed ?
	JR	NZ,C5B9D		; nope,wait
J5BA6:	LD	A,7
	CALL	C5B78			; read keyboard row 7
	BIT	4,A			; STOP pressed ?
	JR	Z,J5BA6			; yep, wait
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5BB0:	PUSH	BC
	LD	B,A
	INC	B
J5BB3:	ADD	HL,DE
	DJNZ	J5BB3
	OR	A
	SBC	HL,DE
	POP	BC
	RET

;	  Subroutine save PSG volume and silence
;	     Inputs  ________________________
;	     Outputs ________________________

C5BBB:	LD	HL,I80E0
	IN	A,(0A0H)
	LD	(D.813F),A
	LD	A,8
	LD	B,3
	LD	E,0
J5BC9:	PUSH	AF
	CALL	C5BEC			; read PSG register
	LD	(HL),A
	POP	AF
	CALL	C5BF1			; write PSG register
	INC	A
	INC	HL
	DJNZ	J5BC9
	RET

;	  Subroutine restore PSG volume
;	     Inputs  ________________________
;	     Outputs ________________________

C5BD7:	LD	HL,I80E0
	LD	B,3
	LD	A,8
J5BDE:	LD	E,(HL)
	CALL	C5BF1
	INC	HL
	INC	A
	DJNZ	J5BDE
	LD	A,(D.813F)
	OUT	(0A0H),A
	RET

;	  Subroutine read PSG register
;	     Inputs  ________________________
;	     Outputs ________________________

C5BEC:	OUT	(0A0H),A
	IN	A,(0A2H)
	RET

;	  Subroutine write PSG register
;	     Inputs  ________________________
;	     Outputs ________________________

C5BF1:	PUSH	AF
	OUT	(0A0H),A
	LD	A,E
	OUT	(0A1H),A
	POP	AF
	RET

I5BF9:	LD	A,(D.80A4)
	OR	A			; sprites disabled ?
	RET	NZ			; yep, quit
	LD	A,(X.80B8)
	LD	(D.80CD),A
	CALL	C5C1D
	LD	A,(D.80B7)
	OR	A
	RET	Z
	LD	B,03H	; 3 
J5C0E:	PUSH	BC
	LD	A,(D.80CD)
	INC	A
	LD	(D.80CD),A
	CALL	C5C1D
	POP	BC
	DJNZ	J5C0E
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5C1D:	XOR	A
	LD	(D.80B7),A
	LD	HL,I8200
	LD	(D.80CB),HL
	LD	B,20H	; " "
J5C29:	LD	HL,(D.80CB)
	LD	A,(HL)
	CP	0D0H
	RET	Z
	INC	A
	LD	D,A
	LD	A,(D.80B9)
	SUB	D
	LD	(D.80B6),A
	LD	D,A
	LD	A,(D.80A2)
	AND	D
	CALL	Z,C5C50
	OR	A
	RET	Z
	LD	HL,(D.80CB)
	INC	HL
	INC	HL
	INC	HL
	INC	HL
	LD	(D.80CB),HL
	DJNZ	J5C29
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5C50:	LD	A,(D.80B7)
	INC	A
	CP	05H	; 5 
	RET	Z
	LD	(D.80B7),A
	INC	HL
	LD	A,(HL)
	LD	(D.80B5),A
	INC	HL
	LD	A,(HL)
	LD	(D.80B4),A
	INC	HL
	LD	A,(HL)
	LD	(D.80CA),A
	LD	D,A
	AND	0FH	; 15 
	JR	NZ,J5C77
	LD	A,(D.80C0)
	OR	A			; color 0 transparent ?
	JR	NZ,J5C77		; nope,
	LD	A,0FFH
	RET

J5C77:	BIT	7,D
	JR	Z,J5C8D
	LD	A,(D.80B5)
	OR	A
	SUB	20H	; " "
	LD	(D.80B5),A
	JR	NC,J5C8D
	LD	A,(D.80CD)
	OR	A
	CP	0E0H
	RET	NC
J5C8D:	LD	A,(D.80B5)
	LD	D,A
	LD	A,(D.80CD)
	SUB	D
	LD	(D.80B5),A
	LD	HL,D.80A2
	AND	(HL)
	RET	NZ
	LD	A,(D.80A3)
	OR	A			; sprite size 8x8 ?
	JP	Z,J5CAC			; yep,
	LD	A,(D.80B4)
	AND	0FCH
	LD	(D.80B4),A
J5CAC:	LD	HL,(D.80AD)
	LD	A,(D.80B4)
	LD	DE,8
	CALL	C5BB0
	LD	A,(D.8001)
	AND	010H			; sprite magnified ?
	JR	Z,J5CCF			; nope,
	LD	A,(D.80B6)
	SRA	A
	LD	(D.80B6),A
	LD	A,(D.80B5)
	SRA	A
	LD	(D.80B5),A
J5CCF:	LD	A,(D.80B6)
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	LD	A,(D.80B5)
	AND	08H	; 8 
	JR	Z,J5CE1
	LD	DE,C.0010
	ADD	HL,DE
J5CE1:	LD	A,(X.80B3)
	CALL	C5B22			; read byte from VRAM
	LD	D,A
	PUSH	BC
	LD	A,(D.80B5)
	LD	B,A
	INC	B
	LD	A,01H	; 1 
J5CF0:	RRCA
	DJNZ	J5CF0
	POP	BC
	AND	D
	JR	NZ,J5CFA
	LD	A,0FFH
	RET

J5CFA:	LD	A,(D.80CD)
	AND	03H	; 3 
	LD	E,A
	LD	D,00H
	LD	HL,I80F0
	ADD	HL,DE
	LD	A,(D.80CA)
	AND	0FH	; 15 
	CALL	C5F95
	CALL	C5869
	LD	(HL),A
	XOR	A
	RET

I5D14:	LD	A,(D.80A4)
	OR	A			; sprites disabled ?
	RET	NZ			; yep, quit
	LD	A,(X.80B8)
	LD	(D.80CD),A
	CALL	C5D38
	LD	A,(D.80CF)
	OR	A
	RET	Z
	LD	B,03H	; 3 
J5D29:	PUSH	BC
	LD	A,(D.80CD)
	INC	A
	LD	(D.80CD),A
	CALL	C5D38
	POP	BC
	DJNZ	J5D29
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5D38:	XOR	A
	LD	(D.80B7),A
	LD	(D.80CF),A
	LD	(D.80CE),A
	LD	(D.80DA),A
	LD	(X.80DB),A
	LD	HL,I8200
	LD	(D.80CB),HL
	LD	B,20H	; " "
J5D50:	LD	HL,(D.80CB)
	LD	A,(HL)
	CP	0D8H
	JR	Z,J5D7C
	INC	A
	LD	D,A
	LD	A,(D.80B9)
	SUB	D
	LD	(D.80B6),A
	LD	D,A
	LD	A,(D.80A2)
	AND	D
	CALL	Z,C5DA2
	LD	HL,(D.80CB)
	INC	HL
	INC	HL
	INC	HL
	INC	HL
	LD	(D.80CB),HL
	LD	A,(X.80DB)
	INC	A
	LD	(X.80DB),A
	DJNZ	J5D50
J5D7C:	LD	A,(D.80DA)
	OR	A
	RET	Z
	LD	A,(D.80CD)
	AND	03H	; 3 
	LD	E,A
	LD	D,00H
	LD	HL,I80F0
	ADD	HL,DE
	LD	A,(D.80CE)
	AND	0FH	; 15 
	JR	NZ,J5D9A
	LD	A,(D.80C0)
	OR	A			; color 0 transparent ?
	RET	Z			; yep, quit
	XOR	A
J5D9A:	CALL	C5F95
	CALL	C5869
	LD	(HL),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5DA2:	LD	A,(D.80B7)
	INC	A
	CP	09H	; 9 
	RET	Z
	LD	(D.80B7),A
	INC	HL
	LD	A,(HL)
	LD	(D.80B5),A
	INC	HL
	LD	A,(HL)
	LD	(D.80B4),A
	LD	HL,(D.80AB)
	DEC	H
	DEC	H
	LD	DE,16
	LD	A,(X.80DB)
	CALL	C5BB0
	LD	A,(D.8001)
	AND	01H			; sprite magnified ?
	LD	A,(D.80B6)
	JR	Z,J5DD0			; nope,
	SRA	A
J5DD0:	LD	E,A
	LD	D,00H
	ADD	HL,DE
	LD	A,(D.80B2)
	CALL	C5B22			; read byte from VRAM
	LD	(D.80CA),A
	BIT	6,A
	JR	NZ,J5DED
	LD	A,(D.80DA)
	OR	A
	JP	NZ,J5E84
	LD	A,01H	; 1 
	LD	(D.80CF),A
J5DED:	LD	A,(D.80CF)
	OR	A
	RET	Z
	LD	A,(D.80CA)
	BIT	7,A
	JR	Z,J5E0B
	LD	A,(D.80B5)
	OR	A
	SUB	20H	; " "
	LD	(D.80B5),A
	JR	NC,J5E0B
;
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5E04:	LD	A,(D.80CD)
	OR	A
	CP	0E0H
	RET	NC
J5E0B:	LD	A,(D.80B5)
	LD	D,A
	LD	A,(D.80CD)
	SUB	D
	LD	(D.80B5),A
	LD	D,A
	LD	A,(D.80A2)
	AND	D
	RET	NZ
	LD	A,(D.80A3)
	OR	A			; sprite size 8x8 ?
	JR	Z,J5E2A			; yep,
	LD	A,(D.80B4)
	AND	0FCH
	LD	(D.80B4),A
J5E2A:	LD	HL,(D.80AD)
	LD	A,(D.80B4)
	LD	DE,8
	CALL	C5BB0
	LD	A,(D.8001)
	AND	01H			; sprites magnified ?
	JR	Z,J5E4D			; nope,
	LD	A,(D.80B6)
	SRA	A
	LD	(D.80B6),A
	LD	A,(D.80B5)
	SRA	A
	LD	(D.80B5),A
J5E4D:	LD	A,(D.80B6)
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	LD	A,(D.80B5)
	AND	08H	; 8 
	JR	Z,J5E5F
	LD	DE,C.0010
	ADD	HL,DE
J5E5F:	LD	A,(X.80B3)
	CALL	C5B22			; read byte from VRAM
	LD	D,A
	PUSH	BC
	LD	A,(D.80B5)
	LD	B,A
	INC	B
	LD	A,01H	; 1 
J5E6E:	RRCA
	DJNZ	J5E6E
	POP	BC
	AND	D
	RET	Z
	LD	HL,D.80CE
	LD	A,(D.80CA)
	AND	0FH	; 15 
	OR	(HL)
	LD	(HL),A
	LD	A,0FFH
	LD	(D.80DA),A
	RET

J5E84:	POP	HL
	JP	J5D7C

I5E88:	LD	HL,I80F0
	LD	A,(HL)
	LD	DE,I8110
	CALL	C5ED3
	INC	HL
	LD	A,(HL)
	LD	DE,I8114
	CALL	C5ED3
	INC	HL
	LD	A,(HL)
	LD	DE,I8118
	CALL	C5ED3
	INC	HL
	LD	A,(HL)
I5EA4:	LD	DE,I811C
	CALL	C5ED3
	LD	IX,I8110
	LD	B,04H	; 4 
J5EB0:	LD	A,(IX+8)
	RRCA
	RRCA
	RRCA
	RRCA
	LD	C,A
	LD	A,(IX+12)
	OR	C
	CALL	C5B51			; send byte to printer
	LD	A,(IX+0)
	RRCA
	RRCA
	RRCA
	RRCA
	LD	C,A
	LD	A,(IX+4)
	OR	C
	CALL	C5B51			; send byte to printer
	INC	IX
	DJNZ	J5EB0
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5ED3:	PUSH	HL
	PUSH	DE
	PUSH	AF
	LD	A,(D.80E5)
	OR	A
	JR	NZ,J5EE3
	POP	AF
	LD	H,A
	LD	A,18H
	SUB	H
	JR	J5EE4

J5EE3:	POP	AF
J5EE4:	LD	HL,I6064
	LD	DE,4
	CALL	C5BB0
	POP	DE
	LD	BC,4
	LDIR
	POP	HL
	RET

I5EF5:	LD	HL,I80F0
	LD	A,(HL)
	LD	DE,I8110
	CALL	C5F6E
	INC	HL
	LD	A,(HL)
	LD	DE,I8114
	CALL	C5F6E
	INC	HL
	LD	A,(HL)
	LD	DE,I8118
	CALL	C5F6E
	INC	HL
	LD	A,(HL)
	LD	DE,I811C
	CALL	C5F6E
	LD	IX,I8110
	LD	HL,(D.8120)
	LD	B,04H	; 4 
J5F20:	LD	A,(IX+8)
	RLCA
	RLCA
	RLCA
	LD	C,A
	LD	A,(IX+12)
	OR	C
	CALL	C5B51			; send byte to printer
	LD	A,(IX+0)
	RLCA
	RLCA
	RLCA
	LD	C,A
	LD	A,(IX+4)
	OR	C
	LD	(HL),A
	INC	HL
	INC	IX
	BIT	0,B
	CALL	NZ,C5F90
	DJNZ	J5F20
	LD	(D.8120),HL
	LD	A,(D.80B9)
	INC	A
	LD	C,A
	LD	A,(D.80C3)
	CP	C
	RET	NZ
	CALL	C5922
	LD	HL,I8300
	LD	A,(D.8122)
	LD	B,A
J5F5B:	PUSH	BC
	LD	B,04H	; 4 
J5F5E:	LD	A,(HL)
	CALL	C5B51			; send byte to printer
	INC	HL
	BIT	0,B
	CALL	NZ,C5F90
	DJNZ	J5F5E
	POP	BC
	DJNZ	J5F5B
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5F6E:	PUSH	HL
	PUSH	DE
	PUSH	AF
	LD	A,(D.80E5)
	OR	A
	JR	NZ,J5F7E
	POP	AF
	LD	H,A
	LD	A,18H
	SUB	H
	JR	J5F7F

J5F7E:	POP	AF
J5F7F:	LD	HL,D.6000
	LD	DE,4
	CALL	C5BB0
	POP	DE
	LD	BC,4
	LDIR
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5F90:	XOR	A
	CALL	C5B51			; send byte to printer
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5F95:	PUSH	DE
	LD	D,A
	LD	A,(D.80A0)
	CP	07H			; screenmode 6 ?
	LD	A,D
	POP	DE
	JR	Z,J5FA8			; yep,
	PUSH	HL
	LD	HL,I8100
	LD	L,A
	LD	A,(HL)
	POP	HL
	RET

J5FA8:	PUSH	BC
	PUSH	DE
	PUSH	AF
	RRCA
	RRCA
	AND	03H	; 3 
	LD	DE,X.8132
	CALL	C5FD9
	POP	AF
	AND	03H	; 3 
	LD	DE,D.8134
	CALL	C5FD9
	LD	A,(D.8135)
	LD	C,A
	LD	A,(D.8133)
	OR	A
	ADD	A,C
	RRA
	LD	D,A
	LD	A,(D.8134)
	LD	C,A
	LD	A,(X.8132)
	OR	A
	ADD	A,C
	RRA
	CALL	C5853
	POP	DE
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5FD9:	OR	A
	JR	NZ,C5FE6
	LD	A,(D.813A)
	LD	(DE),A
	INC	DE
	LD	A,(D.813B)
	LD	(DE),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C5FE6:	OR	A
	JR	NZ,J5FED
	LD	(DE),A
	INC	DE
	LD	(DE),A
	RET

J5FED:	PUSH	HL
	PUSH	DE
	RLCA
	LD	HL,I8040
	LD	E,A
	LD	D,00H
	ADD	HL,DE
	POP	DE
	LD	A,(HL)
	LD	(DE),A
	INC	HL
	INC	DE
	LD	A,(HL)
	LD	(DE),A
	POP	HL
	RET

D.6000:	RLCA
	RLCA
	RLCA
	RLCA
	NOP
	LD	B,07H	; 7 
	RLCA
	NOP
	RLCA
	DEC	B
	DEC	B
	LD	(BC),A
	DEC	B
	DEC	B
	INC	BC
	LD	(BC),A
	DEC	B
	LD	(BC),A
	INC	B
	NOP
	INC	BC
	INC	BC
	DEC	B
	DEC	B
	DEC	B
	DEC	B
	DEC	B
	NOP
	RLCA
	RLCA
	NOP
	LD	(BC),A
	INC	B
	DEC	B
	LD	(BC),A
	NOP
	DEC	B
	DEC	B
	DEC	B
	LD	BC,I.0402
	LD	(BC),A
	NOP
	INC	BC
	INC	BC
	LD	(BC),A
	NOP
	INC	BC
	LD	B,00H
	NOP
	INC	BC
	INC	BC
	DEFB	0,0
	LD	BC,I.0300
	LD	BC,I.0401
	INC	B
	NOP
	LD	BC,I.0402
	NOP
	LD	BC,I.0003
	LD	(BC),A
	LD	(BC),A
	LD	(BC),A
	LD	(BC),A
	DEFB	0,0
	INC	BC
	DEFB	0,0
	LD	(BC),A
	LD	(BC),A
	LD	(BC),A
	NOP
	LD	BC,J.0002
	NOP
	LD	(BC),A
	LD	BC,X.0000
	NOP
	LD	(BC),A
	DEFB	0,0,0,0,0
I6064:	RRCA
	RRCA
	RRCA
	RRCA
	RRCA
	ADD	HL,BC
	ADD	HL,BC
	RRCA
	RRCA
	INC	BC
	INC	BC
	INC	BC
	INC	BC
	INC	BC
	INC	C
	INC	C
	RLCA
	RLCA
	RLCA
	NOP
	DEC	B
	LD	(BC),A
	DEC	B
	RLCA
	NOP
	DEC	B
	LD	(BC),A
	RLCA
	DEC	B
	LD	(BC),A
	DEC	B
	NOP
	LD	(BC),A
	INC	B
	INC	B
	DEC	B
	NOP
	INC	BC
	INC	BC
	LD	(BC),A
	NOP
	LD	A,(BC)
	INC	B
	LD	A,(BC)
	LD	BC,I.0402
	LD	(BC),A
	NOP
	INC	BC
	LD	B,00H
	NOP
	INC	BC
	INC	BC
	NOP
	LD	BC,I.0401
	INC	B
	NOP
	LD	BC,I.0300
	NOP
	LD	(BC),A
	INC	BC
	DEFB	0,0
	LD	BC,I.0402
	LD	(BC),A
	NOP
	LD	(BC),A
	LD	(BC),A
	DEFB	0,0
	INC	BC
	DEFB	0,0
	LD	(BC),A
	LD	BC,X.0000
	LD	BC,J.0002
	NOP
	LD	(BC),A
	NOP
	LD	(BC),A
	NOP
	LD	(BC),A
	DEFB	0,0,0,0,0,0
I60C8:	DEFB	0,0
	INC	BC
	INC	BC
	DEFB	0,0
	INC	BC
	INC	BC
	NOP
	LD	BC,I.0403
	NOP
	LD	BC,I.0403
	LD	B,06H	; 6 
	INC	C
	INC	C
	LD	B,06H	; 6 
	INC	C
	INC	C
	RLCA
	RLCA
	DEC	C
	LD	C,07H	; 7 
	RLCA
	DEC	C
	LD	C,00H
	NOP
	INC	BC
	INC	BC
	DEFB	0,0
	INC	BC
	INC	BC
	NOP
	LD	BC,I.0403
	NOP
	LD	BC,I.0403
	LD	B,06H	; 6 
	INC	C
	INC	C
	LD	B,06H	; 6 
	INC	C
	INC	C
	RLCA
	RLCA
	DEC	C
	LD	C,07H	; 7 
	RLCA
	DEC	C
	LD	C,01H	; 1 
I6109:	LD	BC,I$0504
J610B	EQU	$-1
	LD	BC,I.0401
	DEC	B
	LD	(BC),A
	LD	(BC),A
	DEC	B
	DEC	B
	LD	(BC),A
	LD	(BC),A
	DEC	B
	DEC	B
	RLCA
	EX	AF,AF'
	DEC	C
	LD	C,07H	; 7 
	EX	AF,AF'
	DEC	C
	LD	C,08H	; 8 
	EX	AF,AF'
	LD	C,0FH	; 15 
	EX	AF,AF'
	EX	AF,AF'
	LD	C,0FH	; 15 
	LD	BC,I.0401
	DEC	B
	LD	BC,I.0401
	DEC	B
	LD	(BC),A
	LD	(BC),A
	DEC	B
	DEC	B
	LD	(BC),A
	LD	(BC),A
	DEC	B
	DEC	B
	RLCA
	EX	AF,AF'
	DEC	C
	LD	C,07H	; 7 
	EX	AF,AF'
	DEC	C
	LD	C,08H	; 8 
	EX	AF,AF'
	LD	C,0FH	; 15 
	EX	AF,AF'
	EX	AF,AF'
	LD	C,0FH	; 15 
	ADD	HL,BC
	ADD	HL,BC
	RRCA
	DJNZ	J6156
	ADD	HL,BC
	RRCA
	DJNZ	J615B
	LD	A,(BC)
	DJNZ	J6165
	LD	A,(BC)
	LD	A,(BC)
J6156:	DJNZ	J6169
	LD	(DE),A
	INC	DE
	DEC	D
J615B:	LD	D,12H	; 18 
	INC	DE
	DEC	D
	LD	D,13H	; 19 
	INC	D
	LD	D,17H
	INC	DE
J6165:	INC	D
	LD	D,17H
	ADD	HL,BC
J6169:	ADD	HL,BC
	RRCA
	DJNZ	J6176
	ADD	HL,BC
	RRCA
	DJNZ	J617B
	LD	A,(BC)
	DJNZ	J6185
	LD	A,(BC)
	LD	A,(BC)
J6176:	DJNZ	J6189
	LD	(DE),A
	INC	DE
	INC	D
J617B:	LD	D,12H	; 18 
	INC	DE
	INC	D
	LD	D,13H	; 19 
	INC	D
	LD	D,17H
	INC	DE
J6185:	INC	D
	LD	D,17H
	LD	A,(BC)
J6189:	DEC	BC
	DJNZ	J619D
	LD	A,(BC)
	DEC	BC
	DJNZ	J61A1
	DEC	BC
	INC	C
	LD	DE,I.0B12
	INC	C
	LD	DE,I.1312
	INC	D
	LD	D,17H
	INC	DE
J619D:	INC	D
	RLA
	RLA
	DEC	D
J61A1:	DEC	D
	RLA
	RLA
	DEC	D
	DEC	D
	JR	J61C0

?61A8:	LD	A,(BC)
	DEC	BC
	DJNZ	J61BD
	LD	A,(BC)
	DEC	BC
	DJNZ	J61C1
	DEC	BC
	INC	C
	LD	DE,I.0B12
	INC	C
	LD	DE,I.1312
	INC	D
	RLA
	RLA
	INC	DE
J61BD:	INC	D
	RLA
	RLA
J61C0:	DEC	D
J61C1:	DEC	D
	JR	J61DC

?61C4:	DEC	D
	DEC	D
	JR	J61E0			; clear keyboard input buffer

J61C8:	LD	IY,0
	LD	IX,M406F+3
	CALL	CALSLT

;	  Subroutine beep
;	     Inputs  ________________________
;	     Outputs ________________________

C61D3:	PUSH	IX
	CALL	BEEP
	POP	IX
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C61DB:	XOR	A
J61DC:	CALL	C$D900
	RET	NZ
J61E0:	JP	KILBUF

;	  Subroutine about to start european word processor
;	     Inputs  ________________________
;	     Outputs ________________________

J61E3:	LD	HL,I621F
J61E6:	LD	A,(HL)
	OR	A
	JR	Z,J61F0
	CALL	CHPUT
	INC	HL
	JR	J61E6

J61F0:	CALL	QINLIN
	JR	NC,J61F8		; input not stopped, continue
J61F5:	POP	HL
	XOR	A
	RET

J61F8:	INC	HL
	LD	A,(HL)
	AND	0DFH
	CP	"Y"
	JR	NZ,J61F5		; not 'Y', quit
	INC	HL
	LD	A,(HL)
	OR	A
	JR	NZ,J61F5		; more than just 'Y', quit
	LD	SP,(HIMEM)
	LD	A,0FCH
	OUT	(0A8H),A		; select primairy slot 3 on page 3,2 and 1
	LD	A,(D.7FFF)
	AND	0FCH
	OR	02H			; select segment 2 ??
	LD	(D.7FFF),A
	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	JP	X.8000			; start word processor

I621F:	DEFB	13,10
	DEFB	"Are you sure (Y/N) "
	DEFB	0

;	  Subroutine about to start japanese word processor
;	     Inputs  ________________________
;	     Outputs ________________________

J6235:	LD	HL,I621F
J6238:	LD	A,(HL)
	OR	A
	JR	Z,J6242
	CALL	CHPUT
	INC	HL
	JR	J6238

J6242:	CALL	QINLIN
	JR	NC,J624A
J6247:	POP	HL
	XOR	A
	RET

J624A:	INC	HL
	LD	A,(HL)
	AND	0DFH
	CP	"Y"
	JR	NZ,J6247
	INC	HL
	LD	A,(HL)
	OR	A
	JR	NZ,J6247

J6257:	LD	HL,C.D8FB
	LD	B,10
J625C:	LD	(HL),0C9H
	INC	HL
	DJNZ	J625C
	LD	SP,(HIMEM)
	CALL	C61DB
	CALL	C7C68
	CALL	C7CBC
	CALL	C7E3C
	CALL	C7E24
J6274:	CALL	C7F14
	CALL	C7F56
	LD	SP,(HIMEM)
	CALL	C61DB
	XOR	A
	LD	(D.DAD9),A
	LD	HL,I$1600
	LD	BC,I8897
	CALL	C7C44
	JP	J63B1

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6291:	LD	C,0D0H
J6293:	CALL	C634E
	LD	B,0AH	; 10 
J6298:	CALL	C633D
	RET	C
	CP	C
J629D:	JR	NZ,J6293
J629F:	DJNZ	J6298
	LD	B,0BH	; 11 
	LD	HL,FILNM2
J62A6:	CALL	C633D
	RET	C
	LD	(HL),A
	INC	HL
	DJNZ	J62A6
	CALL	TAPIOF
	LD	A,(D.F86C)
	LD	B,A
	LD	A,(D$F877)
	CP	B
	JR	NZ,J62E4
	LD	B,06H	; 6 
	LD	HL,FILNAM
J62C0:	LD	A,(HL)
	CP	20H	; " "
	JR	NZ,J62CA
	INC	HL
	DJNZ	J62C0
	JR	J62DC

J62CA:	LD	BC,I.0007
	LD	HL,FILNM2
	LD	DE,FILNAM
J62D3:	LD	A,(DE)
	INC	DE
	CPI
	JR	NZ,J62E4
	JP	PE,J62D3
J62DC:	LD	HL,I62EC
	CALL	C62F4
	OR	A
	RET

J62E4:	LD	HL,I62F0
	CALL	C62F4
	JR	C6291

I62EC:	LD	L,C
	INC	C
	CP	(HL)
	RLCA
I62F0:	LD	BC,I$1707
	EX	AF,AF'
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C62F4:	LD	DE,I.D9CC
	LD	BC,4
	LDIR
	EX	DE,HL
	LD	(HL),67H	; "g"
	INC	HL
	LD	(HL),00H
	INC	HL
	LD	B,06H	; 6 
	LD	DE,FILNM2
J6308:	LD	A,(DE)
	PUSH	DE
	CALL	C7C50
	LD	(HL),E
	INC	HL
	LD	(HL),D
	INC	HL
	POP	DE
	INC	DE
	DJNZ	J6308
	LD	(HL),00H
	INC	HL
	LD	(HL),00H
	XOR	A
I631B:	LD	(D.DAD9),A
	LD	HL,I.0E0F
	LD	BC,I.D9CC
	CALL	C7C44
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6328:	CALL	C634E
I632B:	RET	C
J632C:	CALL	C633D
	RET	C
	LD	(HL),A
I6331:	LD	(HL),A
	INC	HL
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J632C
	CALL	TAPIOF
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C633D:	PUSH	HL
	PUSH	DE
	PUSH	BC
	CALL	TAPIN
	JP	NC,J639B
J6346:	CALL	TAPIOF
	POP	BC
	POP	DE
	POP	HL
	SCF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C634E:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	CALL	TAPION
	JP	NC,J639A
	POP	AF
	JR	J6346

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C635B:	LD	A,0D0H
	CALL	C6391
	RET	C
	LD	B,0AH	; 10 
J6363:	CALL	C63A6
	RET	C
	DJNZ	J6363
	LD	B,0BH	; 11 
	LD	HL,FILNAM
J636E:	LD	A,(HL)
	INC	HL
	CALL	C63A6
	RET	C
	DJNZ	J636E
	CALL	TAPOOF
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C637B:	XOR	A
	CALL	C6391
	RET	C
J6380:	LD	A,(HL)
	CALL	C63A6
	RET	C
	LD	A,(HL)
	INC	HL
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J6380
	CALL	TAPOOF
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6391:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	CALL	TAPOON
	JR	C,J639F
J639A:	POP	AF
J639B:	POP	BC
	POP	DE
	POP	HL
	RET

J639F:	POP	AF
	CALL	TAPOOF
	SCF
	JR	J639B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C63A6:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	CALL	TAPOUT
	JR	C,J639F
	JR	J639A

J63B1:	CALL	C7BD2
	DEC	A
	JP	Z,J63E4
	DEC	A
	JP	Z,J713E
	DEC	A
	JP	Z,J71C9
	DEC	A
	JP	Z,J7134
	DEC	A
	JR	Z,J63CA
	JP	J726C

J63CA:	CALL	C7EC0
	LD	A,0CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,2 and 0 (RAM), secunairy slot 3 on page 1 (FIRMWARE)
	JP	J6274

J63D5:	XOR	A
	LD	(D.D91C),A
	CALL	C7F38
	CALL	C7A37
	CALL	C7F32
	JR	J63FE

J63E4:	CALL	C7F56
	LD	HL,I$0013
	LD	DE,I4001
	LD	A,40H	; "@"
	CALL	C7F02
	CALL	C7A37
	CALL	C7A20
	CALL	C7A93
	CALL	C7F1A
J63FE:	LD	SP,(HIMEM)
	XOR	A
	LD	(D.DAD9),A
	CALL	C74D0			; get keyboard input #2
	JR	C,J63FE			; aborted,
	LD	HL,OLDKEY+6
	BIT	1,(HL)			; CTRL pressed ?
	JR	Z,J63FE			; yep,
	LD	HL,J63FE
	PUSH	HL
	CP	7FH			; DELETE ?
	JP	Z,J6641			; yep,
	CP	20H			; normal character ?
	JP	NC,J6580		; yep,
	CP	0DH			; RETURN ?
	JP	Z,J66BF			; yep,
	CP	1BH			; ESCAPE ?
	JP	Z,J64C9			; yep,
	CP	01H			; CTRL-A
	JP	Z,J648B			; yep,
	CP	18H			; SELECT ?
	JP	Z,J6274			; yep,
	PUSH	AF
	LD	A,(OLDKEY+6)
	LD	H,A			; keyboard row 6
	POP	AF
	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J6449		; nope,
	LD	A,H
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J6664			; yep,
	XOR	A
	CALL	C7690
	RET

J6449:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J6457		; nope,
	LD	A,H
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J666D			; yep,
	XOR	A
	JP	C7870

J6457:	CP	1EH			; CURSOR UP ?
	JR	NZ,J6465		; nope,
	LD	A,H
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J6672
	XOR	A
	JP	C752F

J6465:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J6473		; nope,
	LD	A,H
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J6677			; yep,
	XOR	A
	JP	C75E4

J6473:	CP	12H			; INSERT ?
	JP	Z,J667C			; yep,
	CP	08H			; BACKSPACE ?
	JP	Z,J66D5			; yep,
	CP	09H			; TAB ?
	JP	Z,J672B			; yep,
J6482:	CALL	C61DB
	CALL	C61D3			; beep
	JP	J63FE

J648B:	CALL	C74D0			; get keyboard input #2
	CP	0F0H
	JR	C,J649B
	JP	Z,J6D2A
	CP	0FAH
	JR	NC,J6482
	JR	J64A0

J649B:	SUB	40H	; "@"
	JP	J6580

J64A0:	LD	HL,I6562
J64A3:	DEC	A
	AND	0FH	; 15 
	CP	03H	; 3 
	JR	C,J64AF
	CP	06H	; 6 
	JP	Z,J6B47
J64AF:	SLA	A
	CALL	C7CEF
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	JP	(HL)

J64B9:	XOR	A
	LD	(D.DA8E),A
	CALL	C7C4A
	JP	C,J63FE
	CALL	C6589
	JP	J63FE

J64C9:	CALL	C74D0			; get keyboard input #2
	CP	1BH			; ESCAPE ?
	JR	Z,J6537			; yep,
	CP	"8"
	JP	Z,J7B7F
	CP	"7"
	JP	Z,J6C90
	CP	"-"
	JR	Z,J64B9
	CP	"9"
	JP	Z,J6DB9
	CP	"0"
	JP	Z,J703D
	CP	09H			; TAB ?
	JP	Z,J6756			; yep,
	CP	1EH			; CURSOR UP ?
	JP	Z,J6769			; yep,
	CP	12H			; INSERT ?
	JP	Z,J676F			; yep,
	CP	7FH			; DELETE ?
	JP	Z,J67B4			; yep,
	CP	"<"
	JR	NZ,J6528
	LD	A,(D.DB02)
	XOR	0FFH
	LD	(D.DB02),A
	OR	A
	LD	HL,X.0000
	JR	Z,J6511
	LD	HL,I$0554
J6511:	PUSH	AF
	LD	C,00H
	CALL	C7F6E
	POP	AF
	LD	HL,I$0555
	JR	Z,J6520
	LD	HL,X.0000
J6520:	LD	C,01H	; 1 
	CALL	C7F6E
	JP	J63FE

J6528:	CP	">"
	JR	NZ,J653D
	LD	A,(D.DA8F)
	XOR	0FFH
	LD	(D.DA8F),A
	JP	J6769

J6537:	CALL	C7C1A
	JP	J63E4

J653D:	CP	"?"
	JR	Z,J6551
	CP	31H	; "1"
	JP	C,J6482
	CP	37H	; "7"
	JP	NC,J6482
	LD	HL,I6574
	JP	J64A3

J6551:	CALL	C7E30
	JP	J6482

?6557:	LD	A,0CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,2 and 0 (RAM), secunairy slot 3 on page 1 (FIRMWARE)
	CALL	C7F14
	JP	J63E4

I6562:	INC	E
	LD	L,L
	INC	HL
	LD	L,L
	RST	08H
	LD	L,A
	BIT	5,L
	LD	L,B
	LD	(HL),B
	RET	NC
	LD	(HL),B
	LD	B,A
	LD	L,E
	ADC	A,D
	LD	L,E
	RST	08H
	LD	L,(HL)
I6574:	POP	DE
	LD	L,B
	LD	D,L
	LD	L,C
	LD	E,L
	LD	L,C
	OR	B
	LD	L,C
	RET	M
	LD	L,C
	CPL
	LD	L,H
J6580:	CALL	C7C50
	CALL	C6589
	JP	J63FE

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6589:	LD	HL,I.006B
	RST	20H
	JR	Z,J65BC
	INC	HL
	RST	20H
	JR	Z,J65A3
J6593:	LD	A,(D.D923)
	OR	A
	JR	Z,C65F8
	CALL	C668E
	JR	NC,C65F8
J659E:	CALL	C61D3			; beep
	SCF
	RET

J65A3:	LD	HL,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	BIT	6,(HL)
	JR	NZ,J6593
	INC	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	A,D
	CALL	C7CB6
	JR	NC,J65D5
	LD	DE,I$006C
	JR	J6593

J65BC:	LD	HL,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	BIT	6,(HL)
	JR	NZ,J6593
	INC	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	A,D
	CALL	C7CB0
	JR	NC,J65D5
	LD	DE,I.006B
	JR	J6593

J65D5:	LD	(HL),D
	DEC	HL
	LD	(HL),E
	DEC	HL
	LD	B,(HL)
	LD	A,(D.D905)
	OR	A
	RET	Z
	DEC	A
	ADD	A,A
	LD	H,A
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J65EA
	SLA	H
J65EA:	INC	H
	INC	H
	LD	A,(D.D906)
	LD	L,A
	ADD	A,A
	ADD	A,L
	LD	L,A
	LD	A,B
	CALL	C7AE5
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C65F8:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JR	NC,J659E
	LD	A,(D.D905)
I6601	EQU	$-2
	ADD	A,A
	LD	H,A
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J660D
J660B:	SLA	H
J660D:	INC	H
	INC	H
	LD	A,(D.D906)
	LD	L,A
	ADD	A,A
	ADD	A,L
	LD	L,A
	LD	BC,(D.D909)
	LD	A,(BC)
	PUSH	AF
	LD	A,(D.DA7D)
	OR	A
	JR	NZ,J6626
	POP	AF
	AND	3FH	; "?"
	PUSH	AF
J6626:	XOR	A
	LD	(D.DA7D),A
	POP	AF
	LD	(BC),A
	CALL	C7AE5
	LD	HL,(D.D909)
	INC	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	LD	A,(D.DAD8)
	INC	A
	RET	Z
	XOR	A
	CALL	C7690
I663E	EQU	$-1
	OR	A
	RET

J6641:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JP	NC,J6482
	LD	A,(D.D923)
	OR	A
	JR	Z,J6656
	CALL	C668E
	JP	C,J63FE
J6656:	LD	HL,(D.D909)
	LD	(HL),00H
	LD	DE,I.0125
	CALL	C65F8
	JP	J63FE

J6664:	CALL	C7E66
J6667:	CALL	NC,C7A93
	JP	J63FE

J666D:	CALL	C7E6C
	JR	J6667

J6672:	CALL	C7E72
	JR	J6667

J6677:	CALL	C7E78
	JR	J6667

J667C:	CALL	C6682
	JP	J63FE

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6682:	LD	A,(D.D923)
	XOR	0FFH
	LD	(D.D923),A
	CALL	C66BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C668E:	PUSH	DE
	LD	HL,(D.D909)
	CALL	C6FB1
	JR	C,J66BA
	RST	20H
	JR	Z,J66BA
	OR	A
	PUSH	DE
	EX	DE,HL
	SBC	HL,DE
	LD	B,H
	LD	C,L
	POP	DE
	LD	H,D
	LD	L,E
	DEC	HL
	INC	DE
	INC	DE
	PUSH	BC
	LDDR
	INC	HL
	LD	(HL),00H
	INC	HL
	LD	(HL),61H	; "a"
	INC	HL
	LD	(HL),00H
	POP	BC
	INC	BC
	INC	BC
	INC	BC
	CALL	C7A49
J66BA:	POP	DE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C66BC:	JP	J7E7E

J66BF:	CALL	C66C5
	JP	J63FE

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C66C5:	CALL	C7E84
	PUSH	AF
	XOR	A
	CALL	C75E4
	CALL	C7F1A
	POP	AF
	CALL	NZ,C7A93
	RET

J66D5:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JP	NC,J6482
	INC	HL
	LD	A,(HL)
	CP	25H	; "%"
	JR	NZ,J66EB
	INC	HL
	LD	A,(HL)
	CP	01H	; 1 
	JP	Z,J6482
J66EB:	LD	HL,(D.D909)
	LD	DE,X.8000
	LD	A,H
	CP	D
	JR	NZ,J66FA
	LD	A,L
	CP	E
	JP	Z,J6482
J66FA:	CALL	C6FB1
	OR	A
	EX	DE,HL
	SBC	HL,DE
	LD	B,H
	LD	C,L
	LD	HL,(D.D909)
	LD	D,H
	LD	E,L
	DEC	DE
I6709:	DEC	DE
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C670A:	DEC	DE
	LD	A,(DE)
	CP	0FCH
	JP	NC,J6482
	PUSH	BC
	LDIR
	EX	DE,HL
	LD	(HL),00H
	INC	HL
	LD	(HL),25H	; "%"
	INC	HL
	LD	(HL),01H	; 1 
	POP	BC
	INC	BC
	INC	BC
	INC	BC
	CALL	C7A49
	XOR	A
	CALL	C7870
	JP	J63FE

J672B:	LD	HL,(D.D909)
	LD	DE,I.CF35
	RST	20H
	JP	Z,J6482
	LD	A,(D.D923)
	OR	A
	JR	Z,J673E
	CALL	C668E
J673E:	XOR	A
	CALL	C7690
	LD	HL,I.D924
	LD	A,(D.D90D)
	OR	A
	JP	Z,J63FE
	CALL	C7CEF
	LD	A,(HL)
	OR	A
	JR	Z,J672B
	JP	J63FE

J6756:	LD	HL,I.D924
	LD	A,(D.D90D)
	CALL	C7CEF
	LD	A,(HL)
	XOR	0FFH
	LD	(HL),A
	CALL	C7C2C
	JP	J63FE

J6769:	CALL	C7E8A
	JP	J63E4

J676F:	LD	A,(D.D90D)
	OR	A
	JP	NZ,J6482
	CALL	C7A37
	LD	BC,I86F3
	LD	HL,I.0215
	CALL	C7C3E
J6782:	CALL	C61DB
	CALL	C74D0			; get keyboard input #2
	JP	NC,J6791		; not aborted,
J678B:	CALL	C7A37
	JP	J63FE

J6791:	CP	30H	; "0"
	JR	Z,J678B
	JR	C,J679B
	CP	3AH	; ":"
	JR	C,J67A0
J679B:	CALL	C61D3			; beep
	JR	J6782

J67A0:	SUB	30H	; "0"
J67A2:	PUSH	AF
	CALL	C70F3
	JR	NC,J67AB
	CALL	C61D3			; beep
J67AB:	POP	AF
	DEC	A
	JR	NZ,J67A2
	CALL	C7A93
	JR	J678B

J67B4:	LD	HL,(D.D919)
	PUSH	HL
	LD	A,(D.D905)
	PUSH	AF
	LD	A,(D.D906)
	PUSH	AF
	LD	B,08H	; 8 
	LD	HL,I.D9C2
J67C5:	LD	A,(HL)
	PUSH	AF
	INC	HL
	DJNZ	J67C5
	LD	A,(D.D90D)
	PUSH	AF
	OR	A
	JR	Z,J67DC
I67D0	EQU	$-1
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JR	C,J67DC
	JP	J6482

J67DC:	LD	BC,I86B9
	CALL	C6F5E
	LD	HL,(D.D90B)
	LD	A,0CEH
	CP	H
	JR	NZ,J67F0
	LD	A,0BFH
	CP	L
	JP	C,J6EF5
J67F0:	LD	HL,(D.D90B)
	INC	HL
	INC	HL
	INC	HL
	LD	A,(D.D90E)
	CP	27H	; "'"
	JR	Z,J6803
	LD	A,(HL)
	CP	0FCH
	JP	NC,J6EF5
J6803:	PUSH	HL
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	HL,I$2E15
	LD	BC,I86B9
	CALL	C7C3E
	DEC	H
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J681C
	DEC	H
	DEC	H
J681C:	LD	BC,I8713
	CALL	C7C3E
	POP	HL
	LD	DE,(D.D909)
	XOR	A
	SBC	HL,DE
	EX	DE,HL
J682B:	LD	(HL),00H
	INC	HL
	DEC	DE
	LD	(HL),25H	; "%"
	INC	HL
	DEC	DE
	LD	(HL),01H	; 1 
	INC	HL
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J682B
	PUSH	HL
	LD	B,H
	LD	C,L
	LD	A,(D.D906)
	LD	H,A
	LD	A,(D.D908)
	SUB	H
	LD	H,A
	LD	A,(D.D90D)
	OR	A
	JR	NZ,J6855
	LD	A,(D.D90E)
	CP	27H	; "'"
	JR	NZ,J6855
	INC	H
J6855:	LD	A,H
	OR	A
	JR	Z,J687C
	LD	A,(D.D90D)
	LD	L,A
	LD	A,(D.D90E)
	INC	A
	SUB	L
	JR	NC,J6865
J6864:	DEC	H
J6865:	LD	A,H
	OR	A
	JR	Z,J687A
	LD	A,C
	SUB	78H	; "x"
	LD	C,A
	LD	A,B
	SBC	A,00H
	LD	B,A
	PUSH	BC
	PUSH	HL
	CALL	C70A9
	POP	HL
	POP	BC
	JR	J6864

J687A:	POP	HL
	PUSH	BC
J687C:	POP	HL
	EXX
	POP	AF
	LD	(D.D90E),A
	LD	HL,I$D9C9
	LD	B,08H	; 8 
J6887:	POP	AF
	LD	(HL),A
	DEC	HL
	DJNZ	J6887
	POP	AF
	LD	(D.D908),A
	POP	AF
	LD	(D.D907),A
	POP	HL
	LD	(D.D919),HL
	LD	HL,(D.D909)
	LD	(D.D90B),HL
	PUSH	HL
	EXX
	POP	DE
	RST	20H
	JR	NZ,J68AD
J68A4:	CALL	C7F32
	CALL	C7A20
	JP	J6984

J68AD:	CALL	C6FB1
	RST	20H
	JR	Z,J68A4
	LD	DE,(D.D909)
	XOR	A
	PUSH	HL
	SBC	HL,DE
	LD	B,A
J68BC:	DEC	HL
	DEC	HL
	DEC	HL
	INC	B
	LD	A,L
	OR	H
	JR	NZ,J68BC
	LD	A,B
	PUSH	AF
	CALL	C7F32
	CALL	C7A20
	POP	AF
	POP	DE
	JP	J698D

?68D1:	XOR	A
	LD	(D.DA3D),A
J68D5:	LD	HL,(D.D909)
	LD	A,(D.D90D)
	OR	A
	JR	Z,J68E4
	LD	D,A
	ADD	A,A
	ADD	A,D
	CALL	C7D04
J68E4:	CALL	C6FB1
	JR	NC,J68EF
J68E9:	CALL	C61D3			; beep
	JP	J63FE

J68EF:	RST	20H
	JR	Z,J68E9
	PUSH	HL
	XOR	A
	PUSH	DE
	EX	DE,HL
	SBC	HL,DE
	CP	H
	JR	NZ,J68E9
	LD	A,78H	; "x"
	SUB	L
	JR	C,J68E9
	JP	Z,J68E9
	POP	DE
	LD	H,D
	LD	L,E
	LD	C,A
	LD	B,A
J6908:	LD	A,(DE)
	OR	A
	JR	NZ,J68E9
	INC	DE
	DEC	B
	LD	A,(DE)
	CP	25H	; "%"
	JR	NZ,J68E9
	INC	DE
	DEC	B
	LD	A,(DE)
	CP	01H	; 1 
	JR	NZ,J68E9
	INC	DE
	DJNZ	J6908
	LD	A,(D.DA3D)
	OR	A
	LD	A,C
	JR	NZ,J692B
	BIT	0,A
	JR	Z,J692A
	SUB	03H	; 3 
J692A:	RRCA
J692B:	OR	A
	JR	Z,J68E9
	PUSH	AF
	LD	D,H
	LD	E,L
	CALL	C7CEF
	EX	DE,HL
	POP	AF
	POP	BC
	PUSH	HL
	SBC	HL,BC
	LD	B,H
	LD	C,L
	POP	HL
	DEC	DE
	DEC	HL
	LDDR
	INC	HL
J6942:	LD	(HL),00H
	INC	HL
	LD	(HL),61H	; "a"
	INC	HL
	LD	(HL),00H
	INC	HL
	SUB	03H	; 3 
	JR	NZ,J6942
	CALL	C7A49
	JP	J63FE

?6955:	LD	A,0FFH
	LD	(D.DA3D),A
	JP	J68D5

?695D:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JP	NC,J6482
	INC	HL
	LD	A,(HL)
	CP	25H	; "%"
	JR	NZ,J6973
	INC	HL
	LD	A,(HL)
	CP	01H	; 1 
	JP	Z,J6482
J6973:	LD	BC,I86EB
	CALL	C6CFC
	CALL	C70F3
	JR	C,J6984
	LD	A,(D.D90D)
	OR	A
	JR	NZ,J698D
J6984:	CALL	C7A93
	CALL	C7A37
	JP	J63FE

J698D:	EX	DE,HL
	PUSH	AF
	CALL	C6FB1
	XOR	A
	EX	DE,HL
	SBC	HL,DE
	LD	B,H
	LD	C,L
	LD	H,D
	LD	L,E
	DEC	DE
	DEC	DE
	DEC	DE
	PUSH	DE
	LDIR
	EX	DE,HL
	LD	(HL),00H
	INC	HL
	LD	(HL),25H	; "%"
	INC	HL
	LD	(HL),01H	; 1 
	POP	DE
	POP	AF
	DEC	A
	JR	NZ,J698D
	JR	J6984

?69B0:	LD	BC,I86DB
	CALL	C6F5E
	LD	HL,(D.D909)
	LD	DE,(D.D90B)
J69BD:	LD	A,(HL)
	CP	0FCH
	JP	NC,J6EF2
	CALL	C69D6
	JR	C,J69CD
	AND	0DFH
	XOR	10H	; 16 
	LD	(HL),A
J69CD:	RST	20H
	JP	Z,J6F59
	INC	HL
	INC	HL
	INC	HL
	JR	J69BD

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C69D6:	PUSH	AF
	PUSH	HL
	INC	HL
	LD	A,(HL)
	CP	25H	; "%"
	JR	Z,J69E6
	CP	52H	; "R"
	JR	Z,J69F0
J69E2:	POP	HL
	POP	AF
	OR	A
	RET

J69E6:	INC	HL
	LD	A,(HL)
	CP	01H	; 1 
	JR	NZ,J69E2
J69EC:	POP	HL
	POP	AF
	SCF
	RET

J69F0:	INC	HL
	LD	A,(HL)
	CP	03H	; 3 
	JR	NZ,J69E2
	JR	J69EC

?69F8:	CALL	C7A37
	LD	HL,I.0215
	LD	BC,I86E3
	CALL	C7C3E
	XOR	A
	LD	(D.DAD9),A
	CALL	C61DB
J6A0B:	CALL	C74D0			; get keyboard input #2
	JP	C,J6C08			; aborted,
	LD	HL,(D.D909)
	LD	(D.DAD6),HL
	PUSH	AF
	LD	A,(OLDKEY+6)
	CP	0FBH			; KANA pressed ?
	JP	Z,J6A57			; yep,
	CP	0FEH			; SHIFT pressed ?
I6A21	EQU	$-1
	JP	Z,J6AA0			; yep,
	CP	0FFH
	JR	NZ,J6A52
	POP	AF
	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J6A34		; nope,
	XOR	A
	CALL	C7690
	JR	J6A0B

J6A34:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J6A3E		; nope,
	XOR	A
	CALL	C7870
	JR	J6A0B

J6A3E:	CP	1EH			; CURSOR UP ?
	JR	NZ,J6A48		; nope,
	XOR	A
	CALL	C752F
	JR	J6A0B

J6A48:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J6A52		; nope,
	XOR	A
	CALL	C75E4
	JR	J6A0B

J6A52:	CALL	C61D3			; beep
	JR	J6A0B

J6A57:	POP	AF
	CP	1CH
	JR	NZ,J6A6D
	LD	A,02H	; 2 
	CALL	C6AF5
	XOR	A
	CALL	C7690
	LD	A,08H	; 8 
J6A67:	CALL	C6AEA
	JP	J6A0B

J6A6D:	CP	1DH
	JR	NZ,J6A7E
	LD	A,08H	; 8 
	CALL	C6AF5
	XOR	A
	CALL	C7870
	LD	A,02H	; 2 
	JR	J6A67

J6A7E:	CP	1EH
	JR	NZ,J6A8F
	LD	A,04H	; 4 
	CALL	C6AF5
	XOR	A
	CALL	C752F
	LD	A,01H	; 1 
	JR	J6A67

J6A8F:	CP	1FH
	JR	NZ,J6A52
	LD	A,01H	; 1 
	CALL	C6AF5
	XOR	A
	CALL	C75E4
	LD	A,04H	; 4 
	JR	J6A67

J6AA0:	POP	AF
	CP	1CH
	JR	NZ,J6AB6
	LD	A,0FDH
	CALL	C6B0B
	XOR	A
	CALL	C7690
	LD	A,0F7H
J6AB0:	CALL	C6B00
	JP	J6A0B

J6AB6:	CP	1DH
	JR	NZ,J6AC7
	LD	A,0F7H
	CALL	C6B0B
	XOR	A
	CALL	C7870
	LD	A,0FDH
	JR	J6AB0

J6AC7:	CP	1EH
	JR	NZ,J6AD8
	LD	A,0FBH
	CALL	C6B0B
	XOR	A
	CALL	C752F
	LD	A,0FEH
	JR	J6AB0

J6AD8:	CP	1FH
	JP	NZ,J6A52
	LD	A,0FEH
	CALL	C6B0B
	XOR	A
	CALL	C75E4
	LD	A,0FBH
	JR	J6AB0

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6AEA:	LD	B,A
	LD	HL,(D.D909)
	LD	DE,(D.DAD6)
	RST	20H
	RET	Z
	LD	A,B
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6AF5:	LD	B,A
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	RET	NC
	OR	B
	JR	J6B14

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6B00:	LD	B,A
	LD	HL,(D.D909)
	LD	DE,(D.DAD6)
	RST	20H
	RET	Z
	LD	A,B
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6B0B:	LD	B,A
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	RET	NC
	AND	B
J6B14:	LD	(HL),A
	INC	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	BIT	2,A
	JR	Z,J6B2E
	LD	HL,I.0061
	RST	20H
	JR	Z,J6B29
	LD	HL,I.0125
	RST	20H
	JR	NZ,J6B37
J6B29:	LD	DE,I.0352
	JR	J6B37

J6B2E:	LD	HL,I.0352
	RST	20H
	JR	NZ,J6B37
	LD	DE,I.0125
J6B37:	LD	A,0FFH
	LD	(D.DA7D),A
	LD	(D.DAD8),A
	CALL	C65F8
	XOR	A
	LD	(D.DAD8),A
	RET

J6B47:	LD	HL,I.0215
	LD	BC,I8B3F
	CALL	C6F61
	LD	HL,(D.D90B)
	LD	DE,(D.D909)
	PUSH	HL
	XOR	A
	SBC	HL,DE
	CP	H
	JR	NZ,J6B6B
	LD	A,L
	CP	2CH	; ","
	JR	NC,J6B6B
	POP	HL
	EX	DE,HL
	INC	DE
J6B66:	LD	A,(HL)
	CP	0FCH
	JR	C,J6B6E
J6B6B:	JP	J6C24

J6B6E:	BIT	6,A
	JR	NZ,J6B6B
	INC	HL
	LD	A,(HL)
	CP	25H	; "%"
	JR	NZ,J6B7F
	INC	HL
	LD	A,(HL)
	CP	01H	; 1 
	JR	Z,J6B6B
	DEC	HL
J6B7F:	INC	HL
	INC	HL
	RST	20H
	JR	C,J6B66
	CALL	C7E90
	JP	J6C08

?6B8A:	CALL	C7A37
	LD	BC,I867D
	LD	HL,I.0215
	CALL	C7C3E
	LD	BC,I8641
	CALL	C7C3E
	LD	BC,I8697
	CALL	C6F61
	LD	HL,(D.D909)
	LD	DE,(D.D90B)
J6BA9:	LD	A,(HL)
	CP	0FCH
	JP	NC,J6B6B
	RST	20H
	JR	Z,J6BB7
	INC	HL
	INC	HL
	INC	HL
	JR	J6BA9

J6BB7:	CALL	C7EAE
	LD	HL,I$D0D0
J6BBD:	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	INC	HL
	LD	A,D
	OR	E
	JR	Z,J6BC8
	ADD	HL,DE
	JR	J6BBD

J6BC8:	PUSH	HL
	LD	DE,I$D8C9
	OR	A
	EX	DE,HL
	SBC	HL,DE
	JP	C,J6C0B
	PUSH	HL
	POP	BC
	LD	HL,(D.D90B)
	LD	DE,(D.D909)
	SBC	HL,DE
	PUSH	HL
	PUSH	BC
	POP	DE
	EX	DE,HL
	SBC	HL,DE
	JP	C,J6C0B
	POP	HL
	INC	HL
	INC	HL
	INC	HL
	EX	DE,HL
	POP	HL
	DEC	HL
	DEC	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	INC	HL
	LD	BC,(D.D909)
J6BF7:	LD	A,(BC)
	LD	(HL),A
	INC	BC
	INC	HL
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J6BF7
	LD	(HL),00H
	INC	HL
	LD	(HL),00H
	CALL	C7EA8
J6C08:	JP	J63D5

J6C0B:	CALL	C7A37
	LD	BC,I8729
	LD	HL,I.0215
J6C14:	XOR	A
	LD	(D.D91C),A
	CALL	C7C3E
	CALL	C61D3			; beep
	CALL	C74D0			; get keyboard input #2
I6C21:	JP	J6C08

J6C24:	CALL	C7A37
	LD	HL,I.0215
	LD	BC,I8733
	JR	J6C14

?6C2F:	LD	BC,I8703
	CALL	C6F5E
	LD	DE,(D.D90B)
	LD	HL,(D.D909)
J6C3C:	LD	A,(HL)
	CP	0FCH
	JR	C,J6C47
	CALL	C7F32
	JP	J6C24

J6C47:	INC	HL
	INC	HL
	INC	HL
	RST	20H
	JR	C,J6C3C
	LD	C,0EH	; 14 
	LD	A,04H	; 4 
	CALL	C7E36
	XOR	A
	OUT	(99H),A
	EX	(SP),HL
	EX	(SP),HL
	LD	A,40H
	OUT	(99H),A			; set VRAM address latch for writing = 0
	LD	HL,(D.D909)
	LD	DE,(D.D90B)
	INC	DE
	INC	DE
	INC	DE
J6C67:	LD	B,3
J6C69:	LD	A,(HL)
	OUT	(98H),A
	INC	HL
	EX	(SP),HL
	EX	(SP),HL
	DJNZ	J6C69
	RST	20H
	JR	NZ,J6C67
	LD	A,0FFH
	OUT	(98H),A
	LD	(D.DA5E),A
	JP	J6C08

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6C7E:	LD	C,0EH	; 14 
	LD	A,04H	; 4 
	CALL	C7E36
	LD	A,L
	OUT	(99H),A
	EX	(SP),HL
	EX	(SP),HL
	LD	A,H
	OUT	(99H),A			; set VRAM address latch for reading
	EX	(SP),HL
	EX	(SP),HL
	RET

J6C90:	LD	A,(D.DA5E)
	OR	A
	JP	Z,J6482
	LD	HL,X.0000
	CALL	C6C7E
	IN	A,(98H)
	CP	0FFH
	JP	Z,J6482
	LD	BC,I8703
	CALL	C6CFC
	LD	HL,X.0000
J6CAD:	PUSH	HL
	LD	A,(INTFLG)
	OR	A			; STOP or CTRL-STOP pressed ?
	JP	NZ,J6C08		; yep,
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JR	C,J6CC3
J6CBD:	CALL	C61D3			; beep
	JP	J6C08

J6CC3:	POP	HL
	CALL	C6C7E
	IN	A,(98H)
	CP	0FFH
	JP	Z,J6C08
	LD	A,(D.D923)
	OR	A
	JR	Z,J6CDB
	PUSH	HL
	CALL	C668E
	POP	HL
	JR	C,J6CBD
J6CDB:	PUSH	HL
	CALL	C6C7E
	IN	A,(98H)
	LD	HL,(D.D909)
	LD	(HL),A
	IN	A,(98H)
	LD	E,A
	EX	(SP),HL
	EX	(SP),HL
	IN	A,(98H)
	LD	D,A
	LD	A,0FFH
	LD	(D.DA7D),A
	CALL	C65F8
	POP	HL
	INC	HL
	INC	HL
	INC	HL
	JP	J6CAD

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6CFC:	LD	HL,I.0215
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6CFF:	LD	A,0CCH
	LD	(D.DAD9),A
	CALL	C7C3E
	LD	BC,I8671
	CALL	C7C3E
J6D0D:	CALL	C74D0			; get keyboard input #2
	JP	C,J6C08			; aborted,
	CP	0DH			; RETURN ?
	JR	NZ,J6D0D		; nope, again
	XOR	A
	LD	(D.DAD9),A
	RET

?6D1C:	LD	A,0F1H
	LD	BC,I8A73
	JR	J6D2F

?6D23:	LD	A,0F2H
	LD	BC,I8A7B
	JR	J6D2F

J6D2A:	LD	A,0F0H
	LD	BC,I8A6B
J6D2F:	LD	(D.D91C),A
	LD	HL,I6D38
	CALL	C7F7A
I6D38:	JP	C,J63FE
	PUSH	AF
	XOR	A
	LD	(D.DAD9),A
	POP	AF
	OR	A
	JR	NZ,J6D51
	PUSH	HL
	PUSH	BC
	CALL	C6589
	POP	BC
	LD	HL,I6D38
	EX	(SP),HL
	JP	J7F86

J6D51:	CP	0F1H
	JR	NZ,J6D5F
	CALL	C6589
	LD	HL,I6D38
	PUSH	HL
	JP	J7F8C

J6D5F:	CP	0F2H
	JP	NZ,J6D6F
	PUSH	HL
	CALL	C6589
	LD	HL,I6D38
	EX	(SP),HL
	JP	J7EA2

J6D6F:	CP	0F0H
	JR	NZ,J6D7E
	PUSH	HL
	CALL	C6589
	LD	HL,I6D38
	EX	(SP),HL
	JP	J7E2A

J6D7E:	CP	12H	; 18 
	JR	NZ,J6D87
	CALL	C6682
	JR	J6DAD

J6D87:	CP	1CH
	JR	NZ,J6D91
	XOR	A
	CALL	C7690
	JR	J6DAD

J6D91:	CP	1DH
	JR	NZ,J6D9B
	XOR	A
	CALL	C7870
	JR	J6DAD

J6D9B:	CP	1EH
	JR	NZ,J6DA5
	XOR	A
	CALL	C752F
	JR	J6DAD

J6DA5:	CP	1FH
	JR	NZ,J6DAD
	XOR	A
	CALL	C75E4
J6DAD:	LD	A,0CCH
	LD	(D.DAD9),A
	LD	HL,I6D38
	PUSH	HL
	JP	J7F80

J6DB9:	LD	BC,I8B4B
	CALL	C6CFC
	CALL	C7E96
	JP	C,J63D5
	CALL	C7C26
	JP	J63D5

?6DCB:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JP	NC,J6482
	CALL	C7A37
	LD	HL,I.0215
	LD	BC,I869B
	CALL	C7C3E
	LD	A,15H
	LD	(D.D9B5),A
	CALL	C7A20
J6DE8:	XOR	A
	LD	(D.D90F),A
J6DEC:	CALL	C74D0			; get keyboard input #2
	JR	NC,J6DFE		; not aborted,
	LD	A,(D.D90F)
	OR	A
	JR	Z,J6DFB
	XOR	A
	CALL	C7690
J6DFB:	JP	J6F7A

J6DFE:	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J6E08		; nope,
J6E02:	XOR	A
	CALL	C7690
	JR	J6DE8

J6E08:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J6E12		; nope,
	XOR	A
	CALL	C7870
	JR	J6DE8

J6E12:	CP	1EH			; CURSOR UP ?
	JR	NZ,J6E1C		; nope,
	XOR	A
	CALL	C752F
	JR	J6DE8

J6E1C:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J6E26		; nope,
	XOR	A
	CALL	C75E4
	JR	J6DE8

J6E26:	CP	12H			; INSERT ?
	JR	NZ,J6E35		; nope,
	CALL	C6682
	LD	A,(D.D90F)
	OR	A
	JR	Z,J6DE8
	JR	J6E02

J6E35:	CP	0DH			; RETURN ?
	JR	NZ,J6E3E		; nope,
	CALL	C66C5
	JR	J6DE8

J6E3E:	CP	20H			; control character ?
	JR	NC,J6E4A		; nope,
J6E42:	CALL	C61D3			; beep
	CALL	C61DB
	JR	J6DEC

J6E4A:	CP	7FH			; DELETE ?
	JR	Z,J6E42			; yep,
	PUSH	AF
	LD	A,(D.D923)
	OR	A
	JR	Z,J6E63
	LD	A,(D.D90F)
	OR	A
	JR	NZ,J6E63
	CALL	C668E
	JR	NC,J6E63
	POP	AF
	JR	J6E42

J6E63:	POP	AF
	SUB	20H	; " "
	CP	60H	; "`"
	JR	C,J6E7A
	CP	66H	; "f"
I6E6B	EQU	$-1
	JR	C,J6E42
I6E6E:	CP	80H
	JR	C,J6E7A
	SUB	20H	; " "
	CP	0A0H
	JR	C,J6E7A
I6E77	EQU	$-1
	SUB	20H	; " "
J6E7A:	EX	AF,AF'
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
I6E80	EQU	$-1
	JR	NC,J6E42
	LD	A,(D.D90F)
I6E86:	OR	A
	JR	NZ,J6E96
	LD	A,(HL)
	BIT	6,A
	JR	NZ,J6E95
	SET	6,A
	LD	(HL),A
	INC	HL
	LD	(HL),00H
	DEC	HL
J6E95:	INC	HL
J6E96:	INC	HL
	EX	AF,AF'
	LD	(HL),A
	LD	HL,(D.D909)
	LD	B,(HL)
	INC	HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	A,(D.D905)
	ADD	A,A
	LD	H,A
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J6EAF
	LD	A,H
	ADD	A,A
	LD	H,A
J6EAF:	LD	A,02H	; 2 
	ADD	A,H
	LD	H,A
	LD	A,(D.D906)
	LD	L,A
	ADD	A,A
	ADD	A,L
	LD	L,A
	LD	A,B
	CALL	C7AE5
	LD	A,(D.D90F)
	XOR	0FFH
	LD	(D.D90F),A
	JP	NZ,J6DEC
	CALL	C7690
	JP	J6DEC

?6ECF:	LD	HL,D.D9B5
	LD	(HL),13H	; 19 
	CALL	C7A20
	LD	BC,I8717
	CALL	C6F5E
	LD	HL,(D.D909)
	LD	DE,(D.D90B)
	PUSH	DE
	PUSH	HL
	INC	HL
	LD	A,(HL)
	CP	25H	; "%"
	JR	NZ,J6F0C
	INC	HL
	LD	A,(HL)
	CP	01H	; 1 
	JR	NZ,J6F0C
J6EF2:	CALL	C7A93
J6EF5:	LD	A,0CCH
	LD	(D.DAD9),A
	LD	BC,I8737
	LD	HL,I$0E15
	LD	A,(D.DA8F)
	OR	A
	JP	Z,J6C14
	LD	H,08H	; 8 
	JP	J6C14

J6F0C:	INC	DE
	LD	A,(DE)
	CP	25H	; "%"
	JR	NZ,J6F18
	INC	DE
	LD	A,(DE)
	CP	01H	; 1 
	JR	Z,J6EF2
J6F18:	POP	HL
	CALL	C6FB1
	JR	C,J6EF2
	POP	HL
	EX	DE,HL
	OR	A
	SBC	HL,DE
	JR	C,J6EF2
	LD	HL,(D.D909)
	LD	DE,(D.D90B)
J6F2C:	INC	DE
	INC	DE
	INC	DE
	PUSH	DE
	CALL	C6FB1
	JR	C,J6EF2
	OR	A
	PUSH	DE
	EX	DE,HL
	SBC	HL,DE
	LD	C,L
	LD	B,H
	POP	DE
	LD	H,D
	LD	L,E
	DEC	HL
	INC	DE
	INC	DE
	LDDR
	INC	HL
	LD	A,(HL)
	AND	30H	; "0"
	LD	(HL),A
	INC	HL
	LD	(HL),0A0H
	INC	HL
	LD	(HL),02H	; 2 
	LD	BC,I.0004
	ADD	HL,BC
	POP	DE
	EX	DE,HL
	RST	20H
	EX	DE,HL
	JR	NC,J6F2C
J6F59:	CALL	C7A93
	JR	J6F7A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6F5E:	LD	HL,I.0215
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6F61:	LD	A,0CCH
	LD	(D.DAD9),A
	CALL	C7C3E
	LD	BC,I86A3
	CALL	C7C3E
	LD	BC,I86A9
	CALL	C7C3E
J6F75:	CALL	C74D0			; get keyboard input #2
	JR	NC,J6F85		; not aborted,
J6F7A:	LD	HL,D.D9B5
	LD	(HL),14H	; 20 
	CALL	C7A20
	JP	J63D5

J6F85:	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J6F8E		; nope,
	CALL	C7690
	JR	J6F75

J6F8E:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J6F97		; nope,
	CALL	C7870
	JR	J6F75

J6F97:	CP	1EH			; CURSOR UP ?
	JR	NZ,J6FA0		; nope,
	CALL	C752F
	JR	J6F75

J6FA0:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J6FA9		; nope,
	CALL	C75E4
	JR	J6F75

J6FA9:	CP	0DH			; RETURN ?
	RET	Z			; yep, quit
	CALL	C61D3			; beep
	JR	J6F75

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C6FB1:	PUSH	HL
J6FB2:	LD	A,(HL)
	CP	0FCH
	JR	C,J6FBB
	SCF
	EX	DE,HL
	POP	HL
	RET

J6FBB:	PUSH	HL
	EX	DE,HL
	POP	HL
	INC	HL
	LD	A,(HL)
	INC	HL
	CP	25H	; "%"
	JR	Z,J6FC8
J6FC5:	INC	HL
	JR	J6FB2

J6FC8:	LD	A,(HL)
	CP	01H	; 1 
	JR	NZ,J6FC5
	POP	HL
	RET

?6FCF:	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FCH
	JR	NC,J7010
	CALL	C7A37
	LD	BC,I867D
	LD	HL,I.0215
	CALL	C7C3E
	LD	BC,I863B
	CALL	C7C3E
	LD	BC,I8697
	CALL	C7033
	XOR	A
	LD	(D.DAD9),A
J6FF3:	LD	A,(INTFLG)
	OR	A			; STOP or CTRL-STOP pressed ?
	JP	NZ,J6C08		; yep,
	LD	A,(D.D923)
	OR	A
	JR	Z,J7007
	PUSH	HL
	CALL	C668E
	POP	HL
	JR	C,J7010
J7007:	LD	BC,(D.D909)
	LD	A,(BC)
	CP	0FCH
	JR	C,J7016
J7010:	CALL	C61D3			; beep
	JP	J6C08

J7016:	LD	A,(HL)
	LD	(BC),A
	INC	HL
	PUSH	DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	INC	HL
	PUSH	HL
	LD	A,0FFH
	LD	(D.DA7D),A
	CALL	C65F8
	POP	HL
	POP	DE
	DEC	DE
	DEC	DE
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J6FF3
	JP	J6C08

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7033:	CALL	C6CFF
	CALL	C7EB4
	JP	C,J6C08
	RET

J703D:	CALL	C7A37
	LD	BC,I867D
	LD	HL,I.0215
	CALL	C7C3E
	LD	BC,I86B9
	CALL	C7033
	PUSH	HL
	ADD	HL,DE
	PUSH	HL
	PUSH	HL
	LD	HL,I$D8D0
	POP	BC
	XOR	A
	SBC	HL,BC
	PUSH	HL
	POP	BC
	POP	HL
	POP	DE
	DEC	DE
	DEC	DE
	LDIR
	CALL	C7EA8
	JP	J6C08

?7068:	LD	A,(D.D90D)
	OR	A
	JP	NZ,J6482
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FDH
	JR	Z,J70A0
	CALL	C70F3
	JP	C,J6482
	LD	(HL),0FDH
	INC	HL
	LD	(HL),7FH
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	PUSH	HL
	LD	(HL),0FDH
J7089:	INC	HL
	LD	(HL),0DFH
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	POP	DE
	EX	DE,HL
	LD	BC,I$0072
	LDIR
	CALL	C66C5
J709A:	CALL	C7A93
	JP	J63FE

J70A0:	LD	BC,(D.D909)
	CALL	C70A9
	JR	J709A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C70A9:	PUSH	BC
	PUSH	BC
	LD	HL,I.CEC0
	OR	A
	SBC	HL,BC
	JR	Z,J70CC
	LD	B,H
	LD	C,L
	LD	DE,I.0078
	POP	HL
	ADD	HL,DE
	POP	DE
	LDIR
J70BD:	LD	B,28H	; "("
	EX	DE,HL
J70C0:	LD	(HL),00H
	INC	HL
	LD	(HL),25H	; "%"
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	DJNZ	J70C0
	RET

J70CC:	POP	HL
	POP	DE
	JR	J70BD

?70D0:	LD	A,(D.D90D)
	OR	A
	JP	NZ,J6482
	LD	HL,(D.D909)
	LD	A,(HL)
	CP	0FEH
	JR	Z,J70A0
	CALL	C70F3
	JP	C,J6482
	LD	(HL),0FEH
	INC	HL
	LD	(HL),0E0H
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	PUSH	HL
	LD	(HL),0FEH
	JR	J7089

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C70F3:	LD	HL,(D.D909)
	LD	DE,I.CF37
	LD	B,H
	LD	C,L
	LD	HL,I$CEBF
	PUSH	HL
	OR	A
	SBC	HL,BC
	JR	Z,J7131
	JR	C,J7131
	LD	B,H
	LD	C,L
	INC	BC
	POP	HL
	LDDR
	INC	HL
	PUSH	HL
J710E:	PUSH	HL
	LD	(HL),00H
	INC	HL
	LD	(HL),25H	; "%"
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	POP	DE
	EX	DE,HL
	LD	BC,I$0075
	LDIR
	LD	HL,I.CEC0
I7121	EQU	$-1
	LD	A,(HL)
	CP	0FCH
	JR	NC,J710E
	POP	HL
	PUSH	HL
	LD	DE,I.0078
	ADD	HL,DE
	PUSH	HL
	POP	DE
	POP	HL
	RET

J7131:	POP	HL
	SCF
	RET

J7134:	LD	SP,(HIMEM)
	CALL	C7C32
	JP	J6274

J713E:	LD	SP,(HIMEM)
	CALL	C7BD8
	JP	C,J6274
	DEC	A
	JR	Z,J7155
	DEC	A
	JR	Z,J7185
	LD	HL,J713E
	PUSH	HL
	JP	J71DD

J7155:	CALL	C7C14
	JR	C,J713E
	LD	BC,I8B6F
	CALL	C71AB
	XOR	A
	LD	(D.F86C),A
	CALL	C6291
	JR	C,J713E
	CALL	C7CBC
	LD	HL,I.CF38
	LD	DE,X.8000
	PUSH	DE
	OR	A
	SBC	HL,DE
J7176:	LD	DE,(D.F878)
	RST	20H
	JR	NC,J717E
	EX	DE,HL
J717E:	POP	HL
	OR	A
	CALL	C6328
	JR	J713E

J7185:	CALL	C7E60
	JR	C,J713E
	CALL	C7C14
	JR	C,J713E
	LD	BC,I870D
	CALL	C71AB
	XOR	A
	LD	(D.F86C),A
	CALL	C6291
	JR	C,J713E
	CALL	C7E60
	PUSH	HL
	LD	DE,I.CF38
	EX	DE,HL
	OR	A
	SBC	HL,DE
	JR	J7176

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C71AB:	PUSH	BC
	LD	HL,I$2D00
	LD	DE,I$1002
	LD	A,40H	; "@"
	CALL	C7F50
	POP	BC
	LD	HL,I$2F00
	CALL	C7C44
	LD	BC,I8713
	CALL	C7C3E
	XOR	A
	LD	(D.DAD9),A
	RET

J71C9:	LD	SP,(HIMEM)
	CALL	C7BDE
	JP	C,J6274
	DEC	A
	JR	Z,J71EB
	DEC	A
	JR	Z,J720F
	LD	HL,J71C9
	PUSH	HL
J71DD:	LD	A,(D.D9CB)
	CPL
	LD	(D.D9CB),A
	CALL	STMOTR
	CALL	C61D3			; beep
	RET

J71EB:	LD	A,(X.8000)
	CP	0FEH
	JR	Z,J71C9
	CALL	C7C14
	JR	C,J71C9
	LD	BC,I8B75
	CALL	C71AB
	CALL	C7E5A
	PUSH	DE
	PUSH	HL
	OR	A
	CALL	C635B
	JR	C,J71C9
	POP	DE
	POP	HL
	CALL	C637B
	JR	J71C9

J720F:	LD	A,(X.8000)
	CP	0FEH
	JP	Z,J71C9
	CALL	C7C14
	JR	C,J71C9
	LD	BC,I865B
	CALL	C71AB
	XOR	A
	LD	(D.F86C),A
	CALL	C6291
	JR	C,J71C9
	LD	HL,X.8000
	LD	DE,(D.F878)
	LD	BC,J71C9
	PUSH	BC
	CALL	C634E
	RET	C
J723A:	CALL	C633D
	RET	C
	CP	(HL)
	INC	HL
	JR	NZ,J724B
	DEC	DE
	LD	A,D
	OR	E
	JR	NZ,J723A
	CALL	TAPIOF
	RET

J724B:	CALL	TAPIOF
	CALL	C61D3			; beep
	LD	HL,I.0E0F
	LD	BC,I8659
	CALL	C7C44
	LD	BC,I8737
	CALL	C7C3E
	CALL	C61DB
	CALL	C61D3			; beep
	CALL	C74AE			; get keyboard input
	JP	J71C9

J726C:	CALL	C7BE4
	JP	C,J6274
	DEC	A
	JP	Z,J7480
	DEC	A
	JR	Z,J727C
	JP	J7281

J727C:	CALL	C7EBA
	JR	J726C

J7281:	LD	SP,(HIMEM)
	CALL	C7BF0
	JP	C,J726C
	DEC	A
	JR	Z,J72A6
	DEC	A
	JP	Z,J7401
	CALL	C7BF6
	JR	J7281

;	  Subroutine RS232 open
;	     Inputs  ________________________
;	     Outputs ________________________

C7297:	LD	A,LOW (I4010+6)
I7299:	LD	(C.F882+2),A		; RS232.OPEN
	LD	HL,I$F420
	LD	C,254
	CALL	C.F882			; RS232 bios call
	EI
	RET

J72A6:	LD	SP,(HIMEM)
	CALL	C7BFC
	JP	C,J7281
	DEC	A
	JR	Z,J72B5
	JR	J72D4

J72B5:	LD	HL,X.8000
	LD	A,0FEH
J72BA:	CP	(HL)
	JR	Z,J72C2
	INC	HL
	INC	HL
	INC	HL
	JR	J72BA

J72C2:	LD	DE,I.CF37
	RST	20H
	JR	C,J72CD
	CALL	C61D3			; beep
	JR	J72A6

J72CD:	LD	DE,I.0078
	ADD	HL,DE
	EX	DE,HL
	JR	J72DA

J72D4:	CALL	C7CBC
	LD	DE,X.8000
J72DA:	PUSH	DE
	LD	BC,I89DD
	CALL	C71AB
	POP	DE
	PUSH	DE
	LD	E,1			; mode = input
	CALL	C7297			; RS232 open
	POP	DE
J72E9:	LD	HL,I.CF38
	RST	20H
	JR	NZ,J72FE
	LD	BC,I89D1
J72F2:	LD	HL,I.140E
	CALL	C7C44
J72F8:	CALL	C73DF			; RS232 close
	JP	J72A6

J72FE:	CALL	C73D5			; RS232 get character
	JR	C,J72F8
	JP	M,J736F
	CALL	C7375
	JR	C,J736C
	CALL	C73D5			; RS232 get character
	JR	C,J736C
	JP	M,J736C
	CALL	C7389
	JR	C,J736C
	CALL	C73D5			; RS232 get character
	JR	C,J736B
	JP	M,J736B
	CALL	C7375
	JR	C,J736B
	CALL	C73D5			; RS232 get character
	JR	C,J736B
	JP	M,J736B
	CALL	C7389
	JR	C,J736B
	CALL	C73D5			; RS232 get character
I7335:	JR	C,J736A
I7336	EQU	$-1
	JP	M,J736A
	CALL	C7375
	JR	C,J736A
	CALL	C73D5			; RS232 get character
	JR	C,J736A
	JP	M,J736A
	CALL	C7389
	JR	C,J736A
	LD	A,(D.DB10)
	OR	A
	JP	NZ,J72E9
	PUSH	DE
	LD	DE,0*256+2
	CALL	EXTBIO
	POP	DE			; DISINT
	CALL	C73A8
	PUSH	DE
	LD	DE,0*256+3
	CALL	EXTBIO
	POP	DE			; ENAINT
	EI
	JP	J72E9

J736A:	DEC	DE
J736B:	DEC	DE
J736C:	CALL	C739D
J736F:	LD	BC,I89C3
	JP	J72F2

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7375:	SUB	30H	; "0"
	RET	C
	CP	10H	; 16 
	JR	C,J737E
	SUB	07H	; 7 
J737E:	AND	0FH	; 15 
	RLCA
	RLCA
	RLCA
	RLCA
	LD	(D.DB0F),A
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7389:	SUB	30H	; "0"
	RET	C
	CP	10H	; 16 
	JR	C,J7392
	SUB	07H	; 7 
J7392:	AND	0FH	; 15 
	LD	H,A
	LD	A,(D.DB0F)
	OR	H
	LD	(DE),A
	INC	DE
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C739D:	XOR	A
	LD	(DE),A
	INC	DE
	LD	A,25H	; "%"
	LD	(DE),A
	INC	DE
	LD	A,01H	; 1 
	LD	(DE),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C73A8:	PUSH	DE
	PUSH	DE
	LD	HL,I$0612
	LD	DE,I$3803
	LD	BC,I.3A12
I73B2	EQU	$-1
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J73BF
	LD	H,04H	; 4 
	LD	D,3AH	; ":"
	LD	B,3CH	; "<"
J73BF:	PUSH	BC
	LD	BC,I.0212
	CALL	C7ED8
	POP	BC
	POP	HL
	DEC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	DEC	HL
	LD	A,(HL)
	LD	H,B
	LD	L,C
	CALL	C7AE5
	POP	DE
	RET

;	  Subroutine RS232 get character
;	     Inputs  ________________________
;	     Outputs ________________________

C73D5:	LD	A,LOW (I4010+12)
	LD	(C.F882+2),A		; RS232.GETCHR
	CALL	C.F882			; RS232 bios call
	EI
	RET

;	  Subroutine RS232 close
;	     Inputs  ________________________
;	     Outputs ________________________

C73DF:	DI
	CALL	BREAKX
	JR	C,C73DF
	EI
	CALL	C61D3			; beep
	LD	A,LOW (I4010+18)
	LD	(C.F882+2),A		; RS232.CLOSE
	CALL	C.F882			; RS232 bios call
	LD	HL,0
J73F4:	DEC	HL
	LD	A,H
	OR	L
	JR	NZ,J73F4
	CALL	C61DB
	XOR	A
	LD	(INTFLG),A		; reset STOP or CTRL-STOP flag
	RET

J7401:	LD	SP,(HIMEM)
	CALL	C7C02
	JP	C,J7281
	CP	0DH	; 13 
	JR	NZ,J7401
	LD	E,2			; mode = output
	CALL	C7297			; RS232 open
	LD	DE,X.8000
	PUSH	DE
	LD	BC,I8A1B
	CALL	C71AB
	POP	DE
J741F:	LD	A,(DE)
	CP	0FEH
	JR	NZ,J742A
J7424:	CALL	C73DF			; RS232 close
	JP	J7401

J742A:	LD	B,3
J742C:	PUSH	BC
	CALL	C7447			; high nibble to hex
	CALL	C745A			; RS232 send character
	CALL	C7456			; low nibble to hex, next
	CALL	C745A			; RS232 send character
	POP	BC
	DJNZ	J742C
	LD	A,(D.DB10)
	OR	A
	JR	NZ,J741F
	CALL	C73A8
	JR	J741F

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7447:	LD	A,(DE)
	RLCA
	RLCA
	RLCA
	RLCA
J744C:	AND	0FH
	ADD	A,"0"
	CP	"9"+1
	RET	C
	ADD	A,07H
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7456:	LD	A,(DE)
	INC	DE
	JR	J744C

;	  Subroutine RS232 send character
;	     Inputs  ________________________
;	     Outputs ________________________

C745A:	PUSH	AF
	LD	A,LOW (I4010+15)
	LD	(C.F882+2),A		; RS232.SNDCHR
	POP	AF
	PUSH	DE
	CALL	C.F882			; RS232 bios call
	EI
	POP	DE
	JR	Z,J7475			; timeout,
	RET	NC			; no error, quit
	LD	BC,I8A0F
J746D:	LD	HL,I.140E
	CALL	C7C44
	JR	J7424

J7475:	LD	BC,I8A01
	JR	J746D

J747A:	CALL	BREAKX
	JR	C,J747A
	RET

J7480:	LD	SP,(HIMEM)
	CALL	C7C08
	JP	C,J726C
	DEC	A
	JR	Z,J74A4
	DEC	A
	JR	Z,J74A9
	DEC	A
	DEC	A
	JR	Z,J7499
	CALL	C7BC0
	JR	J7480

J7499:	LD	BC,I8647
	CALL	C71AB
	CALL	C7C6E
	JR	J7480

J74A4:	CALL	C7EC6
	JR	J7480

J74A9:	CALL	C7ECC
	JR	J7480

;	  Subroutine get keyboard input
;	     Inputs  ________________________
;	     Outputs ________________________

C74AE:	EI
	XOR	A
	CALL	C.D8FB
	RET	NZ
	LD	A,(INTFLG)
	OR	A			; STOP or CTRL-STOP pressed ?
	JR	NZ,J74C8		; yep,
	CALL	CHSNS			; keyboard input available ?
	JR	Z,C74AE			; nope, try again
	CALL	CHGET			; get keyboard input
	CP	3
	JR	Z,J74C8
	OR	A
	RET

J74C8:	XOR	A
	LD	(INTFLG),A		; reset STOP or CTRL-STOP flag
	LD	A,3
	SCF
	RET

;	  Subroutine get keyboard input #2
;	     Inputs  ________________________
;	     Outputs ________________________

C74D0:	EI
	XOR	A
	CALL	C.D8FB
	RET	NZ
	LD	A,(INTFLG)
	OR	A			; STOP or CTRL-STOP pressed ?
	JR	NZ,J74C8		; yep, quit
	PUSH	HL
	LD	HL,D.D91B
	LD	A,(MODE)
	AND	01H	; 1 
	CP	(HL)
	JR	Z,J74F2
	LD	(D.D91B),A
	XOR	A
	LD	(CHRCNT),A
	CALL	C7CAA
J74F2:	LD	A,(MODE)
	AND	01H	; 1 
	JR	Z,J7520
	PUSH	DE
	LD	HL,I$D9BB
	LD	(HL),20H	; " "
	DEC	HL
	LD	(HL),20H	; " "
	LD	DE,ROMA
	LD	A,(CHRCNT)
	SUB	1
	JR	C,J7514
	JR	Z,J7512
	LD	A,(DE)
	LD	(HL),A
	INC	HL
	INC	DE
J7512:	LD	A,(DE)
	LD	(HL),A
J7514:	LD	A,02H	; 2 
	LD	HL,I$D9BA
	LD	DE,I$1C13
	CALL	C7F74
	POP	DE
J7520:	POP	HL
	CALL	CHSNS
	JR	Z,C74D0
	CALL	CHGET
	CP	3
	JR	Z,J74C8
	OR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C752F:	PUSH	HL
	PUSH	DE
	PUSH	BC
	OR	A
	JR	NZ,J757C
	LD	A,(D.D906)
	OR	A
	JR	NZ,J754C
	LD	HL,(D.D909)
	LD	DE,I8078
	RST	20H
	JR	NC,J756C
J7544:	CALL	C61D3			; beep
	POP	BC
	POP	DE
	POP	HL
	SCF
	RET

J754C:	DEC	A
	LD	(D.D906),A
	LD	(D.D908),A
J7553:	CALL	C75BB
	LD	HL,(D.D909)
	LD	A,78H	; "x"
	CALL	C7D04
	LD	(D.D909),HL
	LD	(D.D90B),HL
J7564:	CALL	C7F1A
	POP	BC
	POP	DE
	POP	HL
	OR	A
	RET

J756C:	LD	HL,(D.D919)
	LD	A,78H	; "x"
	CALL	C7D04
	LD	(D.D919),HL
	CALL	C7D24
	JR	J7553

J757C:	LD	HL,(D.D90B)
	LD	DE,(D.D909)
	LD	A,78H	; "x"
	CALL	C7D04
	RST	20H
	JR	C,J7544
	LD	A,(D.D908)
	OR	A
	JR	Z,J75A0
	DEC	A
	LD	(D.D908),A
J7595:	LD	(D.D90B),HL
	CALL	C75BB
J759B:	CALL	C7F20
	JR	J7564

J75A0:	LD	A,(D.D906)
	INC	A
	LD	(D.D906),A
	LD	DE,(D.D919)
	LD	A,78H	; "x"
	CALL	C7D0D
	LD	(D.D919),DE
	PUSH	HL
	CALL	C7D24
	POP	HL
	JR	J7595

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C75BB:	LD	HL,I.D9C4
	DEC	(HL)
	LD	A,(HL)
	CP	0FFH
	JR	NZ,J75D8
	LD	(HL),09H	; 9 
	DEC	HL
	DEC	(HL)
	LD	A,(HL)
	CP	0FFH
	JR	NZ,J75D8
	LD	(HL),09H	; 9 
	DEC	HL
	DEC	(HL)
	LD	A,(HL)
	CP	00H
	JR	NZ,J75D8
	LD	(HL),1AH
J75D8:	LD	HL,I.D9C2
	LD	DE,I.2C13
	LD	A,03H	; 3 
	CALL	C7F74
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C75E4:	PUSH	HL
	PUSH	DE
	PUSH	BC
	OR	A
	JR	NZ,J7626
	LD	A,(D.D906)
	CP	05H	; 5 
	JR	NZ,J760B
	LD	HL,(D.D909)
	LD	DE,I.CEC0
	RST	20H
	JP	NC,J7544
	LD	HL,(D.D919)
	LD	A,78H	; "x"
	CALL	C7CEF
	LD	(D.D919),HL
	CALL	C7D59
	JR	J7612

J760B:	INC	A
	LD	(D.D906),A
	LD	(D.D908),A
J7612:	CALL	C7663
	LD	HL,(D.D909)
	LD	A,78H	; "x"
	CALL	C7CEF
	LD	(D.D909),HL
	LD	(D.D90B),HL
	JP	J7564

J7626:	LD	A,(D.D908)
	CP	05H	; 5 
	JR	NZ,J764E
	LD	HL,(D.D90B)
	LD	DE,I.CEC0
	RST	20H
	JP	NC,J7544
	LD	HL,(D.D919)
	LD	A,78H	; "x"
	CALL	C7CEF
	LD	(D.D919),HL
	CALL	C7D59
	LD	A,(D.D906)
	DEC	A
	LD	(D.D906),A
	JR	J7652

J764E:	INC	A
	LD	(D.D908),A
J7652:	CALL	C7663
	LD	HL,(D.D90B)
	LD	A,78H	; "x"
	CALL	C7CEF
	LD	(D.D90B),HL
	JP	J759B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7663:	LD	HL,I.D9C4
	LD	A,(HL)
	INC	A
	LD	(HL),A
	CP	0AH	; 10 
	JR	NZ,J7684
	LD	(HL),00H
	DEC	HL
	LD	A,(HL)
	INC	A
	LD	(HL),A
	CP	0AH	; 10 
	JR	NZ,J7684
	LD	(HL),00H
	DEC	HL
	LD	A,(HL)
	CP	1AH
	JR	NZ,J7683
	LD	(HL),01H	; 1 
	JR	J7684

J7683:	INC	(HL)
J7684:	LD	HL,I.D9C2
	LD	DE,I.2C13
	LD	A,03H	; 3 
	CALL	C7F74
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7690:	PUSH	HL
	PUSH	DE
	PUSH	BC
	OR	A
	JP	NZ,J7773
	LD	HL,(D.D909)
	LD	DE,I.CF35
	RST	20H
	JP	Z,J7544
	LD	HL,D.D905
	LD	D,0EH	; 14 
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J76AE
	LD	D,1DH
J76AE:	LD	A,D
	CP	(HL)
	JP	NZ,J774B
	LD	A,(D.D90D)
	CP	27H	; "'"
	JR	NZ,J7727
	XOR	A
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	(D.D905),A
	LD	(D.D907),A
	LD	HL,(D.D909)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	LD	A,(D.D906)
	CP	05H	; 5 
	JR	Z,J76F5
	INC	A
	LD	(D.D906),A
	LD	(D.D908),A
	LD	HL,(D.D919)
	LD	BC,I.004B
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J76F0
	LD	BC,I.001E
J76F0:	OR	A
	SBC	HL,BC
	JR	J7705

J76F5:	LD	HL,(D.D919)
	LD	BC,I.002D
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7704
	LD	BC,I.005A
J7704:	ADD	HL,BC
J7705:	LD	(D.D919),HL
	LD	HL,I.D9C7
	LD	(HL),1AH
	INC	HL
	LD	(HL),01H	; 1 
	DEC	HL
	LD	DE,I.3613
	LD	A,02H	; 2 
	CALL	C7F74
	CALL	C7663
J771C:	CALL	C7F1A
	CALL	C7A93
J7722:	POP	BC
	POP	DE
	POP	HL
	OR	A
	RET

J7727:	INC	A
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	HL,(D.D909)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	LD	HL,(D.D919)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D919),HL
J7743:	CALL	C784F
	CALL	C7D83
	JR	J7722

J774B:	LD	A,(D.D905)
	INC	A
	LD	(D.D905),A
	LD	(D.D907),A
	LD	A,(D.D90D)
	INC	A
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	HL,(D.D909)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	CALL	C784F
	CALL	C7F1A
	JR	J7722

J7773:	LD	HL,(D.D90B)
	LD	DE,I.CF35
	RST	20H
	JP	Z,J7544
	LD	HL,D.D907
	LD	D,0EH	; 14 
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J778A
	LD	D,1DH
J778A:	LD	A,D
	CP	(HL)
	LD	A,(HL)
	JP	NZ,J7832
	LD	A,(D.D90E)
	CP	27H	; "'"
	JR	NZ,J780F
	XOR	A
	LD	(D.D90E),A
	LD	(D.D907),A
	LD	A,(D.D905)
	LD	H,A
	LD	A,(D.DA8F)
	OR	A
	LD	A,19H
	JR	Z,J77AC
	LD	A,0AH	; 10 
J77AC:	ADD	A,H
	LD	(D.D905),A
	LD	HL,(D.D90B)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D90B),HL
	LD	A,(D.D908)
	CP	05H	; 5 
	JR	Z,J77DB
	INC	A
	LD	(D.D908),A
	LD	HL,(D.D919)
	LD	BC,I.004B
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J77D3
	LD	BC,I.001E
J77D3:	OR	A
	SBC	HL,BC
	LD	(D.D919),HL
	JR	J77F5

J77DB:	LD	HL,(D.D919)
	LD	BC,I.002D
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J77EA
	LD	BC,I.005A
J77EA:	ADD	HL,BC
	LD	(D.D919),HL
	LD	A,(D.D906)
	DEC	A
	LD	(D.D906),A
J77F5:	LD	HL,I.D9C7
	LD	(HL),1AH
	INC	HL
	LD	(HL),01H	; 1 
	DEC	HL
	LD	DE,I.3613
I77FF	EQU	$-2
I7800	EQU	$-1
	LD	A,02H	; 2 
	CALL	C7F74
	CALL	C7663
J7809:	CALL	C7F20
	JP	J771C

J780F:	INC	A
	LD	(D.D90E),A
	LD	A,(D.D905)
	DEC	A
	LD	(D.D905),A
	LD	HL,(D.D90B)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D90B),HL
	LD	HL,(D.D919)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D919),HL
	CALL	C7F20
	JP	J7743

J7832:	INC	A
	LD	(D.D907),A
	LD	A,(D.D90E)
	INC	A
	LD	(D.D90E),A
	LD	HL,(D.D90B)
	INC	HL
	INC	HL
	INC	HL
	LD	(D.D90B),HL
	CALL	C784F
	CALL	C7F20
	JP	J7722

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C784F:	LD	HL,I.D9C8
	LD	A,(HL)
	INC	A
	LD	(HL),A
	CP	0AH	; 10 
	JR	NZ,J7864
	LD	(HL),00H
	DEC	HL
	LD	A,(HL)
	CP	1AH
	JR	NZ,J7863
	LD	(HL),00H
J7863:	INC	(HL)
J7864:	LD	HL,I.D9C7
	LD	DE,I.3613
	LD	A,02H	; 2 
	CALL	C7F74
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7870:	PUSH	HL
	PUSH	DE
	PUSH	BC
	OR	A
	JP	NZ,J7949
	LD	HL,(D.D909)
	LD	DE,X.8000
	RST	20H
	JP	Z,J7544
	LD	A,(D.D905)
	OR	A
	JP	NZ,J7923
	LD	A,(D.D90D)
	OR	A
	JR	NZ,J78FE
	LD	A,27H	; "'"
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	H,0EH	; 14 
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J78A0
	LD	H,1DH
J78A0:	LD	A,H
	LD	(D.D905),A
	LD	(D.D907),A
	LD	HL,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	LD	A,(D.D906)
	OR	A
	JR	Z,J78D2
	DEC	A
	LD	(D.D906),A
	LD	(D.D908),A
	LD	HL,(D.D919)
	LD	BC,I.004B
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J78CF
	LD	BC,I.001E
J78CF:	ADD	HL,BC
	JR	J78E4

J78D2:	LD	HL,(D.D919)
	LD	BC,I.002D
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J78E1
	LD	BC,I.005A
J78E1:	OR	A
	SBC	HL,BC
J78E4:	LD	(D.D919),HL
	LD	HL,I.D9C7
	LD	(HL),04H	; 4 
	INC	HL
	LD	(HL),00H
	DEC	HL
	LD	DE,I.3613
	LD	A,02H	; 2 
	CALL	C7F74
	CALL	C75BB
	JP	J771C

J78FE:	DEC	A
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	HL,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	LD	HL,(D.D919)
	DEC	HL
	DEC	HL
	DEC	HL
	LD	(D.D919),HL
	CALL	C7A03
J791D:	CALL	C7DD9
	JP	J7722

J7923:	DEC	A
	LD	(D.D905),A
	LD	(D.D907),A
	LD	A,(D.D90D)
	DEC	A
	LD	(D.D90D),A
	LD	(D.D90E),A
	LD	HL,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	LD	(D.D909),HL
	LD	(D.D90B),HL
	CALL	C7A03
	CALL	C7F1A
	JP	J7722

J7949:	LD	HL,(D.D90B)
	LD	DE,(D.D909)
	DEC	HL
	DEC	HL
	DEC	HL
	RST	20H
	JP	C,J7544
	LD	(D.D90B),HL
	LD	A,(D.D907)
	OR	A
	JP	NZ,J79EF
	LD	A,(D.D90E)
	OR	A
	JR	NZ,J79D2
	LD	A,27H	; "'"
	LD	(D.D90E),A
	LD	HL,I$190E
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7978
	LD	HL,I$0A1D
J7978:	LD	A,(D.D905)
	SUB	H
	LD	(D.D905),A
	LD	A,L
	LD	(D.D907),A
	LD	A,(D.D908)
	OR	A
	JR	NZ,J79A4
	LD	A,(D.D906)
	INC	A
	LD	(D.D906),A
	LD	HL,(D.D919)
	LD	BC,I.002D
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J799F
	LD	BC,I.005A
J799F:	OR	A
	SBC	HL,BC
	JR	J79B8

J79A4:	DEC	A
	LD	(D.D908),A
	LD	HL,(D.D919)
	LD	BC,I.004B
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J79B7
	LD	BC,I.001E
J79B7:	ADD	HL,BC
J79B8:	LD	(D.D919),HL
	LD	HL,I.D9C7
	LD	(HL),04H	; 4 
	INC	HL
	LD	(HL),00H
	DEC	HL
	LD	DE,I.3613
	LD	A,02H	; 2 
	CALL	C7F74
	CALL	C75BB
	JP	J7809

J79D2:	DEC	A
	LD	(D.D90E),A
	LD	A,(D.D905)
	INC	A
	LD	(D.D905),A
	LD	HL,(D.D919)
	DEC	HL
	DEC	HL
	DEC	HL
	LD	(D.D919),HL
	CALL	C7A03
	CALL	C7F20
	JP	J791D

J79EF:	DEC	A
	LD	(D.D907),A
	LD	A,(D.D90E)
	DEC	A
	LD	(D.D90E),A
	CALL	C7A03
	CALL	C7F20
	JP	J7722

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7A03:	LD	HL,I.D9C8
	DEC	(HL)
	LD	A,(HL)
	CP	0FFH
	JR	NZ,J7A14
	LD	(HL),09H	; 9 
	DEC	HL
	DEC	(HL)
	JR	NZ,J7A14
	LD	(HL),1AH
J7A14:	LD	HL,I.D9C7
	LD	DE,I.3613
	LD	A,02H	; 2 
	CALL	C7F74
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7A20:	PUSH	HL
	PUSH	BC
	LD	HL,I$0213
	LD	BC,I$D9AD
	LD	A,44H	; "D"
	LD	(D.DAD9),A
	CALL	C7BB9			; display string
	XOR	A
	LD	(D.DAD9),A
	POP	BC
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7A37:	PUSH	HL
	PUSH	DE
	PUSH	AF
	LD	HL,C.0014
	LD	DE,I4004
	LD	A,0C0H
	CALL	C7F02
	POP	AF
	POP	DE
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7A49:	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL
	XOR	A
	LD	(D.DAD9),A
	LD	D,01H	; 1 
	LD	A,B
	OR	C
	JR	Z,J7A6F
	LD	A,(D.D905)
	LD	D,A
	ADD	A,A
	ADD	A,D
	CALL	C7CFD
	LD	H,B
	LD	L,C
	LD	BC,I.0078
	LD	D,01H	; 1 
	OR	A
J7A68:	SBC	HL,BC
	JR	C,J7A6F
	INC	D
	JR	J7A68

J7A6F:	LD	A,(D.D905)
	LD	E,A
	ADD	A,A
	ADD	A,E
	LD	HL,(D.D909)
	CALL	C7D04
	PUSH	HL
	POP	IX
	LD	A,(D.D906)
	LD	B,A
	ADD	A,D
	LD	D,A
	ADD	A,A
	ADD	A,D
	CP	11H	; 17 
	JR	C,J7A8C
	LD	A,10H	; 16 
J7A8C:	LD	C,A
	LD	A,B
	ADD	A,A
	ADD	A,B
	LD	L,A
	JR	J7AAA

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7A93:	PUSH	AF
	PUSH	BC
	PUSH	DE
	PUSH	HL
	CALL	C7E18
	CALL	C7C2C
	LD	A,0FFH
	LD	(D.DB0E),A
	LD	IX,(D.D919)
	LD	L,00H
	LD	C,10H	; 16 
J7AAA:	PUSH	BC
	PUSH	IX
	LD	H,02H	; 2 
	LD	B,0FH	; 15 
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7AB9
	LD	B,1EH
J7AB9:	LD	A,(IX+0)
	LD	E,(IX+1)
	LD	D,(IX+2)
	CALL	C7AE5
	INC	IX
	INC	IX
	INC	IX
	DJNZ	J7AB9
	POP	IX
	LD	BC,I.0078
	ADD	IX,BC
	POP	BC
	INC	L
	INC	L
	INC	L
	LD	A,L
	CP	C
	JR	C,J7AAA
	XOR	A
	LD	(D.DB0E),A
	POP	HL
	POP	DE
	POP	BC
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7AE5:	CP	0FCH
	JR	NC,J7AF0
	BIT	6,A
	CALL	NZ,C7EF6
	JR	NZ,J7AFC
J7AF0:	PUSH	AF
	LD	A,(D.DA8F)
	OR	A
	CALL	Z,C7EE4
	CALL	NZ,C7EEA
	POP	AF
J7AFC:	PUSH	DE
	LD	D,A
	LD	A,(D.DB0E)
	OR	A
	LD	A,D
	POP	DE
	JR	NZ,J7B0F
J7B06:	CP	0FCH
	JP	C,J7EFC
	XOR	A
	JP	J7EFC

J7B0F:	OR	A
	RET	Z
	JR	J7B06

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7B13:	PUSH	AF
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	A,(D.DA8F)
	OR	A
	CALL	Z,C7EE4
	CALL	NZ,C7EEA
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7B25:	PUSH	AF
	PUSH	BC
	CALL	C7B41
	LD	HL,I.D955
	LD	DE,I.D95D
	LD	B,8
J7B32:	LD	C,(HL)
	LD	A,(DE)
	LD	(HL),A
	LD	A,C
	LD	(DE),A
	INC	HL
	INC	DE
	DJNZ	J7B32
	LD	DE,I.D94D
	POP	BC
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  HL = kanji code ?
;	     Outputs ________________________

C7B41:	LD	A,H
	CP	0FFH
	JR	NZ,J7B5B
	LD	B,5
J7B48:	SLA	L
	RL	H
	DJNZ	J7B48
	RES	7,H
	LD	DE,I.D94D
	LD	BC,32
	CALL	C7C20			; copy from/to lower 32KB RAM
	JR	J7B7B

J7B5B:	AND	0F0H
	JP	NZ,J7E1E
	SLA	L
	RL	H
	SLA	L
	RL	H
	RRC	L
	RRC	L
	LD	A,H
	OUT	(0D9H),A
	LD	A,L
	OUT	(0D8H),A
	LD	B,32
	LD	C,0D9H
	LD	HL,I.D94D
	INIR
J7B7B:	LD	DE,I.D94D
	RET

J7B7F:	CALL	C7C38
	JP	J63E4

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7B85:	LD	A,0CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,2 and 0 (RAM), secunairy slot 3 on page 1 (FIRMWARE)
	PUSH	BC
	PUSH	DE
	PUSH	HL
	PUSH	IX
	POP	HL
	LD	BC,6
	LD	DE,I$F5A0
	PUSH	DE
	LDIR
	POP	IX
	POP	HL
	POP	DE
	POP	BC
J7B9E:	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BA4:	LD	A,0CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,2 and 0 (RAM), secunairy slot 3 on page 1 (FIRMWARE)
	PUSH	IX
	POP	HL
	DEC	HL
	DEC	HL
	DEC	HL
	LD	BC,I$007E
	LD	DE,I.F528
	LDIR
	JR	J7B9E

;	  Subroutine display string
;	     Inputs  ________________________
;	     Outputs ________________________

C7BB9:	EXX
	LD	HL,C98E3
	JP	J7BE2			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BC0:	EXX
	LD	HL,IA2EB
	JR	J7BE2			; call routine in segment 0 and quit

?7BC6:	EXX
	LD	HL,CA125
	JR	J7BE2			; call routine in segment 0 and quit

?7BCC:	EXX
	LD	HL,CA0F1
	JR	J7BE2			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BD2:	EXX
	LD	HL,I9C93
	JR	J7BE2			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BD8:	EXX
	LD	HL,J98EF
	JR	J7BE2			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BDE:	EXX
	LD	HL,J995F
J7BE2:	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BE4:	EXX
	LD	HL,I99C3
	JR	J7C30			; call routine in segment 0 and quit

?7BEA:	EXX
	LD	HL,J9A06
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BF0:	EXX
	LD	HL,I9A58
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BF6:	EXX
	LD	HL,I9AC3
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7BFC:	EXX
	LD	HL,I9B80
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C02:	EXX
	LD	HL,I9BBA
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C08:	EXX
	LD	HL,J9BF5
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine operate selection menu
;	     Inputs  ________________________
;	     Outputs ________________________

C7C0E:	EXX
	LD	HL,C9351		; operate selection menu
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C14:	EXX
	LD	HL,I9222
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C1A:	EXX
	LD	HL,I93E6
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine copy from/to lower 32KB RAM
;	     Inputs  ________________________
;	     Outputs ________________________

C7C20:	EXX
	LD	HL,X.8000
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C26:	EXX
	LD	HL,I9866
	JR	J7C30			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C2C:	EXX
	LD	HL,I9838
J7C30:	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C32:	EXX
	LD	HL,J9D10
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C38:	EXX
	LD	HL,I95E1
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C3E:	EXX
	LD	HL,C98CD
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C44:	EXX
	LD	HL,C98C1
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C4A:	EXX
	LD	HL,C8023
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C50:	EXX
	LD	HL,C8D9B
	JR	J7C78			; call routine in segment 0 and quit

?7C56:	EXX
	LD	HL,I8CE6
	JR	J7C78			; call routine in segment 0 and quit

?7C5C:	EXX
	LD	HL,I8FAF
	JR	J7C78			; call routine in segment 0 and quit

?7C62:	EXX
	LD	HL,C8C65
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C68:	EXX
	LD	HL,I907C
	JR	J7C78			; call routine in segment 0 and quit

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7C6E:	EXX
	LD	HL,IA290
	JR	J7C78			; call routine in segment 0 and quit

?7C74:	EXX
	LD	HL,J80FC

;	  Subroutine call routine in segment 0
;	     Inputs  ________________________
;	     Outputs ________________________

J7C78:	EXX
	PUSH	HL
	PUSH	AF
	LD	A,(D.7FFF)
	LD	(D.DAD0),A
	AND	0FCH			; select segment 0 ??
J7C83:	LD	(D.7FFF),A
	LD	A,(D.DAD0)
	LD	H,A
	POP	AF
	EX	(SP),HL			; save old segment
	PUSH	IX
	EXX
	PUSH	HL
	EXX
	POP	IX			; address
	PUSH	IY
	LD	IY,08F00H		; slot 3-3
	CALL	CALSLT
	EI
	POP	IY
	POP	IX
	EX	(SP),HL
	PUSH	AF			; old segment
	LD	A,H
	LD	(D.7FFF),A		; restore segment
	POP	AF
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CAA:	EXX
	LD	HL,X.8000
	JR	J7CC6			; call routine in segment 1

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CB0:	EXX
	LD	HL,I8041
	JR	J7CC6			; call routine in segment 1

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CB6:	EXX
	LD	HL,I8096
	JR	J7CC6			; call routine in segment 1

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CBC:	EXX
	LD	HL,I80C6
	JR	J7CC6			; call routine in segment 1

?7CC2:	EXX
	LD	HL,I8163

;	  Subroutine call routine in segment 1
;	     Inputs  ________________________
;	     Outputs ________________________

J7CC6:	EXX
	PUSH	HL
	PUSH	AF
	LD	A,(D.7FFF)
	LD	(D.DAD0),A
	AND	0FCH
	OR	01H			; select segment 1 ??
	JP	J7C83

;	  Subroutine read byte from RAM
;	     Inputs  HL = address
;	     Outputs A = byte

C7CD6:	LD	A,83H			; slot 3-0 (RAM)
	PUSH	BC
	PUSH	DE
	CALL	RDSLT
	POP	DE
	POP	BC
	RET

;	  Subroutine write byte to RAM
;	     Inputs  DE = address, A = byte
;	     Outputs ________________________

C7CE0:	PUSH	BC
	PUSH	DE
	PUSH	HL
	LD	H,D
	LD	L,E
	LD	E,A
	LD	A,83H			; slot 3-0 (RAM)
	CALL	WRSLT
	POP	HL
	POP	DE
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CEF:	ADD	A,L
	LD	L,A
	LD	A,00H
	ADC	A,H
	LD	H,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CF6:	ADD	A,E
	LD	E,A
	LD	A,00H
	ADC	A,D
	LD	D,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7CFD:	ADD	A,C
	LD	C,A
	LD	A,00H
	ADC	A,B
D$7D02:	LD	B,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7D04:	PUSH	DE
	LD	E,A
	LD	D,00H
	OR	A
I7D09:	SBC	HL,DE
	POP	DE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7D0D:	PUSH	HL
	EX	DE,HL
	LD	E,A
	LD	D,00H
	OR	A
	SBC	HL,DE
	EX	DE,HL
	POP	HL
	RET

?7D18:	PUSH	HL
	LD	H,B
	LD	L,C
	LD	C,A
	LD	B,00H
	SBC	HL,BC
	LD	B,H
	LD	C,L
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7D24:	LD	HL,I400F
	LD	BC,J4012
	LD	DE,I400F
	CALL	C7EDE
	CALL	C7C2C
	LD	IX,(D.D919)
	LD	HL,I.0200
J7D3A:	LD	B,0FH	; 15 
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7D44
	LD	B,1EH
J7D44:	LD	A,(IX+0)
	LD	E,(IX+1)
	LD	D,(IX+2)
	CALL	C7AE5
	INC	IX
	INC	IX
	INC	IX
	DJNZ	J7D44
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7D59:	LD	HL,I.0003
	LD	BC,X.0000
	LD	DE,I400F
	CALL	C7ED8
	XOR	A
	LD	(D.DAD9),A
	CALL	C7C2C
	LD	HL,I.0078
	LD	A,L
	ADD	HL,HL
	ADD	HL,HL
	CALL	C7CEF
	LD	DE,(D.D919)
	ADD	HL,DE
	PUSH	HL
	POP	IX
	LD	HL,I$020F
	JP	J7D3A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7D83:	LD	HL,I.0600
	LD	BC,I.0200
	LD	DE,I.3812
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7D96
	LD	H,04H	; 4 
	LD	D,3AH	; ":"
J7D96:	CALL	C7ED8
	CALL	C7C2C
	LD	HL,(D.D919)
	LD	A,(D.DA8F)
	OR	A
	LD	A,2AH	; "*"
	LD	DE,I$3A00
	JR	Z,J7DAF
	LD	A,57H	; "W"
	LD	DE,I$3C00
J7DAF:	CALL	C7CEF
	PUSH	HL
	POP	IX
	EX	DE,HL
J7DB6:	LD	B,06H	; 6 
J7DB8:	LD	A,(IX+0)
	LD	E,(IX+1)
	LD	D,(IX+2)
	CALL	C7AE5
	LD	DE,I.0078
	ADD	IX,DE
	INC	L
	INC	L
	INC	L
	DEC	H
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J7DD6
	DEC	H
	DEC	H
J7DD6:	DJNZ	J7DB8
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7DD9:	LD	HL,I.3A12
	LD	BC,I$3E12
	LD	DE,I.3812
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J7DEC
	LD	H,3CH	; "<"
	LD	D,3AH	; ":"
J7DEC:	CALL	C7EDE
	CALL	C7C2C
	LD	IX,(D.D919)
	LD	HL,I.0200
	JP	J7DB6

?7DFC:	LD	A,0CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,2 and 0 (RAM), secunairy slot 3 on page 1 (FIRMWARE)
	LD	D,H
	LD	E,L
	LD	(HL),00H
	INC	HL
	LD	(HL),25H	; "%"
	INC	HL
	LD	(HL),01H	; 1 
	INC	HL
	EX	DE,HL
	LD	BC,I4F35
	LDIR
	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E18:	EXX
	LD	HL,D.8062
	JR	J7E46			; call routine in segment 3

J7E1E:	EXX
	LD	HL,IA747
	JR	J7E46			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E24:	EXX
	LD	HL,IA363
	JR	J7E46			; call routine in segment 3

J7E2A:	EXX
	LD	HL,IA426
	JR	J7E46			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E30:	EXX
	LD	HL,I9A21
	JR	J7E46			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E36:	EXX
	LD	HL,I8170
	JR	J7E46			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E3C:	EXX
	LD	HL,I9E08
	JR	J7E46			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E42:	EXX
	LD	HL,I9AC8
J7E46:	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E48:	EXX
	LD	HL,I9C13
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E4E:	EXX
	LD	HL,I9F18
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E54:	EXX
	LD	HL,I9F74
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E5A:	EXX
	LD	HL,I9DE5
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E60:	EXX
	LD	HL,I9DC1
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E66:	EXX
	LD	HL,I9265
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E6C:	EXX
	LD	HL,I92F3
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E72:	EXX
	LD	HL,I9374
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E78:	EXX
	LD	HL,I93EE
	JR	J7EBE			; call routine in segment 3

J7E7E:	EXX
	LD	HL,I946A
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E84:	EXX
	LD	HL,I9485
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E8A:	EXX
	LD	HL,I94D7
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E90:	EXX
	LD	HL,I950D
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E96:	EXX
	LD	HL,I956C
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7E9C:	EXX
	LD	HL,I911F
	JR	J7EBE			; call routine in segment 3

J7EA2:	EXX
	LD	HL,I8F16
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EA8:	EXX
	LD	HL,I95AA
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EAE:	EXX
	LD	HL,I9591
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EB4:	EXX
	LD	HL,I95C3
	JR	J7EBE			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EBA:	EXX
	LD	HL,I9624
J7EBE:	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EC0:	EXX
	LD	HL,I9764
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EC6:	EXX
	LD	HL,I969C
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7ECC:	EXX
	LD	HL,I9702
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7ED2:	EXX
	LD	HL,I957B
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7ED8:	EXX
	LD	HL,I8637
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EDE:	EXX
	LD	HL,I866A
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EE4:	EXX
	LD	HL,I8239
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EEA:	EXX
	LD	HL,J81D3
	JR	J7F36			; call routine in segment 3

;	  Subroutine display character
;	     Inputs  ________________________
;	     Outputs ________________________

C7EF0:	EXX
	LD	HL,I82A4
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7EF6:	EXX
	LD	HL,I8368
	JR	J7F36			; call routine in segment 3

J7EFC:	EXX
	LD	HL,I83AC
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F02:	EXX
	LD	HL,D.80CE
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F08:	EXX
	LD	HL,I81C4
	JR	J7F36			; call routine in segment 3

?7F0E:	EXX
	LD	HL,I86AA
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F14:	EXX
	LD	HL,I87DB
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F1A:	EXX
	LD	HL,I871A
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F20:	EXX
	LD	HL,I8786
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F26:	EXX
	LD	HL,I8799
	JR	J7F36			; call routine in segment 3

?7F2C:	EXX
	LD	HL,I87F3
	JR	J7F36			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F32:	EXX
	LD	HL,I8800
J7F36:	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F38:	EXX
	LD	HL,I8823
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F3E:	EXX
	LD	HL,I8845
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F44:	EXX
	LD	HL,I882B
	JR	J7F92			; call routine in segment 3

?7F4A:	EXX
	LD	HL,I81A8
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F50:	EXX
	LD	HL,D.80BE
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F56:	EXX
	LD	HL,I807F
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F5C:	EXX
	LD	HL,X.8000
	JR	J7F92			; call routine in segment 3

?7F62:	EXX
	LD	HL,J8188
	JR	J7F92			; call routine in segment 3

?7F68:	EXX
	LD	HL,I817B
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F6E:	EXX
	LD	HL,I8195
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F74:	EXX
	LD	HL,I828F
	JR	J7F92			; call routine in segment 3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C7F7A:	EXX
	LD	HL,I885F
	JR	J7F92			; call routine in segment 3

J7F80:	EXX
	LD	HL,I8894
	JR	J7F92			; call routine in segment 3

J7F86:	EXX
	LD	HL,I8DC0
	JR	J7F92			; call routine in segment 3

J7F8C:	EXX
	LD	HL,I8EEC
	JR	J7F92			; call routine in segment 3

;	  Subroutine call routine in segment 3
;	     Inputs  ________________________
;	     Outputs ________________________

J7F92:	EXX
	PUSH	HL
	PUSH	AF
	LD	A,(D.7FFF)
	LD	(D.DAD0),A
	AND	0FCH
	OR	03H			; select segment 3 ??
	JP	J7C83

?7FA2:	NOP
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I$3700
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4600
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I$3400
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4100
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I$2000
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4800
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4100
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4E00
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4300
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I4800
	LD	B,B
	LD	BC,I.0900
	LD	B,B
	LD	BC,I$C300
	LD	H,C
	LD	H,D
	DEFB	0,0
D.7FFF:	SBC	A,H

X.8000:	DI
D.8001:	LD	A,30H
D$8003:	LD	(D.FFFF),A		; secundairy slot 0 on page 3,1 and 0 (RAM), secundairy slot 3 on page 2 (FIRMWARE)
D$8006:	LDIR
D$8008:	LD	A,3CH
D$800A:	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
D.800D:	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

X.800F:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	LD	HL,I.0015
	LD	DE,I4002
	LD	A,0C0H
	CALL	C7F02
	POP	AF
	POP	BC
	POP	DE
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8023:	LD	IX,I.FFC0
J8027:	CALL	X.800F
	LD	HL,I.0215
	LD	B,0AH	; 10 
	PUSH	IX
	POP	DE
	LD	A,0CCH
	LD	(D.DAD9),A
J8037:	CALL	C7B13
	INC	DE
	LD	A,(D.DA8E)
	OR	A
	JR	NZ,J8045
I8040	EQU	$-1
I8041:	LD	A,D
	OR	E
	JR	Z,J8051
J8045:	INC	H
	INC	H
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J804F
	INC	H
	INC	H
J804F:	DJNZ	J8037
J8051:	LD	A,16H
	LD	(D.D9E1),A
	LD	A,01H	; 1 
	LD	(D.D9E0),A
J805B:	CALL	C7F26
	CALL	C74AE			; get keyboard input
D$8060	EQU	$-1
D$8061:	JR	NC,J8070		; not aborted,
D.8062	EQU	$-1
J8063:	PUSH	AF
	CALL	X.800F
	CALL	C7F38
	XOR	A
	LD	(D.DAD9),A
	POP	AF
	RET

J8070:	LD	HL,D.D9E0
	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J8081		; nope,
	LD	A,1CH
I8078	EQU	$-1
	CP	(HL)
	JR	Z,X.80DB
	INC	(HL)
	INC	(HL)
	INC	(HL)
I807F:	JR	J805B

J8081:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J808F		; nope,
	LD	A,01H	; 1 
	CP	(HL)
	JR	Z,X.80DB
	DEC	(HL)
	DEC	(HL)
	DEC	(HL)
	JR	J805B

J808F:	PUSH	IX
	POP	DE
	CP	1EH			; CURSOR UP ?
	JR	NZ,X.80B8		; nope,
I8096:	LD	A,(D.DA8E)
	OR	A
	JR	NZ,J80A1
	LD	A,E
	CP	0C0H
	JR	Z,X.80DB
D.80A0	EQU	$-1
J80A1:	PUSH	HL
D.80A2:	LD	HL,I.FFC0
D.80A3	EQU	$-2
D.80A4	EQU	$-1
D.80A5:	RST	20H
	POP	HL
D.80A7:	JR	NZ,X.80B0
D.80A9:	LD	IX,I.0FCE
D.80AB	EQU	$-2
D.80AD:	JP	J8027
D.80AF	EQU	$-1

X.80B0:	LD	DE,-10
D.80B1	EQU	$-2
D.80B2	EQU	$-1
X.80B3:	ADD	IX,DE
D.80B4	EQU	$-1
D.80B5:	JP	J8027
D.80B6	EQU	$-2
D.80B7	EQU	$-1

X.80B8:	CP	1FH			; CURSOR DOWN ?
D.80B9	EQU	$-1
	JR	NZ,J80E1		; nope,
	LD	A,(D.DA8E)
D.80BE	EQU	$-1
	OR	A
D.80C0:	JR	NZ,J80C7
	LD	A,E
D.80C3:	CP	0FCH
D.80C4	EQU	$-1
	JR	Z,X.80DB
I80C6	EQU	$-1
J80C7:	PUSH	HL
D.80C8:	LD	HL,I.0FCE
D.80C9	EQU	$-2
D.80CA	EQU	$-1
D.80CB:	RST	20H
	POP	HL
D.80CD:	JR	NZ,X.80D6
D.80CE	EQU	$-1
D.80CF:	LD	IX,I.FFC0
D.80D0	EQU	$-3
D.80D2	EQU	$-1
	JP	J8027
D.80D4	EQU	$-2

X.80D6:	LD	DE,C.000A
D.80D8	EQU	$-1
	JR	X.80B3
D.80DA	EQU	$-1

X.80DB:	CALL	C61D3			; beep
	JP	J805B
I80E0	EQU	$-1

J80E1:	CP	0DH			; RETURN ?
	JR	NZ,X.80DB		; nope,
D.80E5:	LD	A,(HL)
J80E6:	DEC	A
	JR	Z,J80EE
	INC	DE
	DEC	A
	DEC	A
	JR	J80E6

J80EE:	LD	A,(D.DA8E)
I80F0	EQU	$-1
D$80F1:	OR	A
D$80F2:	JP	NZ,J8063
I80F3	EQU	$-2
	LD	A,D
	OR	A
	JR	Z,X.80DB
	JP	J8063

J80FC:	CALL	C7F56
	LD	HL,I.0200
I8100	EQU	$-2
J8101	EQU	$-1
	LD	DE,I.2002
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I88F7
I8110:	CALL	C98C1
	LD	HL,J.0002
I8114	EQU	$-2
	LD	DE,I$3E16
I8118	EQU	$-1
	LD	A,0C0H
	CALL	C7F50
I811C	EQU	$-2
	LD	HL,I$1A15
D.8120	EQU	$-1
	LD	DE,I$2403
D.8122	EQU	$-2
	XOR	A
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	DE,I.FFC0
	LD	L,03H	; 3 
X.8132:	LD	B,0AH	; 10 
D.8133	EQU	$-1
D.8134:	LD	A,(D.DA8F)
D.8135	EQU	$-2
I8136	EQU	$-1
	LD	H,02H	; 2 
I8138	EQU	$-1
	OR	A
D.813A:	JR	Z,J813E
D.813B	EQU	$-1
D.813C:	LD	H,10H	; 16 
D.813D	EQU	$-1
J813E:	CALL	C7B13
D.813F	EQU	$-2

I8140	EQU	$-1
I8141:	INC	H
I8142:	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J8149
	INC	H
J8149:	INC	DE
	DJNZ	J813E
	INC	L
	INC	L
	INC	L
	LD	A,15H
	CP	L
	JR	NZ,X.8132
	LD	B,04H	; 4 
	LD	A,(D.DA8F)
	LD	H,02H	; 2 
	OR	A
	JR	Z,J8160
	LD	H,10H	; 16 
J8160:	CALL	C7B13
I8163:	INC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J816B
	INC	H
J816B:	INC	DE
	DJNZ	J8160
	LD	HL,I$2A00
I8170	EQU	$-1
	LD	DE,I$1402
	LD	A,40H	; "@"
	CALL	C7F50
	LD	HL,I$2C00
I817B	EQU	$-1
	LD	BC,I8A21
	CALL	C98C1
	LD	BC,X.0000
	LD	HL,J.0002
J8188:	PUSH	BC
	PUSH	HL
J818A:	CALL	C81F9
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	POP	HL
	POP	BC
I8195:	RET	C			; aborted, quit
	CALL	C81F9
	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J81B2		; nope,
	LD	A,H
	CP	36H	; "6"
	JR	Z,J81F2
	CP	12H	; 18 
	JR	NZ,J81AB
	LD	A,14H	; 20 
I81A8:	CP	L
	JR	Z,J81F2
J81AB:	INC	C
	LD	A,06H	; 6 
	ADD	A,H
	LD	H,A
	JR	J8188

J81B2:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J81C1		; nope,
	XOR	A
	CP	H
	JR	Z,J81F2
	DEC	C
	LD	A,0FAH
	ADD	A,H
	LD	H,A
	JR	J8188

J81C1:	CP	1EH			; CURSOR UP ?
	JR	NZ,J81D3		; nope,
I81C4	EQU	$-1
	LD	A,02H	; 2 
	CP	L
	JR	Z,J81F2
	LD	A,C
	SUB	0AH	; 10 
	LD	C,A
	DEC	L
	DEC	L
	DEC	L
	JR	J8188

J81D3:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J81EE		; nope,
	LD	A,L
	CP	14H	; 20 
	JR	Z,J81F2
	CP	11H	; 17 
	JR	NZ,J81E5
	LD	A,16H
	CP	H
	JR	C,J81F2
J81E5:	LD	A,0AH	; 10 
	ADD	A,C
	LD	C,A
	INC	L
	INC	L
	INC	L
	JR	J8188

J81EE:	CP	0DH			; RETURN ?
	JR	Z,J8208			; yep,
J81F2:	PUSH	BC
	PUSH	HL
	CALL	C61D3			; beep
	JR	J818A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C81F9:	PUSH	AF
	PUSH	BC
	PUSH	HL
	LD	DE,I$0804
	LD	A,0F3H
I8200	EQU	$-1
	CALL	C7F50
	POP	HL
	POP	BC
	POP	AF
	RET

J8208:	LD	A,C
	LD	B,C
	LD	HL,X.0000
	OR	A
	JR	Z,J8216
	LD	D,H
	LD	E,20H	; " "
J8213:	ADD	HL,DE
	DJNZ	J8213
J8216:	LD	DE,I7800
	ADD	HL,DE
	PUSH	HL
	LD	DE,I.FFC0
	CALL	C7CF6
	XOR	A
	LD	HL,C.0018
	CALL	C7B13
	LD	BC,32
	LD	HL,I.D94D
	LD	DE,I.F5B0
	LDIR
	LD	HL,(D.D909)
	CALL	C7CD6			; read byte from RAM
I8239:	PUSH	AF
	INC	HL
	CALL	C7CD6			; read byte from RAM
	LD	E,A
	INC	HL
	CALL	C7CD6			; read byte from RAM
	LD	D,A
	POP	AF
	CP	0FCH
	JR	NC,J824D
	AND	40H	; "@"
	JR	J824E

J824D:	XOR	A
J824E:	LD	HL,C.0018
	BIT	6,A
	CALL	Z,C7EEA
	CALL	NZ,C7EF6
	LD	HL,I.D94D
	LD	BC,32
	LD	DE,I.F5D0
	LDIR
	CALL	C7F56
	LD	HL,I.0400
	LD	DE,I.2002
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0600
	LD	BC,I88F7
	CALL	C98C1
	LD	HL,I$2803
	LD	DE,I.1407
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I$280B
	LD	DE,I.1407
	LD	A,0C0H
	CALL	C7F50
I828F	EQU	$-2
	LD	HL,I.0015
	LD	DE,I4002
	LD	A,0C0H
	CALL	C7F02
	LD	HL,I$2A04
	LD	BC,I8A2B
	CALL	C98C1
I82A4	EQU	$-1
	LD	HL,I$2A0C
	LD	BC,I8A61
	CALL	C98C1
	LD	HL,X.0000
	PUSH	HL
J82B2:	XOR	A
	LD	(D.DAD9),A
	LD	HL,I$0417
	LD	DE,I8601
	LD	B,1CH
J82BE:	LD	A,(DE)
	CALL	C7EF0			; display character
	INC	DE
	DJNZ	J82BE
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	HL,I$3007
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J82D5
	LD	H,27H	; "'"
J82D5:	LD	DE,I.F5D0
	CALL	C7F08
	POP	HL
J82DC:	CALL	C8549
J82DF:	CALL	C84F7
	PUSH	HL
	CALL	C74AE			; get keyboard input
	POP	HL
	JR	NC,J82ED		; not aborted,
	POP	BC
	JP	J80FC

J82ED:	CALL	C84F7
	CP	0DH			; RETURN ?
	JR	NZ,J82F8		; nope,
	LD	L,00H
	JR	J8344

J82F8:	CP	0BH			; HOME ?
	JR	NZ,J8301		; nope,
	LD	HL,X.0000
	JR	J82DC
I8300	EQU	$-1

J8301:	CP	0CH			; SHIFT-HOME ?
	JP	Z,J83AA			; yep,
	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J831C		; nope,
	LD	A,(OLDKEY+6)
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J85C8			; yep,
	INC	L
	LD	A,L
	CP	10H	; 16 
	JR	NZ,J82DF
	LD	L,0FH	; 15 
	JR	J82DF

J831C:	CP	1DH			; CURSOR RIGHT ?
	JR	NZ,J832A		; nope,
	DEC	L
	LD	A,L
	CP	0FFH
	JR	NZ,J82DF
	LD	L,00H
	JR	J82DF

J832A:	CP	1EH			; CURSOR UP ?
	JR	NZ,J8340		; nope,
	LD	A,(OLDKEY+6)
	CP	0FEH			; SHIFT pressed ?
	JP	Z,J85E6			; yep,
	DEC	H
	LD	A,H
	CP	0FFH
	JR	NZ,J82DF
	LD	H,00H
	JR	J82DF

J8340:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J834E		; nope,
J8344:	INC	H
	LD	A,H
	CP	10H	; 16 
	JR	NZ,J82DF
	LD	H,0FH	; 15 
	JR	J82DF

J834E:	CP	20H			; SPACE ?
	JR	NZ,J8375		; nope,
	LD	D,00H
	LD	A,08H	; 8 
	AND	L
	JR	Z,J835B
	LD	D,10H	; 16 
J835B:	LD	A,H
	ADD	A,D
	LD	DE,I.F5B0
	CALL	C7CF6
	LD	C,80H
	LD	A,L
	AND	07H	; 7 
I8368:	JR	Z,J836F
	LD	B,A
J836B:	SRL	C
	DJNZ	J836B
J836F:	LD	A,(DE)
	XOR	C
	LD	(DE),A
	JP	J82DC

J8375:	CP	01H			; CTRL-A ?
	JR	Z,J83DA			; yep,
	CP	18H			; SELECT ?
	JR	NZ,J83A4		; nope,
	LD	(D.DA8E),A
	PUSH	HL
	LD	HL,I$0017
	LD	DE,I4001
	XOR	A
	CALL	C7F02
	CALL	C8023
	JR	C,J839D
	EX	DE,HL
	CALL	C7B25
	LD	BC,32
	LD	HL,I.F5D0
	EX	DE,HL
	LDIR
J839D:	XOR	A
	LD	(D.DA8E),A
	JP	J82B2

J83A4:	CALL	C61D3			; beep
	JP	J82DF

J83AA:	LD	BC,I8A51
I83AC	EQU	$-1
	CALL	C83C3
	CALL	X.800F
	JP	C,J82DF
	LD	DE,I.F5B0
	LD	B,20H	; " "
J83BB:	XOR	A
	LD	(DE),A
	INC	DE
	DJNZ	J83BB
	JP	J82DC

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C83C3:	PUSH	HL
	LD	HL,I.0215
	CALL	C98CD
	LD	BC,I8671
	CALL	C98CD
	POP	HL
J83D1:	CALL	C74AE			; get keyboard input
	RET	C			; aborted, quit
	CP	0DH			; RETURN ?
	RET	Z			; yep, quit
	JR	J83D1

J83DA:	CALL	C74AE			; get keyboard input
	CP	0F0H
	JR	C,J83A4
	CP	0F5H
	JR	NC,J83A4
	PUSH	HL
	AND	0FH	; 15 
	LD	HL,I83F5
	SLA	A
	CALL	C7CEF
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	PUSH	DE
	RET

I83F5:	ADD	HL,SP
	ADD	A,H
	SUB	(HL)
	ADD	A,H
	RST	38H
	ADD	A,E
	OR	A
	ADD	A,H
	PUSH	BC
	ADD	A,H
	LD	DE,I.F5B0
	LD	HL,I.D95D
	CALL	C8427
	LD	HL,I.D94D
	CALL	C8427
	LD	HL,I$D965
	CALL	C8427
	LD	HL,I.D955
	CALL	C8427
	LD	HL,I.D94D
	LD	DE,I.F5B0
	LD	BC,32
	LDIR
	JR	J8464

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8427:	LD	C,08H	; 8 
J8429:	LD	B,08H	; 8 
	LD	A,(DE)
	PUSH	HL
J842D:	RLA
	RR	(HL)
	INC	HL
	DJNZ	J842D
	INC	DE
	POP	HL
	DEC	C
	JR	NZ,J8429
	RET

?8439:	LD	BC,I8A35
	LD	HL,I.0215
	CALL	C98CD
	LD	BC,I8671
	CALL	C98CD
J8448:	CALL	C74AE			; get keyboard input
	JP	C,J8464			; aborted,
	LD	HL,I.F5D0
	LD	DE,I.F5B0
	CP	0DH			; RETURN ?
	JR	NZ,J846B		; nope,
	LD	BC,32
	LDIR
J845D:	POP	HL
	CALL	X.800F
	JP	J82DC

J8464:	POP	HL
	CALL	X.800F
	JP	J82DC

J846B:	LD	B,20H	; " "
	RES	5,A
	CP	"O"
	JR	NZ,J847C
J8473:	LD	A,(DE)
	OR	(HL)
	LD	(DE),A
	INC	HL
	INC	DE
	DJNZ	J8473
	JR	J845D

J847C:	CP	"X"
	JR	NZ,J8489
J8480:	LD	A,(DE)
	XOR	(HL)
	LD	(DE),A
	INC	HL
	INC	DE
	DJNZ	J8480
	JR	J845D

J8489:	CP	"A"
	JR	NZ,J8448
J848D:	LD	A,(DE)
	AND	(HL)
	LD	(DE),A
	INC	HL
	INC	DE
	DJNZ	J848D
	JR	J845D

?8496:	LD	HL,I.F5B0
	CALL	C84A4
	LD	HL,I.F5C0
	CALL	C84A4
	JR	J8464

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C84A4:	PUSH	HL
	POP	DE
	LD	A,0FH	; 15 
	CALL	C7CEF
	LD	B,08H	; 8 
J84AD:	LD	C,(HL)
	LD	A,(DE)
	LD	(HL),A
	LD	A,C
	LD	(DE),A
	INC	DE
	DEC	HL
	DJNZ	J84AD
	RET

?84B7:	LD	HL,I.F5B0
	LD	B,20H	; " "
J84BC:	LD	A,(HL)
	XOR	0FFH
	LD	(HL),A
	INC	HL
	DJNZ	J84BC
	JR	J8464

?84C5:	LD	BC,I8A43
	CALL	C83C3
	JR	C,J8464
	POP	HL
	POP	DE
	PUSH	DE
	PUSH	HL
	LD	HL,I.F5B0
	CALL	C84EC
	LD	HL,I.F5C0
	CALL	C84EC
	LD	HL,I$F5B8
	CALL	C84EC
	LD	HL,I$F5C8
	CALL	C84EC
	JP	J845D

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C84EC:	LD	B,8
J84EE:	LD	A,(HL)
	CALL	C7CE0			; write byte to RAM
	INC	HL
	INC	DE
	DJNZ	J84EE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C84F7:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	SLA	L
	SLA	L
	SLA	H
	SLA	H
	SLA	H
	LD	DE,I$1844
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J8512
	SLA	L
	LD	E,10H	; 16 
J8512:	ADD	HL,DE
	CALL	C7F3E
	IN	A,(98H)
	CP	44H	; "D"
	JR	Z,J8527
	CP	77H	; "w"
	JR	Z,J852A
	CP	66H	; "f"
	JR	Z,J852D
	LD	A,77H	; "w"
	LD	BC,I663E
J8527	EQU	$-2
	LD	BC,IBB3E
J852A	EQU	$-2
	LD	BC,I443E
J852D	EQU	$-2
	LD	D,A
	LD	E,07H	; 7 
J8532:	PUSH	AF
	LD	BC,I.0007
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J853E
	LD	C,03H	; 3 
J853E:	POP	AF
	CALL	C.016B
	LD	A,D
	INC	H
	DEC	E
	JR	NZ,J8532
	JR	J857D

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8549:	PUSH	HL
	PUSH	DE
	PUSH	BC
	PUSH	AF
	LD	HL,I$300F
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J8558
	LD	H,27H	; "'"
J8558:	LD	DE,I.F5B0
	CALL	C7F08
	LD	HL,I$1810
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J8569
	LD	L,44H	; "D"
J8569:	LD	DE,I.F5B0
	CALL	C8582
	LD	HL,I$1850
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J857A
	LD	L,64H	; "d"
J857A:	CALL	C8582
J857D:	POP	AF
	POP	BC
	POP	DE
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8582:	LD	C,10H	; 16 
J8584:	PUSH	HL
	LD	B,08H	; 8 
	LD	A,(DE)
J8588:	RLCA
	PUSH	AF
	LD	A,44H	; "D"
	JR	C,J8590
	LD	A,77H	; "w"
J8590:	PUSH	DE
	LD	D,A
	LD	E,07H	; 7 
	PUSH	BC
	PUSH	HL
J8596:	LD	BC,I.0007
	LD	A,(D.DA8F)
	OR	A
	JR	Z,J85A1
	LD	C,03H	; 3 
J85A1:	LD	A,D
	CALL	C.016B
	INC	H
	DEC	E
	JR	NZ,J8596
	POP	HL
	LD	A,(D.DA8F)
	OR	A
	LD	BC,C.0008
	JR	Z,J85B5
	LD	C,04H	; 4 
J85B5:	ADD	HL,BC
	POP	BC
	POP	DE
	POP	AF
	DJNZ	J8588
	INC	DE
	POP	HL
	PUSH	BC
	LD	BC,I.0800
	ADD	HL,BC
	POP	BC
	DEC	C
	JP	NZ,J8584
	RET

J85C8:	PUSH	HL
	LD	HL,I.F5B0
	LD	D,H
	LD	E,L
	LD	A,10H	; 16 
	CALL	C7CF6
	LD	B,10H	; 16 
J85D5:	SRL	(HL)
	LD	A,(DE)
	RRA
	LD	(DE),A
	JR	NC,J85DE
	SET	7,(HL)
J85DE:	INC	HL
	INC	DE
	DJNZ	J85D5
	POP	HL
	JP	J82DC

J85E6:	PUSH	HL
	LD	HL,I.F5B0
	LD	A,(HL)
	LD	D,H
	LD	E,L
	INC	HL
	LD	BC,16-1
	LDIR
	LD	(DE),A
	LD	A,(HL)
	LD	D,H
	LD	E,L
	INC	HL
	LD	C,16-1
	LDIR
	LD	(DE),A
	POP	HL
	JP	J82DC

I8601:	JP	JBFDD

?8604:	OR	E
	JR	NZ,J8627
	OR	D
	JP	C,JB4B6
	JR	NZ,J862D
	OR	(HL)
	OR	D
	JP	J.20DD

?8612:	JR	NZ,J85DE
	DEFB	0DDH		; << Illegal Op Code Byte >>

	JP	J.20DD

?8618:	JR	NZ,J85DE
	OR	E
	IN	A,(0B8H)
I861D:	LD	H,C
	DEFB	0,0,0
I8621:	DAA
	LD	BC,X.0000
I8625:	POP	BC
	NOP
J8627:	RET	C
	DEC	C
	LD	SP,IAE09
	LD	BC,X.0000
J862D	EQU	$-2
I862F:	LD	C,08H	; 8 
	LD	C,0AH	; 10 
	DEFB	0,0
I8635:	POP	BC
	NOP
I8637:	IN	A,(05H)
	DEFB	0,0
I863B:	SBC	A,(HL)
	INC	C
	LD	L,A
	RRCA
	DEFB	0,0
I8641:	DJNZ	J864F
	CP	A
	RRCA
	DEFB	0,0
I8647:	LD	D,L
	INC	B
	LD	E,08H	; 8 
	DEFB	0,0
I864D:	POP	BC
	NOP
J864F:	LD	C,B
	DEC	B
	ADD	A,L
	DEC	BC
	POP	HL
	DEC	B
	CP	L
	INC	C
	DEFB	0,0
I8659:	LD	H,C
	NOP
I865B:	LD	L,B
	ADD	HL,BC
	AND	A
	RLCA
	DEFB	0,0
I8661:	SBC	A,(HL)
	LD	C,70H	; "p"
	LD	A,(BC)
	LD	H,A
	NOP
I8667:	POP	BC
	NOP
	LD	(D$7D02),HL
I866A	EQU	$-2
	NOP
	RST	38H
	LD	BC,X.0000
I8671:	SUB	A
	LD	BC,I.01BE
	SBC	A,C
	LD	BC,I.018B
	LD	L,C
	DEFB	0,0,0
I867D:	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	DEFB	0,0
	POP	BC
	NOP
	AND	C
	DEC	B
	LD	A,D
	EX	AF,AF'
	DEFB	0,0
I868B:	POP	BC
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	DEFB	0,0
I8693:	ADC	A,L
	EX	AF,AF'
	LD	SP,I6709
I8697	EQU	$-1
	DEFB	0,0,0
I869B:	LD	E,0DH	; 13 
	LD	D,C
	DEC	B
	LD	H,A
	DEFB	0,0,0
I86A3:	XOR	C
	LD	BC,I.0193
	DEFB	0,0
I86A9:	CP	(HL)
I86AA:	LD	BC,I.01A7
	LD	L,C
	DEFB	0,0,0
	LD	L,C
	INC	C
	CP	A
	LD	BC,I.0067
	DEFB	0,0
I86B9:	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	LD	H,A
	DEFB	0,0,0
	EI
	LD	BC,I$0233
	RST	38H
	LD	BC,I.022A
	INC	SP
	LD	(BC),A
	RET	P
	LD	BC,I.0067
	DEFB	0,0
	LD	H,(HL)
	INC	B
	OUT	(05H),A
	SBC	A,E
	LD	BC,I.0067
	DEFB	0,0
I86DB:	CALL	C,C5E04
	LD	A,(BC)
	LD	H,A
	DEFB	0,0,0
I86E3:	OUT	(06H),A
	LD	E,(HL)
	LD	A,(BC)
	LD	H,A
	DEFB	0,0,0
I86EB:	LD	E,05H	; 5 
	SUB	H
	RLCA
	LD	H,A
	DEFB	0,0,0
I86F3:	SUB	H
	RLCA
	SUB	L
	LD	B,91H
	LD	BC,I.0067
	RST	18H
	INC	B
	SUB	H
	RLCA
	LD	L,C
	DEFB	0,0,0
I8703:	DI
	LD	BC,I$0214
	LD	A,L
	NOP
	LD	H,A
	DEFB	0,0,0
I870D:	IN	A,(0DH)
	AND	A
	RLCA
	DEFB	0,0
I8713:	LD	H,(HL)
	DEC	BC
	DEFB	0,0
I8717:	CALL	C,C510C
I871A:	DEC	B
	LD	H,A
	DEFB	0,0,0
	LD	A,(D$3605)
	INC	C
	XOR	D
	LD	BC,I.0197
	DEFB	0,0
I8729:	LD	B,0FH	; 15 
	LD	L,H
	RRCA
	SUB	H
	DEC	C
	CALL	C670A
	NOP
I8733:	DJNZ	J8741
	CP	A
	RRCA
I8737:	AND	A
	LD	BC,I$018D
	CP	(HL)
	LD	BC,I.019B
	OUT	(01H),A
J8741:	LD	H,C
	DEFB	0,0,0
I8745:	INC	B
	LD	(BC),A
	DEC	HL
	DEC	B
	LD	C,A
	EX	AF,AF'
	JP	M,J9A00
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	JP	M,J8B00
	LD	BC,I$01C9
	SBC	A,E
	DEFB	0,0,0
I875D:	RLCA
	LD	(BC),A
	JP	PE,J5B08
	RRCA
	JP	M,J9A00
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	JP	M,JBE00
	LD	BC,I.01A7
	SBC	A,E
	DEFB	0,0,0
I8775:	LD	A,(BC)
	LD	(BC),A
	OR	H
	DEC	C
	LD	H,C
	NOP
	CALL	P,C9A09
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	OR	H
	DEC	C
	SBC	A,E
I8786:	DEFB	0,0,0
I8789:	DEC	C
	LD	(BC),A
	LD	SP,I6109
	NOP
	SUB	B
	EX	AF,AF'
	SBC	A,D
	NOP
	JP	J$3104

?8796:	ADD	HL,BC
	ADC	A,L
	LD	BC,I.0066
I8799	EQU	$-2
	INC	B
	ADD	HL,BC
	LD	SP,I8D09
	LD	BC,I$009B
	DEFB	0,0
I87A5:	DJNZ	J87A9
	LD	E,05H	; 5 
J87A9:	LD	H,C
	NOP
	JP	M,J9A00
	NOP
	LD	E,B
	EX	AF,AF'
	JP	Z,J660B
	NOP
	ADC	A,E
	EX	AF,AF'
	LD	D,B
	INC	C
	ADC	A,H
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	ADC	A,L
	NOP
	SBC	A,E
	DEFB	0,0,0
I87C5:	DJNZ	J87C9
	POP	HL
	DEC	B
J87C9:	RST	08H
	EX	AF,AF'
	SBC	A,(HL)
	LD	C,9AH
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
I87DB:	ADC	A,H
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	ADC	A,L
	NOP
	SBC	A,E
	DEFB	0,0,0
I87E7:	DEC	C
	LD	(BC),A
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	RST	08H
	EX	AF,AF'
	SBC	A,D
	NOP
	AND	C
	DEC	C
I87F3:	XOR	H
	DEC	BC
I87F5:	LD	H,(HL)
	NOP
	INC	B
	ADD	HL,BC
	CALL	C,C510C
	DEC	B
	LD	H,(HL)
	NOP
I87FF:	INC	(HL)
I8800:	LD	BC,I$0CDC
	LD	D,C
	DEC	B
	SBC	A,E
	DEFB	0,0,0
I8809:	LD	A,(BC)
	LD	(BC),A
	RET	C
	RLCA
	CP	0EH	; 14 
	JP	P,J9A0C
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	ADC	A,H
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	ADC	A,L
	NOP
	SBC	A,E
	DEFB	0,0,0
I8823:	INC	B
	LD	(BC),A
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	OR	(HL)
	DEC	B
I882B:	SBC	A,D
	DEFB	0,0,0
I882F:	LD	H,(HL)
	NOP
	JR	NC,J8834
	LD	H,(HL)
J8834:	NOP
	LD	H,E
	INC	C
	CALL	Z,C9B08
	DEFB	0,0,0
I883D:	RLCA
	LD	(BC),A
	SUB	H
	RLCA
	LD	H,C
	NOP
	OR	(HL)
	DEC	B
I8845:	SBC	A,D
	NOP
	LD	SP,I6601
	NOP
	JR	NC,J884E
	LD	H,(HL)
J884E:	NOP
	LD	H,E
	INC	C
	CALL	Z,C9B08
	DEFB	0,0,0
I8857:	POP	BC
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	ADC	A,L
	EX	AF,AF'
I885F:	LD	SP,I7D09
	DEC	C
	ADC	A,B
	EX	AF,AF'
	DEFB	0,0
I8867:	OR	(HL)
	NOP
	CCF
	LD	A,(BC)
	JP	Z,J$EA0B
	EX	AF,AF'
	LD	E,E
	RRCA
	LD	B,L
	RLCA
	DEFB	0,0
I8875:	JP	NC,J$C101
	INC	B
	SBC	A,C
	LD	BC,X.0000
I887D:	DEC	SP
	NOP
	DEC	H
	LD	(D$3435),A
	LD	L,32H	; "2"
	NOP
	DEC	A
I8887:	INC	L
	LD	(BC),A
	CALL	PO,C$E201
	LD	BC,I.01E6
	EX	AF,AF'
	LD	(BC),A
	LD	A,L
	DEC	C
	ADC	A,B
I8894:	EX	AF,AF'
	DEFB	0,0
I8897:	SBC	A,B
	NOP
	AND	C
	DEC	B
	LD	A,D
	EX	AF,AF'
	XOR	A
	LD	B,99H
	DEFB	0,0,0
I88A3:	POP	BC
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	ADC	A,L
	EX	AF,AF'
	LD	SP,I$E109
	DEC	B
	CP	L
	INC	C
	DEFB	0,0
I88B3:	POP	BC
	NOP
	JR	NC,J88BC
	LD	A,D
	EX	AF,AF'
	POP	HL
	DEC	B
	CP	L
J88BC:	INC	C
	DEFB	0,0
I88BF:	POP	BC
	NOP
	XOR	H
	DEC	BC
	XOR	(HL)
	ADD	HL,BC
	POP	HL
	DEC	B
	CP	L
	INC	C
	DEFB	0,0
	POP	BC
	NOP
	LD	D,L
	INC	B
	LD	A,D
	EX	AF,AF'
	OR	L
	LD	A,(BC)
	LD	D,(HL)
	DEC	BC
	CCF
	LD	A,(BC)
	JP	Z,J.000B
	NOP
I88DB:	POP	BC
	NOP
	JR	NC,J88E4
	LD	A,D
	EX	AF,AF'
	XOR	(HL)
	LD	BC,I$0C69
J88E4	EQU	$-1
	CP	(HL)
	RLCA
	DEFB	0,0
I88E9:	POP	BC
	NOP
	JR	NC,J88F2
	LD	A,D
	EX	AF,AF'
	XOR	(HL)
	LD	BC,I$0DFD
J88F2	EQU	$-1
	RET	C
	LD	A,(BC)
	DEFB	0,0
I88F7:	POP	BC
	NOP
	JR	NC,J8900
	LD	A,D
	EX	AF,AF'
	LD	C,08H	; 8 
	LD	C,0AH	; 10 
J8900	EQU	$-1
	POP	AF
	DEC	C
	LD	A,C
	RLCA
	DEFB	0,0
I8907:	POP	BC
	NOP
	RET	C
	DEC	C
	LD	SP,IAE09
	LD	BC,I$08D5
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I8915:	POP	BC
	NOP
	RET	C
	DEC	C
	LD	SP,IAE09
	LD	BC,I$0AB7
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I8923:	SBC	A,H
	INC	C
	LD	E,H
	LD	C,4CH	; "L"
	RLCA
	CPL
	LD	(BC),A
	LD	A,L
	NOP
	ADD	HL,BC
	LD	(BC),A
	RLA
	LD	(BC),A
	DEC	L
	LD	(BC),A
	EI
	LD	BC,I$0203
	PUSH	AF
	LD	BC,X.0000
I893B:	POP	BC
	NOP
	XOR	H
	DEC	BC
	XOR	(HL)
	ADD	HL,BC
	ADC	A,0AH	; 10 
	ADD	HL,DE
	INC	C
	CCF
	LD	A,(BC)
	JP	Z,J.000B
	NOP
I894B:	POP	BC
	NOP
	LD	H,C
	NOP
	INC	SP
	LD	BC,I.0130
	JR	NC,J8956
	INC	E
J8956:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I895B:	POP	BC
	NOP
	LD	H,C
	NOP
	LD	(HL),01H	; 1 
	JR	NC,J8964
	JR	NC,J8966
J8964	EQU	$-1
	INC	E
J8966:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I896B:	POP	BC
	NOP
	LD	SP,I.3201
	LD	BC,I.0130
	JR	NC,J8976
	INC	E
J8976:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I897B:	POP	BC
	NOP
	LD	(D$3401),A
	LD	BC,I.0130
	JR	NC,J8986
	INC	E
J8986:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I898B:	POP	BC
	NOP
	INC	(HL)
	LD	BC,I.0138
	JR	NC,J8994
	JR	NC,J8996
J8994	EQU	$-1
	INC	E
J8996:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I899B:	POP	BC
	NOP
	ADD	HL,SP
	LD	BC,I$0136
	JR	NC,J89A4
	JR	NC,J89A6
J89A4	EQU	$-1
	INC	E
J89A6:	LD	(BC),A
	LD	A,L
	DEFB	0,0,0
I89AB:	POP	BC
	NOP
	OR	A
	ADD	HL,BC
	CALL	PE,C$D505
	EX	AF,AF'
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I89B7:	POP	BC
	NOP
	XOR	C
	DEC	BC
	EX	(SP),HL
	INC	B
	PUSH	DE
	EX	AF,AF'
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I89C3:	OR	(HL)
	NOP
	PUSH	DE
	EX	AF,AF'
	XOR	(HL)
	ADD	HL,BC
	RET	PE
	LD	BC,I.0229
	LD	A,L
	DEFB	0,0,0
I89D1:	OR	(HL)
	NOP
	RET	C
	DEC	C
	LD	SP,J9609
	DEC	BC
	LD	BC,5
	NOP
I89DD:	PUSH	DE
	EX	AF,AF'
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I89E3:	RLCA
	LD	BC,I.0152
	LD	B,L
	LD	BC,I.0154
	EX	AF,AF'
	LD	BC,I$014B
	LD	H,L
	LD	BC,I$0179
	AND	A
	LD	BC,X.0000
I89F7:	OR	A
	LD	A,(BC)
	XOR	(HL)
	ADD	HL,BC
	DEC	HL
	DEC	B
	LD	C,A
	EX	AF,AF'
	DEFB	0,0
I8A01:	OR	(HL)
	NOP
	OR	A
	LD	A,(BC)
	XOR	(HL)
	ADD	HL,BC
	RET	PE
	LD	BC,I.0229
	LD	A,L
	DEFB	0,0,0
I8A0F:	OR	(HL)
	NOP
	OR	A
	LD	A,(BC)
	XOR	(HL)
	ADD	HL,BC
	LD	H,(HL)
	DEC	BC
	LD	E,A
	EX	AF,AF'
	DEFB	0,0
I8A1B:	OR	A
	LD	A,(BC)
	XOR	(HL)
	ADD	HL,BC
	DEFB	0,0
I8A21:	INC	L
	INC	B
	LD	D,(HL)
	DEC	BC
	LD	L,D
	LD	A,(BC)
	LD	(DE),A
	DEC	BC
	DEFB	0,0
I8A2B:	LD	(D.8D08),A
	RLCA
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	DEFB	0,0
I8A35:	LD	(D.8D08),A
	RLCA
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	CP	0BH	; 11 
	OR	A
	LD	A,(BC)
	DEFB	0,0
I8A43:	LD	C,08H	; 8 
	LD	C,0AH	; 10 
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	DJNZ	J8A59
	CP	A
	RRCA
	DEFB	0,0
I8A51:	LD	DE,I$FF02
	LD	BC,I$007D
	INC	SP
	LD	(BC),A
J8A59:	RST	28H
	LD	BC,I.022A
	JP	PO,J.0001
	NOP
I8A61:	LD	C,08H	; 8 
	LD	C,0AH	; 10 
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	DEFB	0,0
I8A6B:	RET	C
	DEC	C
	LD	B,C
	LD	A,(BC)
	LD	H,A
	DEFB	0,0,0
I8A73:	LD	SP,IA10B
	DEC	B
	LD	H,A
	DEFB	0,0,0
I8A7B:	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	LD	H,A
	DEFB	0,0,0
	LD	L,(HL)
	RRCA
	LD	C,B
	INC	B
	SUB	(HL)
	DEC	BC
	LD	BC,I4C05
	INC	B
	LD	(HL),0BH	; 11 
	POP	AF
	DEC	C
	SBC	A,C
	DEC	B
	SUB	A
	LD	BC,I.01A6
	CALL	C,C9504
	LD	BC,I.0184
	DEFB	0,0
	SUB	L
	LD	C,0F1H
	DEC	C
	SBC	A,C
	DEC	B
	AND	A
	LD	BC,I.0199
	ADC	A,E
	LD	BC,I$0069
	DEFB	0,0
I8AAF:	POP	BC
	NOP
	AND	H
	DEC	B
	LD	C,L
	LD	B,3FH	; "?"
	LD	A,(BC)
	JP	Z,J.000B
	NOP
	LD	A,L
	DEC	C
	ADC	A,B
	EX	AF,AF'
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	CALL	P,C9A09
	NOP
	LD	SP,I$3501
	LD	BC,I.0066
	INC	SP
	LD	BC,I.0130
	SBC	A,E
	DEFB	0,0,0
	LD	L,C
	INC	C
	CP	(HL)
	RLCA
	CP	A
	LD	BC,I$090F
	LD	C,H
	RLCA
	LD	(HL),0DH	; 13 
	AND	(HL)
	RLCA
	SBC	A,D
	NOP
	LD	H,C
	NOP
	LD	H,C
	NOP
	SBC	A,E
	DEFB	0,0,0
	LD	L,C
	INC	C
	CP	(HL)
	RLCA
	CP	A
	LD	BC,I$0530
	LD	A,D
	EX	AF,AF'
	LD	(HL),0DH	; 13 
	AND	(HL)
	RLCA
	SBC	A,D
	NOP
	LD	H,C
	NOP
	LD	H,C
J8B00:	NOP
	SBC	A,E
	DEFB	0,0,0
	CALL	P,C$F80D
	EX	AF,AF'
	RET	C
	DEC	C
	LD	SP,I$3609
	DEC	C
	AND	(HL)
	RLCA
	SBC	A,D
	NOP
	LD	H,C
	NOP
	ADC	A,H
	NOP
	LD	H,C
	NOP
	ADC	A,L
	NOP
	SBC	A,E
	DEFB	0,0,0
	POP	AF
	DEC	C
	LD	A,C
	RLCA
	LD	B,L
	RLCA
	RLCA
	LD	BC,I.0152
	LD	B,L
	LD	BC,I.0154
	EX	AF,AF'
	LD	BC,I.01A7
	DEFB	0FDH		; << Illegal Op Code Byte >>

	DEC	C
	RET	C
	LD	A,(BC)
	SUB	L
	LD	BC,I.01CC
	CP	(HL)
	LD	BC,I.0199
	DEFB	0
I8B3E:	DEFB	0
I8B3F:	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	DJNZ	J8B51
	CP	A
	RRCA
	LD	H,A
	DEFB	0,0,0
I8B4B:	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	RRCA
	EX	AF,AF'
J8B51:	INC	A
	ADD	HL,BC
	LD	H,A
	DEFB	0,0,0
	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	DJNZ	J8B69
	CP	A
	RRCA
	LD	H,A
	DEFB	0,0,0
	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	RRCA
	EX	AF,AF'
J8B69:	INC	A
	ADD	HL,BC
	LD	H,A
	DEFB	0,0,0
I8B6F:	LD	L,C
	INC	C
	CP	(HL)
	RLCA
	DEFB	0,0
I8B75:	DEFB	0FDH		; << Illegal Op Code Byte >>

	DEC	C
	RET	C
	LD	A,(BC)
	DEFB	0,0
	RLCA
	LD	(BC),A
	EX	(SP),HL
	LD	BC,I.01F9
	RST	28H
	LD	BC,I.0066
	EX	DE,HL
	LD	BC,I$01FB
	INC	BC
	LD	(BC),A
	EX	AF,AF'
	LD	(BC),A
	DEFB	0,0
	POP	BC
	NOP
	RET	C
	DEC	C
	LD	SP,I4C09
	INC	B
	SCF
	RRCA
	DEFB	0,0
	OR	(HL)
	NOP
	LD	L,D
	LD	A,(BC)
	LD	(DE),A
	DEC	BC
	LD	B,L
	RLCA
	RLCA
	LD	BC,I.0152
	LD	B,L
	LD	BC,I.0154
	EX	AF,AF'
	LD	BC,I.01A7
	LD	L,C
	INC	C
	CP	(HL)
	RLCA
	CP	A
	LD	BC,I$052B
	LD	C,A
	EX	AF,AF'
	DEFB	0,0
	RLCA
	LD	(BC),A
	EX	(SP),HL
	LD	BC,I.01F9
	RST	28H
	LD	BC,I.0061
	RET	PE
	LD	BC,I.0229
	SBC	A,L
	DEFB	0,0,0
	LD	D,C
	INC	C
	SBC	A,(HL)
	LD	C,15H
	LD	(BC),A
	POP	HL
	LD	BC,I.01E4
	DEC	HL
	LD	(BC),A
	DEFB	0EDH		; << Illegal Op Code Byte >>

	LD	C,0CAH
	LD	BC,X.0000
	LD	E,B
	EX	AF,AF'
	JP	Z,J$150B
	LD	(BC),A
	POP	HL
	LD	BC,I.01E4
	DEC	HL
	LD	(BC),A
	SUB	L
	LD	C,97H
	LD	BC,X.0000
	RLCA
	LD	(BC),A
	EX	(SP),HL
	LD	BC,I.01F9
	RST	28H
	LD	BC,I$0F06
	LD	L,H
	RRCA
	SUB	H
	DEC	C
	CALL	C.000A
	NOP
	POP	BC
	NOP
	RET	C
	DEC	C
	LD	SP,I$0F09
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	DEFB	0,0
	POP	BC
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	DEFB	0,0
	POP	BC
	NOP
	JR	NC,J8C24
	LD	A,D
	EX	AF,AF'
	RRCA
	EX	AF,AF'
	INC	A
J8C24:	ADD	HL,BC
	DEFB	0,0
	LD	L,D
	LD	A,(BC)
	LD	(DE),A
	DEC	BC
	LD	B,L
	RLCA
	RLCA
	LD	BC,I.0152
	LD	B,L
	LD	BC,I.0154
	EX	AF,AF'
	LD	BC,I.01A7
	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	SUB	L
	LD	BC,I.01CC
	CP	(HL)
	LD	BC,I.0199
	DEFB	0,0
I8C47:	POP	BC
	NOP
	RET	C
	DEC	C
	LD	SP,I.0009
	NOP
I8C4F:	POP	BC
	NOP
	JR	NC,J8C58
	LD	A,D
	EX	AF,AF'
	DEFB	0,0
I8C57:	POP	BC
J8C58:	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	DEFB	0,0
I8C5F:	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	DEFB	0,0
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8C65:	CALL	C8D81
I8C67	EQU	$-1
	OR	A
	JR	NZ,J8C71
	LD	HL,I.2800
	LD	(D.DA62),HL
J8C71:	LD	B,20H	; " "
	LD	DE,I.D110
	XOR	A
J8C77:	LD	(DE),A
	INC	DE
	DJNZ	J8C77
	LD	HL,(D.DA62)
	LD	(D.DA64),HL
J8C81:	LD	DE,I$D0F0
J8C84:	LD	A,(DE)
	OR	A
	JR	Z,J8C91
	LD	B,A
	LD	A,(HL)
	CP	B
	JR	NZ,J8CB1
	INC	HL
	INC	DE
	JR	J8C84

J8C91:	LD	A,(HL)
	OR	A
	JR	NZ,J8CB1
	INC	HL
	LD	A,(HL)
	LD	(D$DA66),A
	SLA	A
	LD	B,A
	LD	DE,I.D110
	INC	HL
J8CA1:	LD	A,(HL)
	LD	(DE),A
	INC	HL
	INC	DE
	DJNZ	J8CA1
	CALL	C8CD4
	LD	(D.DA62),HL
	OR	A
	JP	J8D8E

J8CB1:	LD	A,(HL)
	INC	HL
	CP	0FFH
	JR	Z,J8CC1
	OR	A
	JR	NZ,J8CB1
	LD	A,(HL)
	SLA	A
	CALL	C8D73
	INC	HL
J8CC1:	CALL	C8CD4
	PUSH	HL
	OR	A
	LD	DE,(D.DA62)
	SBC	HL,DE
	POP	HL
	JR	Z,J8CE2
	LD	(D.DA64),HL
	JR	J8C81

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8CD4:	OR	A
	LD	DE,(D.DA67)
	PUSH	HL
	SBC	HL,DE
	POP	HL
	RET	C
	LD	HL,I.2800
	RET

J8CE2:	SCF
	JP	J8D8E

I8CE6:	OR	A
	RET	Z
	PUSH	HL
	PUSH	AF
	PUSH	DE
	CALL	C8D81
	LD	H,A
	LD	B,01H	; 1 
J8CF1:	LD	A,(DE)
	OR	A
	JR	Z,J8CF9
	INC	B
	INC	DE
	JR	J8CF1

J8CF9:	PUSH	BC
	LD	A,H
	SLA	A
	ADD	A,B
	INC	A
	LD	(D.DA69),A
	LD	HL,(D.DA67)
	CALL	C8D73
D.8D08:	LD	DE,I77FF
I8D09	EQU	$-2
	SBC	HL,DE
	JP	NC,J8D7A
	LD	HL,I.2800
J8D13:	POP	BC
	POP	DE
	PUSH	DE
	PUSH	BC
	PUSH	HL
J8D18:	LD	A,(DE)
	OR	A
	JR	Z,J8D36
	LD	B,A
	LD	A,(HL)
	SUB	B
	JR	Z,J8D32
	JR	NC,J8D36
	POP	BC
J8D24:	LD	A,(HL)
	INC	HL
	OR	A
	JR	NZ,J8D24
	LD	A,(HL)
	INC	HL
	SLA	A
	CALL	C8D73
	JR	J8D13

J8D32:	INC	HL
	INC	DE
	JR	J8D18

J8D36:	POP	HL
	PUSH	HL
	LD	DE,(D.DA67)
	EX	DE,HL
	OR	A
	SBC	HL,DE
	LD	B,H
	LD	C,L
	INC	BC
	LD	HL,(D.DA67)
	LD	A,(D.DA69)
	CALL	C8D73
	LD	DE,(D.DA67)
	EX	DE,HL
	LD	(D.DA67),DE
	LDDR
	POP	DE
	POP	BC
	POP	HL
J8D5A:	LD	A,(HL)
	LD	(DE),A
	INC	DE
	INC	HL
	DJNZ	J8D5A
	POP	AF
	PUSH	AF
	LD	(DE),A
	INC	DE
	POP	AF
	SLA	A
	LD	B,A
	POP	HL
J8D69:	LD	A,(HL)
	LD	(DE),A
	INC	DE
	INC	HL
	DJNZ	J8D69
	SCF
	JP	J8D8E

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8D73:	ADD	A,L
	LD	L,A
	LD	A,00H
	ADC	A,H
	LD	H,A
	RET

J8D7A:	POP	BC
	POP	DE
	POP	AF
	POP	HL
	JP	J8D8E

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8D81:	PUSH	AF
	DI
	LD	A,30H
	LD	(D.FFFF),A		; secundairy slot 0 on page 3, 1 and 0 (RAM), secundairy slot 3 on page 2 (FIRMWARE)
	LD	A,0FFH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2,1 and 0
	POP	AF
	RET

J8D8E:	PUSH	AF
	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	LD	A,0FCH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2,1. BIOS on page 0
	POP	AF
	EI
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C8D9B:	PUSH	HL
	PUSH	AF
	LD	HL,I8DAF
	LD	D,00H
	ADD	A,A
	LD	E,A
	LD	A,D
	ADC	A,00H
	LD	D,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	POP	AF
	POP	HL
	RET

I8DAF:	LD	H,C
	NOP
	CP	C
	NOP
	CP	D
	NOP
	CP	L
	NOP
	RET	Z
	NOP
	SBC	A,B
	NOP
	SBC	A,C
	NOP
	CP	B
	NOP
	SBC	A,A
I8DC0:	INC	B
	LD	A,D
	NOP
	CALL	Z,C$CF0D
	NOP
	XOR	A
	INC	C
	SBC	A,D
	NOP
	SBC	A,E
	NOP
	LD	A,C
	NOP
	JP	(HL)

?8DD0:	NOP
	ADC	A,(HL)
	DEC	BC
	LD	C,C
	LD	A,(BC)
	LD	A,(HL)
	EX	AF,AF'
	XOR	06H	; 6 
	SBC	A,H
	INC	C
	DEC	BC
	LD	BC,I.0078
	LD	(HL),H
	DEC	C
	LD	A,H
	LD	C,88H
	LD	B,0DH	; 13 
	RRCA
	LD	D,H
	EX	AF,AF'
	RET	NC
	NOP
	LD	(HL),0DH	; 13 
	RST	20H
	NOP
	LD	H,C
	NOP
	LD	L,D
	NOP
	XOR	L
	NOP
	OR	H
	NOP
	OR	B
	NOP
	OR	E
	NOP
	OR	L
	NOP
	XOR	H
	NOP
	ADC	A,D
	NOP
	ADC	A,E
	NOP
	OR	(HL)
	NOP
	SBC	A,H
	NOP
	LD	H,H
	NOP
	LD	A,L
	NOP
	LD	H,L
	NOP
	LD	A,A
	NOP
	JR	NC,J8E12
	LD	SP,I.3201
J8E12	EQU	$-2
	LD	BC,I$0133
	INC	(HL)
	LD	BC,I$0135
	LD	(HL),01H	; 1 
	SCF
	LD	BC,I.0138
	ADD	HL,SP
	LD	BC,I.0067
	LD	L,B
	NOP
	AND	E
	NOP
	AND	C
	NOP
	AND	H
	NOP
	LD	L,C
	NOP
	OR	A
	NOP
	LD	B,C
	LD	BC,I$0142
	LD	B,E
	LD	BC,I$0144
	LD	B,L
	LD	BC,I$0146
	LD	B,A
	LD	BC,I$0148
	LD	C,C
	LD	BC,I$014A
	LD	C,E
	LD	BC,I$014C
	LD	C,L
	LD	BC,I$014E
	LD	C,A
	LD	BC,I$0150
	LD	D,C
	LD	BC,I.0152
	LD	D,E
	LD	BC,I.0154
	LD	D,L
	LD	BC,J.0156
	LD	D,A
	LD	BC,I$0158
	LD	E,C
	LD	BC,I$015A
	ADC	A,(HL)
	NOP
	XOR	A
	NOP
	ADC	A,A
	NOP
	LD	(HL),B
	NOP
	LD	(HL),D
	NOP
	LD	H,C
	NOP
	LD	H,C
	LD	BC,I$0162
	LD	H,E
	LD	BC,I$0164
	LD	H,L
	LD	BC,I$0166
	LD	H,A
	LD	BC,I$0168
	LD	L,C
	LD	BC,I$016A
	LD	L,E
	LD	BC,I$016C
	LD	L,L
	LD	BC,I$016E
	LD	L,A
	LD	BC,I$0170
	LD	(HL),C
	LD	BC,I$0172
	LD	(HL),E
	LD	BC,I$0174
	LD	(HL),L
	LD	BC,I$0176
	LD	(HL),A
	LD	BC,I$0178
	LD	A,C
	LD	BC,I$017A
	SUB	B
	NOP
	ADD	A,E
	NOP
	SUB	C
	NOP
	ADD	A,C
	NOP
	LD	H,C
	NOP
	AND	00H
	RET

?8EB2:	NOP
	AND	(HL)
	RLCA
	RET	PE
	NOP
	LD	A,(BC)
	LD	BC,I$0109
	JP	NC,J8101
	LD	BC,I$0183
	ADD	A,L
	LD	BC,I$0187
	ADC	A,C
	LD	BC,I$01C3
	PUSH	BC
	LD	BC,I$01C7
	AND	E
	LD	BC,I.0061
	ADD	A,D
	LD	BC,I.0184
	ADD	A,(HL)
	LD	BC,I$0188
	ADC	A,D
	LD	BC,I.018B
	ADC	A,L
	LD	BC,I$018F
	SUB	C
	LD	BC,I.0193
	SUB	L
	LD	BC,I.0197
	SBC	A,C
	LD	BC,I.019B
I8EEC	EQU	$-1
	SBC	A,L
	LD	BC,I.0061
	LD	H,E
	NOP
	SUB	(HL)
	NOP
	SUB	A
	NOP
	LD	H,D
	NOP
	LD	H,(HL)
	NOP
	LD	(D$E102),A
	LD	BC,I$01E3
I8F00	EQU	$-1
	PUSH	HL
	LD	BC,I$01E7
	JP	(HL)

?8F06:	LD	BC,I$0223
	DEC	H
	LD	(BC),A
	DAA
	LD	(BC),A
	INC	BC
	LD	(BC),A
	LD	A,H
	NOP
	JP	PO,J$E401
	LD	BC,I.01E6
I8F16	EQU	$-1
	RET	PE
	LD	BC,I$01EA
	EX	DE,HL
	LD	BC,I$01ED
	RST	28H
	LD	BC,I.01F1
	DI
	LD	BC,I$01F5
	RST	30H
	LD	BC,I.01F9
	EI
	LD	BC,I$01FD
	RST	38H
	LD	BC,I$0201
	INC	B
	LD	(BC),A
	LD	B,02H	; 2 
	EX	AF,AF'
	LD	(BC),A
	LD	A,(BC)
	LD	(BC),A
	DEC	BC
	LD	(BC),A
	INC	C
	LD	(BC),A
	DEC	C
	LD	(BC),A
	LD	C,02H	; 2 
	RRCA
	LD	(BC),A
	LD	(DE),A
	LD	(BC),A
	DEC	D
	LD	(BC),A
	JR	J8F4D

?8F4B:	DEC	DE
	LD	(BC),A
J8F4D:	LD	E,02H	; 2 
	RRA
	LD	(BC),A
	JR	NZ,J8F55
	LD	HL,I$2202
J8F55	EQU	$-1
	LD	(BC),A
	INC	H
	LD	(BC),A
	LD	H,02H	; 2 
	JR	Z,J8F5F
	ADD	HL,HL
	LD	(BC),A
J8F5F:	LD	HL,(D$2B02)
	LD	(BC),A
	INC	L
	LD	(BC),A
	DEC	L
	LD	(BC),A
	CPL
	LD	(BC),A
	INC	SP
	LD	(BC),A
	LD	L,E
	NOP
	LD	L,H
	NOP
	SBC	A,A
	LD	BC,I$01A1
	AND	H
	LD	BC,I.01A6
	XOR	B
	LD	BC,I$01AA
	XOR	E
	LD	BC,I$01AC
	XOR	L
	LD	BC,I$01AE
	XOR	A
	LD	BC,I$01B2
	OR	L
	LD	BC,I$01B8
	CP	E
	LD	BC,I.01BE
	CP	A
	LD	BC,I$01C0
	POP	BC
	LD	BC,I$01C2
	CALL	NZ,C$C601
	LD	BC,I$01C8
	RET

?8F9E:	LD	BC,I$01CA
	RLC	C
	CALL	Z,C$CD01
	LD	BC,I$01CF
	OUT	(01H),A
	LD	H,C
	NOP
	LD	H,C
	NOP
I8FAF:	CP	60H	; "`"
	JR	C,J8FB5
	SBC	A,60H	; "`"
J8FB5:	LD	HL,I8FCE
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,00H
	ADC	A,H
	LD	H,A
	LD	A,(HL)
	LD	(BC),A
	INC	BC
	INC	HL
	LD	A,(HL)
	LD	(BC),A
	OR	A
	JR	Z,J8FCC
	INC	BC
	XOR	A
	LD	(BC),A
J8FCC:	OR	A
	RET

I8FCE:	DEFB	0,0
	AND	A
	NOP
	OR	C
	NOP
	XOR	B
	NOP
	OR	D
	NOP
	XOR	C
	NOP
	OR	E
	NOP
	XOR	D
	NOP
	OR	H
	NOP
	XOR	E
	NOP
	OR	L
	NOP
	OR	(HL)
	NOP
	OR	(HL)
	SBC	A,0B7H
	NOP
	OR	A
	SBC	A,0B8H
	NOP
	CP	B
	SBC	A,0B9H
	NOP
	CP	C
	SBC	A,0BAH
	NOP
	CP	D
	SBC	A,0BBH
	NOP
	CP	E
	SBC	A,0BCH
	NOP
	CP	H
	SBC	A,0BDH
	NOP
	CP	L
	SBC	A,0BEH
	NOP
	CP	(HL)
	SBC	A,0BFH
	NOP
	CP	A
	SBC	A,0C0H
	NOP
	RET	NZ
	SBC	A,0C1H
	NOP
	POP	BC
	SBC	A,0AFH
	NOP
	JP	NZ,J$C200
	SBC	A,0C3H
	NOP
	JP	J$C4DE

?901F:	NOP
	CALL	NZ,C$C5DE
	NOP
	ADD	A,00H
	RST	00H
	NOP
	RET	Z
	NOP
	RET

?902B:	NOP
	JP	Z,J$CA00
	SBC	A,0CAH
	RST	18H
	RLC	B
	SET	3,(HL)
	SET	3,A
	CALL	Z,C$CC00
	SBC	A,0CCH
	RST	18H
	CALL	C$CD00
	SBC	A,0CDH
	RST	18H
	ADC	A,00H
	ADC	A,0DEH
	ADC	A,0DFH
	RST	08H
	NOP
	RET	NC
	NOP
	POP	DE
	NOP
	JP	NC,J$D300
	NOP
	XOR	H
	NOP
	CALL	NC,CAD00
	NOP
	PUSH	DE
	NOP
	XOR	(HL)
	NOP
	SUB	00H
	RST	10H
	NOP
	RET	C
	NOP
	EXX
	NOP
	JP	C,J$DB00
	NOP
	CALL	C,C$DC00
	NOP
	OR	D
	NOP
	OR	H
	NOP
	AND	(HL)
	NOP
	DEFB	0DDH		; << Illegal Op Code Byte >>

	NOP
	OR	E
	SBC	A,0B6H
	NOP
	CP	C
	NOP

I907C:	LD	HL,D.D905
	XOR	A
	LD	(D.FD81+1),A
	LD	(CNSDFG),A
	PUSH	HL
	POP	DE
	INC	DE
	LD	(HL),A
	LD	BC,I$020C
	LDIR
	LD	DE,FNKSTR+0*16
	LD	HL,I9182
	LD	BC,16
	LDIR
	LD	HL,I918E
	LD	B,09H	; 9 
J909F:	PUSH	HL
	PUSH	BC
	LD	BC,16
	LDIR
	POP	BC
	POP	HL
	INC	HL
	INC	HL
	INC	HL
	DJNZ	J909F
	LD	A,(H.KEYI+1)
	LD	(C.F882+1),A		; slotid
	LD	HL,I$1D00
	LD	A,83H			; slot 3-0 (RAM)
	LD	E,00H
	CALL	WRSLT
	INC	HL
	LD	A,83H			; slot 3-0 (RAM)
	CALL	WRSLT
	CALL	C7F5C
	CALL	C7F56
	LD	HL,I$0A05
	LD	BC,I8923
	CALL	C98C1
	LD	HL,I$0E08
	LD	BC,I8897
	CALL	C98C1
	LD	HL,I$2309
	LD	BC,I91A9
	CALL	C98E3			; display string
	CALL	C61D3			; beep
	LD	HL,I$3130
	LD	(D.DA6C),HL
	LD	(D.DA6E),HL
	LD	HL,I$3939
	LD	(D.DA70),HL
	LD	A,01H	; 1 
	LD	(D.DAC4),A
	LD	(D.DAC5),A
	CALL	CA0F1
	LD	A,(D.DAAE)
	LD	(D.DA72),A
	LD	HL,I7800
	LD	BC,I.0800
J910D:	LD	A,83H			; slot 3-0 (RAM)
	LD	E,0FFH
	PUSH	BC
	CALL	WRSLT
	POP	BC
	INC	HL
	DEC	BC
	LD	A,B
	OR	C
	JR	NZ,J910D
	LD	HL,I$2500
I911F:	LD	A,83H			; slot 3-0 (RAM)
	LD	E,0FFH
	CALL	WRSLT
	INC	HL
	LD	A,83H			; slot 3-0 (RAM)
	CALL	WRSLT
	LD	HL,I.2800
	LD	A,83H			; slot 3-0 (RAM)
	CALL	WRSLT
	LD	HL,I.2800
	LD	(D.DA62),HL
	LD	(D.DA64),HL
	LD	(D.DA67),HL
	DI
	LD	HL,H.TIMI
	PUSH	HL
	LD	DE,I$DADA
	LD	BC,5
	LDIR
	EX	DE,HL
	INC	HL
	LD	(HL),0AH	; 10 
	INC	HL
	LD	DE,I9165
	EX	DE,HL
	LD	C,26
	LDIR
	POP	HL
	LD	DE,I917E
J915E:	LD	C,4
	EX	DE,HL
	LDIR
	EI
	RET

I9165:	LD	HL,I$DADF
	INC	(HL)
	BIT	4,(HL)
	JR	Z,J915E
	LD	(HL),00H
	INC	HL
	PUSH	AF
	LD	A,(HL)
	XOR	02H			; sprite enable/disable
	LD	(HL),A
	OUT	(99H),A
	LD	A,128+8
	OUT	(99H),A			; vdp register 8
	POP	AF
	JR	J915E

I917E:	CALL	C$DAE1
	RET

I9182:	DEFB	1,0F0H,0
	RST	30H
	DEFB	8FH			; slot 3-3
	DEFW	I4010+3			; RS232.INIT
	RET

?918A:	DEFB	0,0,0,0
I918E:	LD	BC,I$00F1
	LD	BC,I$00F2
	LD	BC,C.00F3
	LD	BC,I$00F4
	LD	BC,I$00F5
	LD	BC,I.00F6
	LD	BC,I$00F7
	LD	BC,I$00F8
	LD	BC,I$00F9

I91A9:	DEFB	"Ver 3.0",13,13,13
	DEFB	"       Copyright (c) 1983",13,13
	DEFB	"       24-Jul-1985 by TSD",13,13
	DEFB	"       Programer: Junji.K",13,13,13,13,13
	DEFB	"      Presented by TOSHIBA"
	DEFB	0FFH

I9222:	LD	HL,I.000D
	LD	DE,I4006
	XOR	A
J9229:	CALL	C7F02
J922B	EQU	$-1
	LD	HL,I$0A13
J922D	EQU	$-2
	LD	DE,I$2C04
	LD	A,0D0H
	CALL	C7F50
	LD	HL,I.D9CC
J9239	EQU	$-1
	LD	B,14H	; 20 
	XOR	A
J923D:	LD	(HL),A
	INC	HL
	DJNZ	J923D
J9241:	LD	HL,I8661
J9244:	LD	DE,I.D9CC
	LD	C,6
	LDIR
	LD	HL,FILNAM
	LD	B,0BH	; 11 
J9250:	LD	(HL),20H	; " "
	INC	HL
	DJNZ	J9250
	XOR	A
	LD	(D.D9E2),A
	LD	A,15H
	LD	(D.D9E1),A
	LD	A,(D.DA8F)
	OR	A
	LD	A,0DH	; 13 
	JR	Z,J9268
I9265	EQU	$-1
	LD	A,0EH	; 14 
J9268:	LD	(D.D9E0),A
J926B:	LD	HL,I$0E14
	LD	BC,I.D9CC
J926F	EQU	$-2
	CALL	C98C1
	CALL	C7F26
	CALL	C74AE			; get keyboard input
J927A:	JR	NC,J9281		; not aborted,
	CALL	C7F38
	SCF
	RET

J9281:	CP	1DH			; CURSOR RIGHT ?
	JR	NZ,J92CA		; nope,
J9285:	LD	A,(D.DA8F)
	OR	A
	LD	A,(D.D9E0)
	LD	B,0DH	; 13 
	JR	Z,J9292
	LD	B,0EH	; 14 
J9292:	CP	B
	JR	NZ,J929A
J9295:	CALL	C61D3			; beep
	JR	J926B

J929A:	LD	B,A
	DEC	B
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J92A3
	DEC	B
J92A3:	LD	A,B
	LD	(D.D9E0),A
	LD	A,(D.D9E2)
	DEC	A
	LD	(D.D9E2),A
	LD	HL,FILNAM
	LD	A,(D.D9E2)
	ADD	A,L
	LD	L,A
	LD	(HL),20H	; " "
	LD	HL,I.D9D2
	LD	A,(D.D9E2)
	SLA	A
	CALL	C7CEF
	LD	(HL),61H	; "a"
	INC	HL
	LD	(HL),00H
	JR	J926B

J92CA:	CP	0DH			; RETURN ?
	JR	NZ,J92D3		; nope,
	CALL	C7F38
	OR	A
	RET

J92D3:	CP	08H			; BACKSPACE ?
	JR	Z,J9285			; yep,
	CP	7FH			; DELETE ?
	JR	Z,J92ED			; yep,
	PUSH	HL
	PUSH	BC
	LD	BC,I$000E
	LD	HL,I9343
	CPIR
	POP	BC
	POP	HL
	JR	Z,J92ED
	CP	20H			; control character ?
	JR	NC,J92F2		; nope,
J92ED:	CALL	C61DB
	JR	J9295

J92F2:	CP	7BH	; "{"
I92F3	EQU	$-1
	JR	NC,J92FC
	CP	61H	; "a"
	JR	C,J92FC
	AND	0DFH			; make upcase
J92FC:	CALL	C8D9B
	LD	HL,FILNAM
	LD	B,A
	LD	A,(D.D9E2)
	CP	06H	; 6 
	JR	Z,J92ED
	ADD	A,L
	LD	L,A
	LD	(HL),B
	LD	HL,I.D9D2
	LD	A,(D.D9E2)
	SLA	A
	CALL	C7CEF
	LD	(HL),E
	INC	HL
	LD	(HL),D
	LD	A,(D.DA8F)
	OR	A
	LD	B,19H
	LD	A,(D.D9E0)
	JR	Z,J9328
	LD	B,14H	; 20 
J9328:	CP	B
	JP	Z,J9295
	LD	B,A
	INC	B
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J9335
	INC	B
J9335:	LD	A,B
	LD	(D.D9E0),A
	LD	A,(D.D9E2)
	INC	A
	LD	(D.D9E2),A
	JP	J926B

I9343:	JR	NZ,J9367
	LD	HL,(D$2C2B)
	LD	L,2FH	; "/"
	LD	A,(D$3D3B)
	CCF
	LD	E,E
	LD	E,L
	LD	H,B

;	  Subroutine operate selection menu
;	     Inputs  A = number of options
;	     Outputs A = selected option

C9351:	PUSH	AF
	LD	A,1
J9354:	PUSH	AF
	CALL	C9394
J9358:	CALL	C61DB
	CALL	C74AE			; get keyboard input
	JR	C,J938D			; aborted,
	CP	1FH			; CURSOR DOWN ?
	JR	Z,J9372			; yep,
	CP	1EH			; CURSOR UP ?
	JR	Z,J9382			; yep,
J9367	EQU	$-1
	CP	0DH			; RETURN ?
	JR	NZ,J9358		; nope,
	POP	AF
	LD	C,A
	POP	AF
	LD	A,C
	OR	A
	RET

J9372:	POP	AF
	CALL	C93A4
I9374	EQU	$-2
	INC	A			; next
	LD	C,A
	POP	AF
	PUSH	AF
	CP	C
	LD	A,C
	JR	NC,J9354
	LD	A,1
	JR	J9354

J9382:	POP	AF
	CALL	C93A4
	DEC	A
	JR	NZ,J9354
	POP	AF
	PUSH	AF
	JR	J9354

J938D:	POP	AF
	CALL	C93A4
	POP	AF
	SCF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C9394:	PUSH	AF
	CALL	C93B4
	PUSH	DE
	PUSH	HL
	LD	BC,I8621
	CALL	C98C1
	POP	HL
	POP	DE
J93A2:	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C93A4:	PUSH	AF
	CALL	C93B4
	PUSH	DE
	PUSH	HL
	LD	BC,I861D
	CALL	C98C1
	POP	HL
	POP	DE
	JR	J93A2

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C93B4:	LD	HL,I93CE
	DEC	A
	JR	Z,J93C2
	SLA	A
	SLA	A
	LD	B,A
J93BF:	INC	HL
	DJNZ	J93BF
J93C2:	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	INC	HL
	EX	DE,HL
	LD	A,(DE)
	LD	C,A
	INC	DE
	LD	A,(DE)
	LD	D,A
	LD	E,C
	RET

I93CE:	INC	B
	DJNZ	J93E9
	DEC	B
	RLCA
	DJNZ	J93ED
	EX	AF,AF'
	LD	A,(BC)
	DJNZ	J93F1
	DEC	BC
	DEC	C
	DJNZ	J93F5
	LD	C,10H	; 16 
	DJNZ	J93F9
	LD	DE,I$1013
	JR	J93FA

I93E6:	CALL	C7F14
J93E9:	CALL	C7F56
	LD	HL,X.0000
J93ED	EQU	$-2
I93EE	EQU	$-1
	LD	DE,I4018
J93F1	EQU	$-1
	LD	A,0C0H
	CALL	C7F02
J93F5	EQU	$-2
	LD	BC,I$0C07
J93F9	EQU	$-1
J93FA:	CALL	WRTVDP
	LD	HL,I.0400
	LD	BC,I94FB
	CALL	C98C1
	LD	HL,I.0403
	CALL	C98C1
	LD	HL,I$0406
	CALL	C98C1
	LD	HL,I$0409
	CALL	C98C1
	LD	HL,I$040C
	CALL	C98C1
	LD	HL,I$040F
	CALL	C98C1
	LD	HL,I$0412
	CALL	C98C1
	LD	HL,I.0415
	CALL	C98C1
	LD	BC,(D.DAFB)
	LD	HL,(D.DAFD)
J9437:	PUSH	BC
	CALL	C94BE
	PUSH	HL
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	POP	HL
	CALL	C94BE
	POP	BC
	JR	NC,J944F
	LD	BC,I.0007
	JP	WRTVDP

J944F:	CP	1CH
	JR	NZ,J945F
	LD	A,C
	CP	02H	; 2 
	JR	Z,J9437
	INC	C
	LD	A,14H	; 20 
	ADD	A,H
	LD	H,A
	JR	J9437

J945F:	CP	1DH
	JR	NZ,J946E
	LD	A,C
	OR	A
	JR	Z,J9437
	DEC	C
	LD	A,0ECH
I946A:	ADD	A,H
	LD	H,A
	JR	J9437

J946E:	CP	1EH
	JR	NZ,J947C
	LD	A,B
	OR	A
	JR	Z,J9437
	DEC	B
	DEC	L
	DEC	L
	DEC	L
	JR	J9437

J947C:	CP	1FH
	JR	NZ,J948B
	LD	A,B
	CP	07H	; 7 
	JR	Z,J9437
I9485:	INC	B
	INC	L
	INC	L
	INC	L
	JR	J9437

J948B:	CP	0DH	; 13 
	JR	NZ,J9437
	LD	(D.DAFB),BC
	LD	(D.DAFD),HL
	LD	A,B
	SLA	A
	ADD	A,B
	ADD	A,C
	DI
	LD	HL,KEYBUF
	LD	(GETPNT),HL
	PUSH	HL
	INC	HL
	INC	HL
	LD	(PUTPNT),HL
	LD	HL,I94CB
	SLA	A
	CALL	C7CEF
	POP	DE
	LD	A,(HL)
	LD	(DE),A
	INC	DE
	INC	HL
	LD	A,(HL)
	LD	(DE),A
	EI
	LD	BC,I.0007
	JP	WRTVDP

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C94BE:	PUSH	AF
	PUSH	HL
	LD	DE,I$1202
	LD	A,0F3H
	CALL	C7F50
	POP	HL
	POP	AF
	RET

I94CB:	LD	BC,I.01F1
	JP	P,J$F301
	LD	BC,I.01F9
	CALL	P,C$2D1B
I94D7:	DEC	DE
	INC	(HL)
	DEC	DE
	DEC	(HL)
	DEC	DE
	LD	(DE),A
	DEC	DE
	LD	SP,I$321B
	DEC	DE
	INC	SP
	DEC	DE
	JR	C,J9501
	LD	(HL),1BH
	SCF
	DEC	DE
	LD	E,01H	; 1 
	RST	30H
	LD	BC,I$1BF8
	LD	A,A
	DEC	DE
	ADD	HL,SP
	DEC	DE
	JR	NC,J94F7
	PUSH	AF
J94F7:	LD	BC,I.00F6
	NOP
I94FB:	LD	SP,IA10B
	DEC	B
	SBC	A,(HL)
	INC	C
J9501:	LD	L,A
	RRCA
	LD	H,C
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C9504:	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	SBC	A,(HL)
	INC	C
	LD	L,A
	RRCA
I950D:	LD	H,C
	NOP
	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	SBC	A,(HL)
	INC	C
	LD	L,A
	RRCA
	DEFB	0,0
	CALL	C,C510C
	DEC	B
	LD	E,B
	EX	AF,AF'
	JP	Z,J610B
	NOP
	LD	E,0DH	; 13 
	LD	D,C
	DEC	B
	SBC	A,(HL)
	INC	C
	LD	L,A
	RRCA
	LD	H,C
	NOP
	JR	NC,J9534
	LD	A,D
	EX	AF,AF'
	SBC	A,(HL)
	INC	C
	LD	L,A
J9534:	RRCA
	DEFB	0,0
	CALL	C,C5E04
	LD	A,(BC)
	LD	E,B
	EX	AF,AF'
	JP	Z,J610B
	NOP
	OUT	(06H),A
	LD	E,(HL)
	LD	A,(BC)
	SBC	A,(HL)
	INC	C
	LD	L,A
	RRCA
	LD	H,C
	NOP
	LD	L,(HL)
	LD	BC,I$0794
	SUB	L
	LD	B,91H
	LD	BC,X.0000
	LD	H,(HL)
	DEC	BC
	CP	E
	INC	B
	OUT	(05H),A
	SBC	A,E
	LD	BC,I.0061
	LD	H,(HL)
	INC	B
	OUT	(05H),A
	SBC	A,E
	LD	BC,I.0061
	LD	H,C
	NOP
	LD	E,05H	; 5 
	SUB	H
I956C:	RLCA
	LD	E,B
	EX	AF,AF'
	ADC	A,B
	EX	AF,AF'
	DEFB	0,0
	INC	C
	ADD	HL,BC
	LD	C,(HL)
	ADD	HL,BC
	LD	A,L
	DEC	C
	ADC	A,B
	EX	AF,AF'
I957B:	LD	H,C
	NOP
	JP	JAC0D

?9580:	EX	AF,AF'
	CCF
	LD	A,(BC)
	JP	Z,J610B
	NOP
	JP	JAC0D

?958A:	EX	AF,AF'
	AND	D
	EX	AF,AF'
	SUB	H
	RLCA
	DEFB	0,0
I9591:	RET	C
	DEC	C
	LD	SP,I4809
	LD	A,(BC)
	LD	C,H
	INC	C
	LD	H,C
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	DJNZ	J95AD
	CP	A
	RRCA
	LD	H,C
	NOP
	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	DJNZ	J95B7
I95AA	EQU	$-1
	CP	A
	RRCA
J95AD:	DEFB	0,0
	RET	C
	DEC	C
	LD	A,D
	EX	AF,AF'
	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
J95B7:	LD	H,C
	NOP
	RRCA
	ADD	HL,BC
	LD	C,H
	RLCA
	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	LD	H,C
	NOP
I95C3:	DEC	SP
	DEC	BC
	RET	C
	DEC	C
	RRCA
	EX	AF,AF'
	INC	A
	ADD	HL,BC
	DEFB	0,0
	LD	E,05H	; 5 
	JP	M,J5800
	EX	AF,AF'
	JP	Z,J610B
	NOP
	JP	PE,J5B08
	RRCA
	LD	E,B
	EX	AF,AF'
	JP	Z,J.000B
	NOP
I95E1:	EI
	LD	IY,I$DA82
	CALL	C7F14
	LD	HL,I.D9C2
	LD	A,(HL)
	INC	HL
	CP	02H	; 2 
	LD	D,64H	; "d"
	JR	C,J95FA
	LD	A,0C8H
	JR	Z,J9609
	LD	D,00H
J95FA:	LD	A,(HL)
	INC	HL
	CP	1AH
	JR	Z,J9607
	LD	B,A
	RLCA
	RLCA
	ADD	A,B
	RLCA
	ADD	A,D
	LD	D,A
J9607:	LD	A,(HL)
	ADD	A,D
J9609:	LD	(D.DA80),A
	LD	A,0A9H
	LD	(D.DA81),A
J9611:	CALL	C7F56
	LD	A,60H	; "`"
	LD	HL,I.0200
	LD	DE,I.2002
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8887
I9624	EQU	$-1
	CALL	C98C1
	LD	A,40H	; "@"
	LD	HL,I$0602
	LD	DE,I$2C16
	CALL	C7F02
	LD	A,(D.DA80)
	CP	15H
	JR	NC,J963E
	LD	A,01H	; 1 
	JR	J964E

J963E:	LD	B,A
	LD	A,(D.DA81)
	SUB	14H	; 20 
	CP	B
	JR	NC,J964B
	SUB	13H	; 19 
	JR	J964E

J964B:	LD	A,B
	SUB	14H	; 20 
J964E:	LD	(D.DA80),A
	LD	IX,X.8000
	DEC	A
	JR	Z,J9660
	LD	B,A
	LD	DE,I.0078
J965C:	ADD	IX,DE
	DJNZ	J965C
J9660:	LD	HL,I$1804
J9663:	LD	A,0B8H
	CP	H
	JP	NZ,J96FD
	LD	D,01H	; 1 
	LD	A,(D.DA80)
	SUB	64H	; "d"
	JR	NC,J9676
	LD	D,00H
	ADD	A,64H	; "d"
J9676:	LD	(IY+1),D
	LD	D,00H
J967B:	SUB	0AH	; 10 
	JR	C,J9682
	INC	D
	JR	J967B

J9682:	ADD	A,0AH	; 10 
	PUSH	AF
	XOR	A
	OR	D
	JR	NZ,J968B
	LD	D,00H
J968B:	POP	AF
	LD	(IY+2),D
	LD	(IY+3),A
	LD	(IY+4),18H
	LD	A,04H	; 4 
	LD	DE,I$3403
	LD	HL,I.DA83
I969C	EQU	$-2
	CALL	C7F74
	LD	A,(IY+3)
	ADD	A,09H	; 9 
	CP	0AH	; 10 
	JR	C,J96AF
	SUB	0AH	; 10 
	INC	(IY+2)
J96AF:	LD	(IY+3),A
	LD	A,(IY+2)
	ADD	A,03H	; 3 
	CP	0AH	; 10 
	JR	C,J96C0
	SUB	0AH	; 10 
	INC	(IY+1)
J96C0:	LD	(IY+2),A
	LD	A,04H	; 4 
	LD	DE,I$3416
	LD	HL,I.DA83
	CALL	C7F74
J96CE:	CALL	C61D3			; beep
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	RET	C			; aborted,
	LD	HL,D.DA80
	CP	1EH			; CURSOR UP ?
	JR	NZ,J96E7		; nope,
	LD	A,(HL)
	CP	01H	; 1 
	JP	NZ,J9611
	JR	J96CE

J96E7:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J96CE		; nope,
	LD	B,(HL)
	LD	A,(D.DA81)
	SUB	28H	; "("
	CP	B
	JR	C,J96CE
	LD	A,28H	; "("
	ADD	A,B
	LD	(D.DA80),A
	JP	J9611

J96FD:	PUSH	HL
	PUSH	HL
	PUSH	IX
	POP	HL
I9702:	CALL	C7CD6			; read byte from RAM
	POP	HL
	CP	0FDH
	JP	Z,J9808
	CP	0FEH
	JP	Z,J980C
	LD	B,14H	; 20 
J9712:	LD	(IY+0),00H
	LD	E,02H	; 2 
J9718:	PUSH	IX
	CALL	C7B85
	LD	A,(IX+0)
	AND	0FH	; 15 
	JR	Z,J973C
	PUSH	HL
	LD	HL,I9829
	DEC	A
	CALL	C7CEF
	LD	A,(HL)
	BIT	1,E
	JR	Z,J9735
	RLCA
	RLCA
	RLCA
	RLCA
J9735:	OR	(IY+0)
	LD	(IY+0),A
	POP	HL
J973C:	LD	C,00H
	LD	A,(IX+1)
	CP	0A0H
	JR	NZ,J976A
	LD	A,(IX+2)
	CP	02H	; 2 
	JR	NZ,J976A
	LD	A,(IX+4)
	CP	61H	; "a"
	JR	Z,J9760
	CP	25H	; "%"
	JR	NZ,J9766
	LD	A,(IX+5)
	CP	01H	; 1 
	JR	NZ,J9766
	JR	J97AF

J9760:	LD	A,(IX+5)
	OR	A
I9764:	JR	Z,J97AF
J9766:	LD	C,0F0H
	JR	J97AF

J976A:	BIT	6,(IX+0)
	JR	Z,J9781
	XOR	A
	CP	(IX+1)
	JR	Z,J9778
	SET	5,C
J9778:	CP	(IX+2)
	JR	Z,J97AF
	SET	7,C
	JR	J97AF

J9781:	LD	A,(IX+1)
	CP	61H	; "a"
	JR	Z,J97A9
	CP	25H	; "%"
	JR	NZ,J9793
	LD	A,(IX+2)
	CP	01H	; 1 
	JR	Z,J97AF
J9793:	LD	A,(IX+1)
	CP	52H	; "R"
	JR	NZ,J97A5
	LD	A,(IX+2)
	CP	03H	; 3 
	JR	NZ,J97A5
	LD	C,40H	; "@"
	JR	J97AF

J97A5:	LD	C,0E0H
	JR	J97AF

J97A9:	LD	A,(IX+2)
	OR	A
	JR	NZ,J9793
J97AF:	POP	IX
	INC	IX
	INC	IX
	INC	IX
	DEC	E
	JR	Z,J97BE
	LD	D,C
	JP	J9718

J97BE:	LD	A,C
	RRCA
	RRCA
	RRCA
	RRCA
	ADD	A,D
	CALL	C97D3
	DEC	B
	JP	NZ,J9712
J97CB:	POP	HL
	LD	A,04H	; 4 
	ADD	A,H
	LD	H,A
	JP	J9663

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C97D3:	PUSH	BC
	PUSH	DE
	PUSH	HL
	LD	D,03H	; 3 
	CALL	C97E9
	LD	A,(IY+0)
	OR	A
	LD	D,01H	; 1 
	CALL	NZ,C97E9
	POP	HL
	INC	L
	POP	DE
	POP	BC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C97E9:	LD	B,08H	; 8 
	PUSH	HL
	SLA	L
	SLA	L
	SLA	L
	CALL	C7F44
J97F5:	RLCA
	PUSH	AF
	LD	A,0EEH
	JR	C,J97FD
	LD	A,44H	; "D"
J97FD:	OUT	(98H),A
	POP	AF
	DJNZ	J97F5
	POP	HL
	INC	H
	DEC	D
	JR	NZ,C97E9
	RET

J9808:	LD	A,22H	; """
	JR	J980E

J980C:	LD	A,66H	; "f"
J980E:	INC	H
	SLA	L
	SLA	L
	SLA	L
	CALL	C7F44
	LD	B,0A0H
J981A:	OUT	(98H),A
	PUSH	IX
	POP	IX
	DJNZ	J981A
	LD	DE,I.0078
	ADD	IX,DE
	JR	J97CB

I9829:	INC	B
	RLCA
	RLCA
	INC	B
	INC	B
	RLCA
	RLCA
	INC	C
	INC	C
	RRCA
	RRCA
	INC	C
	INC	C
	RRCA
	RRCA
I9838:	LD	HL,I.0212
	LD	BC,I.D924
	LD	A,(D.D907)
	LD	D,A
	LD	A,(D.D90E)
	SUB	D
	ADD	A,C
	LD	C,A
	LD	A,B
	ADC	A,00H
	LD	B,A
J984C:	LD	A,(BC)
	OR	A
	LD	A,20H	; " "
	JR	Z,J9854
	LD	A,17H
J9854:	CALL	C7EF0			; display character
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J985F
	INC	H
	INC	H
J985F:	INC	BC
	LD	A,H
	CP	3EH	; ">"
	JR	NZ,J984C
	RET

I9866:	EI
	XOR	A
	CALL	C8C65
	JR	NC,J9871
	CALL	C7ED2
	RET

J9871:	CALL	C7E9C
	RET	C
	CALL	C61D3			; beep
	LD	HL,(D.DA62)
	LD	DE,I.2800
	RST	20H
	LD	DE,(D.DA64)
	JR	Z,J98B7
	XOR	A
	PUSH	HL
	PUSH	HL
	SBC	HL,DE
	PUSH	HL
	POP	BC
	LD	HL,(D.DA67)
	SBC	HL,BC
	LD	(D.DA67),HL
	POP	BC
	LD	HL,I7800
	SBC	HL,BC
	PUSH	HL
	POP	BC
	POP	HL
	DI
	LD	A,0FFH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2,1 and 0
	LD	A,30H
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,1 and 0 (RAM), secundairy slot 3 on page 2 (FIRMWARE)
	LDIR
	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	LD	A,0FCH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2 and 1, primairy slot 0 on page 0
	EI
	CALL	C61D3			; beep
	RET

J98B7:	LD	(D.DA67),DE
	LD	A,0FFH
	CALL	C7CE0			; write byte to RAM
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C98C1:	LD	A,(D.DA8F)
	OR	A
	JR	Z,C98CD
	SRL	H
	LD	A,0FH	; 15 
	ADD	A,H
	LD	H,A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C98CD:	LD	A,(BC)
	LD	E,A
	INC	BC
	LD	A,(BC)
	LD	D,A
	INC	BC
	OR	E
	JR	NZ,J98D7
	RET

J98D7:	LD	A,(D.DA8F)
	OR	A
	CALL	Z,C7EE4
	CALL	NZ,C7EEA
	JR	C98CD

;	  Subroutine display string
;	     Inputs  ________________________
;	     Outputs ________________________

C98E3:	LD	A,(BC)
	INC	BC
	CP	0FFH
	JR	NZ,J98EA
	RET

J98EA:	CALL	C7EF0			; display character
	JR	C98E3

J98EF:	CALL	C7F56
	LD	HL,I.0200
	LD	A,60H	; "`"
	LD	DE,I.2002
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8635
	CALL	C98C1
	LD	BC,J8627
	CALL	C98CD
	LD	BC,I8B6F
	CALL	C98CD
	LD	HL,I.0E03
	LD	DE,I.240D
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I8635
	CALL	C98C1
	LD	BC,J8627
	CALL	C98CD
	LD	BC,I8B6F
	CALL	C98CD
	LD	HL,I.1407
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I870D
	CALL	C98CD
	LD	HL,I.140A
	LD	BC,I8667
	CALL	C98C1
	LD	HL,I.140D
	LD	BC,I8C47
	CALL	C9CFA
	LD	A,4
	CALL	C9351			; operate selection menu
	RET	C
	CALL	C7E42
	JR	C,J98EF
	RET

J995F:	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1C02
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I8B75
	CALL	C98CD
	LD	HL,I.0E03
	LD	DE,I.240D
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I8B75
	CALL	C98CD
	LD	HL,I.1407
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I865B
	CALL	C98CD
	LD	HL,I.140A
	LD	BC,I8667
	CALL	C98C1
	LD	HL,I.140D
	LD	BC,I8C47
	CALL	C9CFA
	LD	A,4
	CALL	C9351			; operate selection menu
	RET	C
	CALL	C7E48
	JR	C,J995F
	RET

I99C3:	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1802
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I864D
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I.240A
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I88A3
	CALL	C98C1
	LD	HL,I.1407
	LD	BC,I88B3
	CALL	C98C1
	LD	HL,I.140A
	LD	BC,I88BF
	CALL	C98C1
J9A00:	LD	A,3
	CALL	C9351			; operate selection menu
	RET

J9A06:	CALL	C7F56
;
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C9A09:	LD	HL,I.0200
J9A0C:	LD	DE,I.1802
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I88B3
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I.240D
I9A21	EQU	$-2
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I88F7
	CALL	C98C1
	LD	HL,I.1407
	LD	BC,I88DB
	CALL	C98C1
	LD	HL,I.140A
	LD	BC,I88E9
	CALL	C98C1
	LD	HL,I.140D
	LD	BC,I8C4F
	CALL	C9CFA
	LD	A,4
	CALL	C9351			; operate selection menu
	RET	C
	CALL	C7E4E
	JR	C,J9A06
	RET

I9A58:	LD	A,(H.KEYI+0)
	CP	0C9H
	JR	NZ,J9A80
	CALL	C61D3			; beep
	XOR	A
	LD	(D.DAD9),A
	LD	HL,I$1415
	LD	BC,I8737
	CALL	C98C1
	LD	B,02H	; 2 
J9A71:	LD	HL,IB000
J9A74:	DEC	HL
	LD	A,H
	OR	L
	JR	NZ,J9A74
	DJNZ	J9A71
	CALL	C61D3			; beep
	SCF
	RET

J9A80:	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1802
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I88BF
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I.240A
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I8907
	CALL	C98C1
	LD	HL,I.1407
	LD	BC,I8915
	CALL	C98C1
	LD	HL,I.140A
	LD	BC,I893B
	CALL	C98C1
	LD	A,3
	CALL	C9351			; operate selection menu
	RET

I9AC3:	CALL	C7F56
	LD	HL,I.0200
I9AC8	EQU	$-1
	LD	DE,I.2002
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I893B
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I.2413
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I894B
	CALL	C98C1
	LD	HL,I.1407
	LD	BC,I895B
	CALL	C98C1
	LD	HL,I.140A
	LD	BC,I896B
	CALL	C98C1
	LD	HL,I.140D
	LD	BC,I897B
	CALL	C98C1
C9B08	EQU	$-1
	LD	HL,I.1410
	LD	BC,I898B
	CALL	C98C1
	LD	HL,I.1413
	LD	BC,I899B
	CALL	C98C1
	LD	A,6
	CALL	C9351			; operate selection menu
	RET	C
	PUSH	AF
	XOR	A
	LD	(D.DB10),A
	LD	(D$F887),A
	POP	AF
	LD	HL,300
	DEC	A
	JR	Z,J9B4E
	LD	HL,600
	DEC	A
	JR	Z,J9B4E
	LD	HL,1200
	DEC	A
	JR	Z,J9B4E
	LD	HL,2400
	DEC	A
	JR	Z,J9B4E
	LD	HL,4800
	DEC	A
	JR	Z,J9B4E
	LD	(D.DB10),A
	LD	HL,9600
J9B4E:	PUSH	HL
	LD	HL,I9B73
	LD	DE,I.F528
	PUSH	DE
	LD	BC,13
	LDIR
	POP	DE
	POP	HL
	LD	(I.F528+8),HL		; receiver speed
	LD	(I.F528+10),HL		; sender speed
	LD	A,LOW I4010+3
	LD	(C.F882+2),A		; RS232.INIT
	EX	DE,HL
	LD	B,83H			; slot 3-0 (RAM)
	CALL	C.F882			; RS232 bios call
	EI
	CALL	C61D3			; beep
	RET

I9B73:	DEFB	"8N3XHNNN"
	DEFW	300
	DEFW	300
	DEFB	10

I9B80:	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1C02
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8907
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I$2407
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I89B7
	CALL	C98C1
	LD	HL,I.1407
	LD	BC,I89AB
	CALL	C98C1
	LD	A,2
	CALL	C9351			; operate selection menu
	RET

I9BBA:	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1C02
J9BC3:	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8915
	CALL	C98C1
	LD	HL,I$0C03
	LD	DE,I$2807
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I$0E04
	LD	BC,I89E3
	CALL	C98C1
	LD	HL,I$2207
	LD	BC,I89F7
	CALL	C98C1
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	RET

J9BF5:	CALL	C7F56
	LD	HL,I.0200
	LD	A,60H	; "`"
	LD	DE,I.2002
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I88A3
	CALL	C98C1
	LD	HL,I.0E03
	LD	DE,I$2410
	LD	A,0C0H
I9C13	EQU	$-1
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I868B
	CALL	C98C1
	LD	BC,I8693
	CALL	C98CD
	DEC	H
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J9C30
	DEC	H
	DEC	H
J9C30:	LD	BC,I8B6F
	CALL	C98CD
	LD	HL,I.1407
	LD	BC,I868B
	CALL	C98C1
	LD	BC,I8693
	CALL	C98CD
	DEC	H
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J9C4F
	DEC	H
	DEC	H
J9C4F:	LD	BC,I8B75
	CALL	C98CD
	LD	HL,I.140A
	LD	BC,I8C57
	CALL	C9CFA
	LD	HL,I.140D
	LD	BC,I868B
	CALL	C98C1
	LD	BC,I8693
	CALL	C98CD
	DEC	H
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J9C77
	DEC	H
	DEC	H
J9C77:	LD	BC,I8647
	CALL	C98CD
	LD	HL,I.1410
	LD	BC,I8857
	CALL	C98C1
	LD	A,5
	CALL	C9351			; operate selection menu
	RET	C
	CALL	C7E54
	JP	C,J9BF5
	RET

I9C93:	LD	HL,I.0E03
	LD	DE,I.2413
	LD	A,0C0H
	CALL	C7F50
	LD	HL,I.1404
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I862F
	CALL	C98CD
	LD	HL,I.1407
	LD	BC,I8635
	CALL	C98C1
	LD	BC,J8627
	CALL	C98CD
	LD	BC,I8B6F
	CALL	C98CD
	LD	HL,I.140A
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I8B75
	CALL	C98CD
	LD	HL,I.140D
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I8647
	CALL	C98CD
	LD	HL,I.1410
	LD	BC,I8AAF
	CALL	C98C1
	LD	HL,I.1413
	LD	BC,I864D
	CALL	C98C1
J9CF2:	LD	A,6
	CALL	C7C0E			; operate selection menu
	JR	C,J9CF2
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

C9CFA:	CALL	C98C1
	LD	DE,I8C67
	CALL	C7EF6
	LD	DE,I7299
	CALL	C7EF6
	LD	BC,I8C5F
	CALL	C98CD
	RET

J9D10:	LD	H,05H	; 5 
	LD	A,(D.DA8F)
	OR	A
	LD	L,01H	; 1 
	JR	Z,J9D1C
	LD	L,08H	; 8 
J9D1C:	LD	(D.D9E0),HL
J9D1F:	CALL	CA174
	LD	A,40H	; "@"
	LD	HL,I.3A11
	LD	DE,I.0402
	CALL	C7F50
	LD	BC,IA288
	LD	HL,I.3A11
	CALL	C98C1
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	BC,I8745
	CALL	CA1CE
	LD	BC,I875D
	CALL	CA1CE
	LD	BC,I8775
	CALL	CA1CE
	LD	BC,I8789
	CALL	CA1CE
	LD	BC,I87A5
	CALL	CA1CE
	CALL	CA1F4
	CALL	CA20D
J9D5F:	LD	HL,I$1204
	LD	BC,D.DA6E
	CALL	CA1D8
	LD	HL,I$1207
	LD	BC,D.DA70
	CALL	CA1D8
	LD	HL,I.120A
	LD	BC,D.DA6C
	CALL	CA1D8
	LD	HL,I$2A10
	LD	BC,I.DAAC
	CALL	CA1D8
J9D83:	CALL	C7F26
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	JR	NC,J9D92		; not aborted,
	CALL	C7F38
	RET

J9D92:	CP	1EH			; CURSOR UP ?
	JR	NZ,J9DA4		; nope,
	LD	A,(D.D9E1)
	CP	05H	; 5 
	JR	Z,J9D83
	SUB	03H	; 3 
	LD	(D.D9E1),A
	JR	J9D83

J9DA4:	CP	1DH			; CURSOR LEFT ?
	JR	NZ,J9DCA		; nope,
	LD	A,(D.D9E1)
	CP	0EH	; 14 
	JR	C,J9D83
	JR	NZ,J9DBD
	CALL	CA1F4
	XOR	A
	LD	(D.DA6B),A
	CALL	CA1F4
	JR	J9D83

J9DBD:	CALL	CA20D
	LD	A,0FFH
I9DC1	EQU	$-1
	LD	(D.DA72),A
	CALL	CA20D
	JR	J9D83

J9DCA:	CP	1CH			; CURSOR RIGHT ?
	JR	NZ,J9DFF		; nope,
	LD	A,(D.D9E1)
	CP	0EH	; 14 
	JR	C,J9D83
	JR	NZ,J9DF1
	LD	A,(D.DA94)
	OR	A
	JR	NZ,J9DE4
	LD	A,(D.DA98)
	BIT	6,A
	JR	NZ,J9D83
J9DE4:	CALL	CA1F4
I9DE5	EQU	$-2
	LD	A,0FFH
	LD	(D.DA6B),A
	CALL	CA1F4
	JR	J9D83

J9DF1:	CALL	CA20D
	LD	A,(D.DAAE)
	LD	(D.DA72),A
	CALL	CA20D
	JR	J9D83

J9DFF:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J9E21		; nope,
	LD	A,(OLDKEY+6)
	CP	0FEH			; SHIFT pressed ?
I9E08:	JR	Z,J9E19			; yep,
	LD	A,(D.D9E1)
	CP	11H	; 17 
	JR	Z,J9E19
	ADD	A,03H	; 3 
	LD	(D.D9E1),A
	JP	J9D83

J9E19:	LD	A,05H	; 5 
	LD	(D.D9E1),A
	JP	J9E82

J9E21:	CP	0DH			; RETURN ?
	JR	NZ,J9E40		; nope,
J9E25:	CALL	C7F38
	CALL	CAF85
	JP	NC,J9D10
	BIT	7,A
	JR	NZ,J9E38
	LD	(D.D9E1),A
	JP	J9D1F

J9E38:	AND	7FH
	LD	(D.D9E1),A
	JP	J9E82

J9E40:	CP	30H	; "0"
	JP	C,J9D83
	CP	3AH	; ":"
	JP	NC,J9D83
	LD	B,A
	LD	A,(D.D9E1)
	CP	0CH	; 12 
	JP	NC,J9D83
	CP	05H	; 5 
	JR	NZ,J9E64
	LD	A,(D.DA6F)
	LD	(D.DA6E),A
	LD	A,B
	LD	(D.DA6F),A
	JP	J9D5F

J9E64:	CP	08H	; 8 
	JR	NZ,J9E75
	LD	A,(D.DA71)
	LD	(D.DA70),A
	LD	A,B
	LD	(D.DA71),A
	JP	J9D5F

J9E75:	LD	A,(D.DA6D)
	LD	(D.DA6C),A
	LD	A,B
	LD	(D.DA6D),A
	JP	J9D5F

J9E82:	CALL	CA174
	LD	A,40H	; "@"
	LD	HL,I.3A03
	LD	DE,I.0402
	CALL	C7F50
	LD	HL,I.3A03
	LD	BC,IA28C
	CALL	C98C1
	LD	A,0CCH
	LD	(D.DAD9),A
	LD	BC,I8823
	CALL	CA1CE
	LD	DE,I$110F
	CALL	C7EF6
	LD	DE,I$1500
	CALL	C7EF6
	DEC	H
	LD	A,(D.DA8F)
	OR	A
	JR	NZ,J9EB8
	DEC	H
J9EB8:	LD	BC,I882F
	CALL	C98CD
	LD	BC,I883D
	CALL	CA1CE
	LD	BC,I8809
	CALL	CA1CE
	LD	BC,I87E7
	CALL	CA1CE
	LD	BC,I87C5
	CALL	CA1CE
J9ED6:	CALL	CA246
	CALL	CA268
	CALL	CA226
J9EDF:	LD	HL,I.120A
	LD	BC,D.DA95
	CALL	CA1D8
	LD	HL,I$1E0A
	LD	BC,D.DAB1
	CALL	CA1D8
	LD	HL,I.1210
	LD	DE,I.1802
	LD	A,0C0H
	CALL	C7F50
	LD	A,(D.DA8F)
	OR	A
	LD	BC,I.1210
	JR	Z,J9F07
	LD	B,18H
J9F07:	LD	HL,I$DA9F
J9F0A:	LD	A,(HL)
	CP	0FFH
	JR	Z,J9F1E
	LD	E,A
	INC	HL
	LD	D,(HL)
	INC	HL
	PUSH	HL
	PUSH	BC
	POP	HL
	CALL	C7EF6
I9F18	EQU	$-1
	LD	B,H
	LD	C,L
	POP	HL
	JR	J9F0A

J9F1E:	LD	BC,I$DAAF
	LD	HL,I$2E10
	CALL	CA1D8
J9F27:	CALL	C7F26
	CALL	C61DB
	CALL	C74AE			; get keyboard input
	JR	NC,J9F36		; not aborted,
	CALL	C7F38
	RET

J9F36:	CP	1EH			; CURSOR UP ?
	JR	NZ,J9F57		; nope,
	LD	A,(OLDKEY+6)
	CP	0FEH			; SHIFT pressed ?
	JR	Z,J9F4F			; yep,
	LD	A,(D.D9E1)
	CP	05H	; 5 
	JR	Z,J9F4F
	SUB	03H	; 3 
	LD	(D.D9E1),A
	JR	J9F27

J9F4F:	LD	A,11H	; 17 
	LD	(D.D9E1),A
	JP	J9D1F

J9F57:	CP	1FH			; CURSOR DOWN ?
	JR	NZ,J9F69		; nope,
	LD	A,(D.D9E1)
	CP	11H	; 17 
	JR	Z,J9F27
	ADD	A,03H	; 3 
	LD	(D.D9E1),A
	JR	J9F27

J9F69:	CP	1CH			; CURSOR RIGHT ?
	JP	NZ,JA028		; nope,
	LD	A,(D.D9E1)
	CP	08H	; 8 
	JR	NZ,J9F9B
I9F74	EQU	$-1
	LD	A,(D.DA94)
	OR	A
	JR	NZ,J9F83
	LD	A,(D.DA98)
	BIT	7,A
	JP	NZ,J9F27
J9F83:	LD	A,(D.DAC5)
	CP	0FFH
	JP	Z,J9F27
	CALL	CA268
	LD	A,(D.DAC5)
	DEC	A
	LD	(D.DAC5),A
	CALL	CA268
	JP	J9F27

J9F9B:	CP	05H	; 5 
	JR	NZ,J9FC5
	LD	A,(D.DA94)
	OR	A
	JR	NZ,J9FAD
	LD	A,(D.DA98)
	BIT	7,A
	JP	NZ,J9F27
J9FAD:	LD	A,(D.DAC4)
	CP	0FFH
	JP	Z,J9F27
	CALL	CA246
	LD	A,(D.DAC4)
	DEC	A
	LD	(D.DAC4),A
	CALL	CA246
	JP	J9F27

J9FC5:	CP	0EH	; 14 
	JR	NZ,J9FFB
	LD	A,(D.DA94)
	CP	0FFH
	JP	Z,J9F27
	OR	A
	LD	A,(D.DA98)
	JR	NZ,J9FF2
	BIT	1,A
	JP	Z,J9F27
	LD	A,01H	; 1 
J9FDE:	PUSH	AF
	CALL	CA226
	POP	AF
	LD	(D.DA94),A
	CALL	CA125
	CALL	CA246
	CALL	CA268
	JP	J9ED6

J9FF2:	BIT	2,A
	JP	Z,J9F27
	LD	A,0FFH
	JR	J9FDE

J9FFB:	CP	11H	; 17 
	JP	NZ,J9F27
	LD	A,(D.DAC6)
	OR	A
	LD	A,(D.DA6A)
	JR	NZ,JA010
	CP	03H	; 3 
	JP	Z,J9F27
	JR	JA015

JA010:	CP	19H
	JP	Z,J9F27
JA015:	INC	A
	LD	(D.DA6A),A
	CALL	CA246
	CALL	CA268
	CALL	CA226
	CALL	CA0F1
	JP	J9ED6

JA028:	CP	1DH			; CURSOR LEFT ?
	JP	NZ,JA0AB		; nope,
	LD	A,(D.D9E1)
	CP	08H	; 8 
	JR	NZ,JA04C
	LD	A,(D.DAC5)
	CP	01H	; 1 
	JP	Z,J9F27
	CALL	CA268
	LD	A,(D.DAC5)
	INC	A
	LD	(D.DAC5),A
	CALL	CA268
	JP	J9F27

JA04C:	CP	05H	; 5 
	JR	NZ,JA068
	LD	A,(D.DAC4)
	CP	01H	; 1 
	JP	Z,J9F27
	CALL	CA246
	LD	A,(D.DAC4)
	INC	A
	LD	(D.DAC4),A
	CALL	CA246
	JP	J9F27

JA068:	CP	0EH	; 14 
	JR	NZ,JA08C
	LD	A,(D.DA94)
	OR	A
	JP	Z,J9F27
	CP	01H	; 1 
	LD	A,(D.DA98)
	JR	NZ,JA082
	BIT	0,A
	JP	Z,J9F27
	XOR	A
	JR	JA089

JA082:	BIT	1,A
	JP	Z,J9F27
	LD	A,01H	; 1 
JA089:	JP	J9FDE

JA08C:	CP	11H	; 17 
	JP	NZ,J9F27
	LD	A,(D.DA6A)
	OR	A
	JP	Z,J9F27
	DEC	A
	LD	(D.DA6A),A
JA09C:	CALL	CA246
	CALL	CA268
	CALL	CA226
	CALL	CA0F1
	JP	J9ED6

JA0AB:	CP	0DH			; RETURN ?
	JP	Z,J9E25			; yep,
	CP	0BH			; HOME ?
	JR	NZ,JA0D1		; nope,
	LD	A,(OLDKEY+6)
	CP	0FCH			; CTRL+SHIFT pressed ?
	JP	NZ,J9F27		; nope,
	LD	A,(D.D9E1)
	CP	11H	; 17 
	JP	NZ,J9F27
	LD	A,(D.DAC6)
	CPL
	LD	(D.DAC6),A
	XOR	A
	LD	(D.DA6A),A
	JR	JA09C

JA0D1:	CP	30H	; "0"
	JP	C,J9F27
	CP	3AH	; ":"
	JP	NC,J9F27
	LD	B,A
	LD	A,(D.D9E1)
	CP	0BH	; 11 
	JP	NZ,J9F27
	LD	A,(D.DA96)
	LD	(D.DA95),A
	LD	A,B
	LD	(D.DA96),A
	JP	J9EDF

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA0F1:	LD	HL,IBA56
	LD	A,(D.DA6A)
	OR	A
	JR	Z,JA107
	LD	B,A
	LD	DE,I.0007
JA0FE:	ADD	HL,DE
JA0FF:	LD	A,(HL)
	INC	HL
	CP	0FFH
	JR	NZ,JA0FF
	DJNZ	JA0FE
JA107:	LD	BC,20
	LD	DE,D.DA98
IA10B	EQU	$-2
	PUSH	DE
	LDIR
	POP	HL
	BIT	0,(HL)
	JR	Z,JA118
	XOR	A
	JR	JA122

JA118:	BIT	1,(HL)
	JR	Z,JA120
	LD	A,01H	; 1 
	JR	JA122

JA120:	LD	A,0FFH
JA122:	LD	(D.DA94),A
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA125:	LD	HL,I$DA99
	LD	A,(D.DA94)
	OR	A
	JR	Z,JA135
	INC	HL
	INC	HL
	DEC	A
	JR	Z,JA135
	INC	HL
	INC	HL
JA135:	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	PUSH	DE
	POP	HL
	LD	DE,I.DAAC
	LD	BC,24
	LDIR
	LD	HL,(D.DAB1)
	LD	(D.DA95),HL
	LD	A,(D.DA94)
	OR	A
	JR	NZ,JA167
	LD	A,(D.DA98)
	BIT	6,A
	JR	Z,JA15B
	PUSH	AF
	XOR	A
	LD	(D.DA6B),A
	POP	AF
JA15B:	BIT	7,A
	JR	Z,JA167
	LD	A,01H	; 1 
	LD	(D.DAC4),A
	LD	(D.DAC5),A
JA167:	LD	A,(D.DA72)
	CP	0FFH
	RET	Z
	LD	A,(D.DAAE)
	LD	(D.DA72),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA174:	CALL	C7F38
	CALL	C7F56
	LD	HL,I.0200
	LD	DE,I.1C02
	LD	A,60H	; "`"
	CALL	C7F50
	LD	HL,I.0400
	LD	BC,I8625
	CALL	C98C1
	LD	BC,I8647
	CALL	C98CD
	LD	HL,I.0003
	LD	DE,I4010
	LD	A,0C0H
	CALL	C7F50
	LD	HL,C.0014
	LD	DE,I4004
	LD	A,0D0H
	CALL	C7F50
	LD	HL,I.0415
	LD	BC,I8867
	CALL	C98C1
	LD	B,05H	; 5 
	LD	DE,I887D
JA1B8:	PUSH	DE
	PUSH	HL
	EX	DE,HL
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	POP	HL
	CALL	C7EF6
	POP	DE
	INC	DE
	INC	DE
	DJNZ	JA1B8
	LD	BC,I8875
	CALL	C98CD
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA1CE:	LD	A,(BC)
	LD	L,A
	INC	BC
	LD	A,(BC)
	LD	H,A
	INC	BC
	CALL	C98C1
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA1D8:	LD	A,(D.DA8F)
	OR	A
	JR	Z,JA1E4
	SRL	H
	LD	A,0FH	; 15 
	ADD	A,H
	LD	H,A
JA1E4:	LD	A,(BC)
	LD	D,01H	; 1 
	LD	E,A
	PUSH	BC
	CALL	C7B13
	POP	BC
	INC	BC
	LD	A,(BC)
	LD	E,A
	CALL	C7B13
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA1F4:	LD	A,(D.DA6B)
	OR	A
	LD	HL,I.120D
	LD	DE,I$0C02
	JR	Z,JA202
	LD	H,22H	; """
JA202:	LD	A,0F3H
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA20D:	LD	A,(D.DA72)
	INC	A
	LD	HL,I.1210
	LD	DE,I.0802
	JR	Z,JA21B
	LD	H,1EH
JA21B:	LD	A,0F3H
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA226:	LD	A,(D.DA94)
	OR	A
	LD	HL,I.120D
	LD	DE,I.0802
	JR	Z,JA23B
	DEC	A
	LD	D,0CH	; 12 
	LD	H,1EH
	JR	Z,JA23B
	LD	H,2EH	; "."
JA23B:	LD	A,0F3H
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA246:	LD	A,(D.DAC4)
	OR	A
	LD	HL,I$1C04
	LD	DE,I.0402
	JR	Z,JA25D
	DEC	A
	LD	H,12H	; 18 
	LD	D,06H	; 6 
	JR	Z,JA25D
	LD	H,24H	; "$"
	LD	D,08H	; 8 
JA25D:	LD	A,0F3H
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA268:	LD	A,(D.DAC5)
	OR	A
	LD	HL,I$1A07
	LD	DE,I.0402
	JR	Z,JA27D
	DEC	A
	LD	H,12H	; 18 
	JR	Z,JA27D
	LD	D,08H	; 8 
	LD	H,22H	; """
JA27D:	LD	A,0F3H
	CALL	C7F50
	LD	A,0CCH
	LD	(D.DAD9),A
	RET

IA288:	CALL	X.0000
	NOP
IA28C:	CALL	Z,X.0000
	NOP
IA290:	LD	IX,I.2800
	XOR	A
	LD	(D.DAC8),A
	LD	(D.DAC9),A
	LD	A,(OLDKEY+6)
	CP	0FCH			; CTRL+SHIFT pressed ?
	CALL	Z,CA473			; yep,
	LD	(D.DA88),SP
	LD	A,(D.DAC2)
	CP	1BH
	JP	NC,JA2B7
JA2AF:	CALL	C61D3			; beep
	LD	SP,(D.DA88)
	RET

JA2B7:	LD	A,01H	; 1 
	LD	(D.DAC7),A
	LD	(D.DA76),A
	LD	HL,(D.DA95)
	LD	A,L
	CP	33H	; "3"
	JR	NC,JA2AF
	AND	0FH	; 15 
	SLA	A
	LD	L,A
	SLA	A
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,H
	AND	0FH	; 15 
	ADD	A,L
	LD	(D.DA97),A
	LD	A,(D.DA6B)
	LD	(D.DA77),A
	LD	A,(D.DA72)
	LD	(D.DA75),A
	LD	B,00H
	CALL	CB082
	RET

IA2EB:	LD	IX,I.2800
	LD	(D.DA88),SP
JA2F3:	XOR	A
	LD	(D.DAC8),A
	INC	A
	LD	(D.DAC9),A
	CALL	CA38C
	RET	C
	LD	HL,C.0010
	LD	DE,I4007
	XOR	A
	CALL	C7F02
	LD	BC,I$F52C
	LD	HL,I.0212
	LD	DE,I$0B02
JA312:	PUSH	DE
	LD	A,(BC)
	INC	BC
	LD	E,A
	LD	A,(BC)
	LD	D,A
	INC	BC
	INC	BC
	XOR	A
	CALL	C7AE5
	POP	DE
	DEC	D
	JR	NZ,JA312
	LD	HL,I.0215
	LD	BC,I$F550
	LD	D,0FH	; 15 
	DEC	E
	JR	NZ,JA312
JA32D:	CALL	C61DB
	CALL	C74AE			; get keyboard input
	RET	C			; aborted, quit
	CP	1FH			; CURSOR DOWN ?
	JP	Z,JA2F3			; yep,
	CP	0DH			; RETURN ?
	JR	NZ,JA348		; nope,
	LD	A,(OLDKEY+6)
	CP	0FCH			; CTRL+SHIFT pressed ?
	CALL	Z,CA473			; yep,
	JP	JA2F3

JA348:	CP	1EH			; CURSOR UP ?
	JR	NZ,JA32D		; nope,
	LD	DE,(D.DACA)
	PUSH	DE
	POP	IX
	LD	HL,I.2800
	RST	20H
	JP	Z,JA2F3
	DI
	LD	A,30H
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,1 and 0 (RAM), secunairy slot 3 on page 2 (FIRMWARE)
	LD	A,0FFH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2,1 and 0
IA363	EQU	$-1
JA364:	LD	B,H
	LD	C,L
JA366:	LD	A,(HL)
	INC	HL
	OR	A
	JR	NZ,JA366
	LD	A,(HL)
	INC	HL
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,00H
	ADC	A,H
	LD	H,A
	CP	D
	JR	NZ,JA364
	LD	A,L
	CP	E
	JR	NZ,JA364
	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	LD	A,0FCH
	OUT	(0A8H),A		; primairy slot 3 on page 3,2 and 1, primairy slot 0 on page 0
	EI
	PUSH	BC
	POP	IX
	JP	JA2F3

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA38C:	PUSH	IX
	POP	HL
	LD	(D.DACA),HL
	PUSH	HL
	CALL	C7CD6			; read byte from RAM
	CP	0FFH
	JP	Z,JA45F
	LD	B,A
	LD	A,(D.DAC8)
	OR	A
	JR	Z,JA3A6
	CP	B
	JP	NZ,JA45F
JA3A6:	LD	HL,I.F528
	PUSH	HL
	LD	(HL),00H
	INC	HL
	LD	(HL),61H	; "a"
	INC	HL
	LD	(HL),00H
	INC	HL
	EX	DE,HL
	POP	HL
	PUSH	DE
	LD	BC,I$007B
	LDIR
	EXX
	POP	HL
	INC	HL
	LD	(HL),9AH
	INC	HL
	LD	(HL),00H
	INC	HL
	EXX
	POP	HL
JA3C6:	CALL	C7CD6			; read byte from RAM
	INC	HL
	OR	A
	JR	Z,JA3FB
	CP	0A6H
	JR	C,JA3E3
	CP	0C0H
	JR	NC,JA3DD
	CP	0B0H
	JR	Z,JA3E3
	SUB	20H	; " "
	JR	JA3E3

JA3DD:	CP	0DEH
	JR	NC,JA3E3
	ADD	A,20H	; " "
JA3E3:	CP	0DEH
	JP	Z,JA423
	CP	0DFH
	JP	Z,JA444
JA3ED:	CALL	C8D9B
	PUSH	DE
	EXX
	POP	DE
	INC	HL
	LD	(HL),E
	INC	HL
	LD	(HL),D
	INC	HL
	EXX
	JR	JA3C6

JA3FB:	EXX
	INC	HL
	LD	(HL),9BH
	INC	HL
	LD	(HL),00H
	LD	HL,I$F54F
	EXX
	CALL	C7CD6			; read byte from RAM
	INC	HL
	LD	B,A
JA40B:	CALL	C7CD6			; read byte from RAM
	INC	HL
	EXX
	INC	HL
	LD	(HL),A
	INC	HL
	EXX
	CALL	C7CD6			; read byte from RAM
	INC	HL
	EXX
	LD	(HL),A
	INC	HL
	EXX
	DJNZ	JA40B
	PUSH	HL
	POP	IX
	OR	A
	RET

JA423:	EXX
	DEC	HL
	LD	D,(HL)
IA426:	DEC	HL
	LD	E,(HL)
	LD	A,D
	EXX
	PUSH	HL
	EXX
	CALL	C7CB0
	EXX
	POP	HL
	EXX
	LD	A,0DEH
	JR	C,JA43E
	LD	(HL),E
	INC	HL
	LD	(HL),D
	INC	HL
	EXX
	JP	JA3C6

JA43E:	INC	HL
	INC	HL
	EXX
	JP	JA3ED

JA444:	EXX
	DEC	HL
	LD	D,(HL)
	DEC	HL
	LD	E,(HL)
	LD	A,D
	EXX
	PUSH	HL
	EXX
	CALL	C7CB6
	EXX
	POP	HL
	EXX
	LD	A,0DFH
	JR	C,JA43E
	LD	(HL),E
	INC	HL
	LD	(HL),D
	INC	HL
	EXX
	JP	JA3C6

JA45F:	POP	HL
	LD	A,(D.DAC9)
	OR	A
	SCF
	RET	NZ
	LD	A,H
	OR	A
	JP	Z,JB2DC
	LD	A,0CH	; 12 
	CALL	CB3AE
	JP	JB2DC

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA473:	CALL	C61DB
	CALL	C74AE			; get keyboard input
	RET	C			; aborted, quit
	CP	20H			; control code ?
	RET	C			; yep, quit
	CP	86H
	JR	C,JA48F
	CP	0A0H
	JR	NC,JA489
	ADD	A,20H	; " "
	JR	JA48F

JA489:	CP	0E0H
	JR	C,JA48F
	SUB	20H	; " "
JA48F:	LD	(D.DAC8),A
	DI
	LD	HL,I.2800
	LD	A,30H
	LD	(D.FFFF),A		; secundairy slot 0 on page 3,1 and 0 (RAM), secundairy slot 3 on page 2 (FIRMWARE)
	LD	A,0FFH
	OUT	(0A8H),A
JA49F:	LD	A,(HL)
	CP	0FFH
	JR	NZ,JA4A7
	POP	HL
	JR	JA4AE

JA4A7:	LD	B,A
	LD	A,(D.DAC8)
	CP	B
	JR	NZ,JA4BF
JA4AE:	LD	A,3CH
	LD	(D.FFFF),A		; secundairy slot 0 on page 3 and 0 (RAM), secundairy slot 3 on page 2 and 1 (FIRMWARE)
	LD	A,0FCH
	OUT	(0A8H),A
	EI
	PUSH	HL
	CALL	C61D3			; beep
	POP	IX
	RET

JA4BF:	LD	A,(HL)
	INC	HL
	OR	A
	JR	NZ,JA4BF
	LD	A,(HL)
	INC	HL
	LD	B,A
JA4C7:	INC	HL
	INC	HL
	DJNZ	JA4C7
	JR	JA49F

JA4CD:	CALL	CA757
JA4D0:	LD	A,(D.DAC7)
	OR	A
	JR	NZ,JA4DB
	CALL	C7BA4
	JR	JA4DE

JA4DB:	CALL	CA38C
JA4DE:	PUSH	IX
	LD	IX,I.F52B
	XOR	A
	LD	(D.DA79),A
	LD	(D.D921),A
	LD	(D.DA7E),A
	LD	(D.DA7F),A
	LD	A,(IX+0)
	CP	0FDH
	JP	Z,JA5C9
	CP	0FEH
	JP	Z,JA5D2
	PUSH	IX
	CALL	CA68E
JA503:	LD	A,(IX+0)
	LD	H,A
	LD	A,(D.DA79)
	OR	H
	LD	(D.DA79),A
	LD	A,(IX+0)
	LD	D,(IX+2)
	LD	E,(IX+1)
	BIT	6,A
	JP	Z,JA52D
	LD	A,(D.DA7F)
	OR	A
	CALL	Z,CA768
	CALL	CA645
	LD	A,0FFH
	LD	(D.DA7F),A
	JR	JA543

JA52D:	LD	A,(D.DA7F)
	OR	A
	CALL	NZ,CA775
	XOR	A
	LD	(D.DA7F),A
	CALL	CA6A2
	JR	Z,JA549
	CALL	CA790
	CALL	CA5D6
JA543:	CALL	CA77A
	CALL	CA79C
JA549:	INC	IX
	INC	IX
	INC	IX
	LD	A,(D.D921)
	INC	A
	LD	(D.D921),A
	CP	28H	; "("
	JR	NZ,JA503
	POP	IX
	CALL	CA77A
	CALL	CA775
	CALL	CA7A6
	LD	A,(D.DA79)
	AND	1FH
	JR	Z,JA575
	CALL	CA68E
	CALL	CA7B4
	CALL	CA6B4
JA575:	CALL	CA7AD
	POP	IX
	LD	A,(D.DAC7)
	OR	A
	JR	NZ,JA585
	LD	DE,I.0078
	ADD	IX,DE
JA585:	LD	A,(D.DA75)
	CP	0FFH
	JP	Z,JA4D0
	DEC	A
	LD	(D.DA75),A
	JP	NZ,JA4D0
JA594:	LD	A,(D.DA72)
	LD	(D.DA75),A
	LD	A,(D.DAC7)
	OR	A
	JR	NZ,JA5C1
	LD	A,(D.DA74)
	DEC	A
	LD	(D.DA74),A
	JR	NZ,JA5C1
	LD	A,(D.DA7C)
	LD	(D.DA74),A
JA5AF:	LD	A,0CH	; 12 
	CALL	CB3AE
	LD	A,(D.DA76)
	DEC	A
	LD	(D.DA76),A
	JP	Z,JB2DC
	JP	JAFC2

JA5C1:	LD	A,0CH	; 12 
	CALL	CB3AE
	JP	JA4D0

JA5C9:	POP	IX
	LD	DE,I.0078
	ADD	IX,DE
	JR	JA594

JA5D2:	POP	IX
	JR	JA5AF

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA5D6:	LD	HL,I.2121
	LD	A,0FFH
	CP	D
	JR	Z,JA641
	LD	A,01H	; 1 
	CP	D
	JR	NZ,JA5E8
	LD	A,25H	; "%"
	CP	E
	JR	Z,JA641
JA5E8:	LD	A,(D.DA6A)
	CP	03H	; 3 
	CALL	Z,CB3CD
	EX	DE,HL
	CALL	CA7E3
	LD	A,(D.DA6A)
	CP	03H	; 3 
	JR	Z,JA641
	LD	B,A
	LD	A,28H	; "("
	CP	H
	JR	NZ,JA61A
	LD	A,72H	; "r"
	CP	L
	JR	NZ,JA641
	LD	HL,I$272B
	LD	A,(D.DA6B)
	OR	A
	JR	Z,JA610
	DEC	HL
JA610:	LD	A,18H
	CP	B
	JR	Z,JA641
	LD	HL,I$2C26
	JR	JA641

JA61A:	LD	A,22H	; """
	CP	H
	JR	NZ,JA641
	LD	A,2EH	; "."
	CP	L
	JR	NC,JA641
	LD	A,6BH	; "k"
	CP	L
	JR	C,JA641
	LD	DE,IA897
	LD	A,18H
	CP	B
	JR	Z,JA634
	LD	DE,IA911
JA634:	LD	A,L
	SUB	2FH	; "/"
	SLA	A
	LD	L,A
	LD	H,00H
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
JA641:	CALL	CA81B
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA645:	LD	A,(D.DA6A)
	CP	03H	; 3 
	JR	NZ,JA65E
	LD	A,D
	LD	B,02H	; 2 
JA64F:	ADD	A,20H	; " "
	CP	80H
	JR	C,JA657
	ADD	A,20H	; " "
JA657:	CALL	CB3AE
	LD	A,E
	DJNZ	JA64F
	RET

JA65E:	CP	18H
	JR	NZ,JA679
	LD	A,D
	LD	B,02H	; 2 
JA665:	LD	H,28H	; "("
	ADD	A,20H	; " "
	CP	80H
	JR	C,JA671
	LD	A,21H	; "!"
	LD	H,21H	; "!"
JA671:	LD	L,A
	CALL	CA81B
	LD	A,E
	DJNZ	JA665
	RET

JA679:	LD	A,D
	LD	B,02H	; 2 
JA67C:	LD	H,00H
	ADD	A,20H	; " "
	CP	80H
	JR	C,JA686
	ADD	A,20H	; " "
JA686:	LD	L,A
	CALL	CA81B
	LD	A,E
	DJNZ	JA67C
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA68E:	PUSH	AF
	PUSH	HL
	LD	A,(D.DA97)
	OR	A
	JR	Z,JA69F
	LD	B,A
JA697:	LD	HL,I.2121
	CALL	CA81B
	DJNZ	JA697
JA69F:	POP	HL
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA6A2:	LD	A,D
	CP	02H	; 2 
	RET	NZ
	LD	A,E
	CP	0A0H
	RET	NZ
	LD	A,0EH	; 14 
	LD	(D.DA7E),A
	CALL	CB3AE
	XOR	A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA6B4:	XOR	A
	LD	(D.D921),A
JA6B8:	LD	A,(IX+0)
	LD	B,A
	LD	HL,X.0000
	AND	1FH
	JR	Z,JA730
	AND	0FH	; 15 
	JR	Z,JA723
	DEC	A
	LD	E,A
	SLA	A
	ADD	A,E
	LD	D,00H
	LD	E,A
	LD	C,A
	SLA	E
	RL	D
	SLA	E
	RL	D
	SLA	E
	RL	D
	LD	A,(D.DA6A)
	LD	HL,IACB5
	CP	19H
	JR	Z,JA6F0
	LD	HL,IA98B
	LD	A,C
	ADD	A,E
	LD	E,A
	LD	A,00H
	ADC	A,D
	LD	D,A
JA6F0:	SLA	E
	RL	D
	ADD	HL,DE
	LD	E,B
	LD	A,(D.DA6A)
	LD	D,A
	LD	B,18H
	CP	19H
	JR	Z,JA702
	LD	B,1BH
JA702:	XOR	A
	BIT	4,E
	JR	Z,JA710
	LD	A,19H
	CP	D
	LD	A,02H	; 2 
	JR	Z,JA710
	LD	A,40H	; "@"
JA710:	LD	C,(HL)
	OR	C
	CALL	CB3AE
	INC	HL
	LD	A,(HL)
	CALL	CB3AE
	INC	HL
	XOR	A
	CALL	CB3AE
	DJNZ	JA702
	JR	JA744

JA723:	LD	A,(D.DA6A)
	LD	HL,I4000
	CP	19H
	JR	NZ,JA730
	LD	HL,I.0200
JA730:	LD	A,(D.DA6A)
	LD	B,1BH
	CP	19H
	JR	NZ,JA73B
	LD	B,18H
JA73B:	CALL	CA81B
	XOR	A
	CALL	CB3AE
	DJNZ	JA73B
JA744:	INC	IX
	INC	IX
IA747	EQU	$-1
	INC	IX
	LD	A,(D.D921)
	INC	A
	LD	(D.D921),A
	CP	28H	; "("
	JP	NZ,JA6B8
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA757:	LD	HL,IA826
	LD	A,08H	; 8 
JA75C:	CALL	CA7CE
	LD	B,A
JA760:	LD	A,(HL)
	CALL	CB3AE
	INC	HL
	DJNZ	JA760
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA768:	LD	HL,IA83E
JA76B:	LD	A,(D.DA6A)
	CP	19H
	RET	Z
	LD	A,05H	; 5 
	JR	JA75C

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA775:	LD	HL,IA848
	JR	JA76B

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA77A:	LD	A,(D.DA7E)
	OR	A
	RET	Z
	XOR	A
	LD	(D.DA7E),A
	LD	A,01H	; 1 
	LD	HL,IA852
	CALL	CA7CE
	LD	A,(HL)
	CALL	CB3AE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA790:	LD	A,(D.DA6B)
	OR	A
	RET	Z
	LD	HL,IA855
JA798:	LD	A,02H	; 2 
	JR	JA75C

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA79C:	LD	A,(D.DA6B)
	OR	A
	RET	Z
	LD	HL,IA85B
	JR	JA798

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA7A6:	LD	HL,IA861
	LD	A,06H	; 6 
	JR	JA75C

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA7AD:	LD	HL,IA873
	LD	A,06H	; 6 
	JR	JA75C

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA7B4:	LD	HL,IA885
	LD	A,(D.DA6A)
	LD	B,04H	; 4 
	CP	03H	; 3 
	JR	Z,JA760
	LD	HL,JA88B
	INC	B
	CP	18H
	JR	Z,JA760
	INC	B
	LD	HL,IA891
	JR	JA760

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA7CE:	PUSH	AF
	PUSH	DE
	LD	D,00H
	LD	E,A
	LD	A,(D.DA6A)
	CP	03H	; 3 
	JR	Z,JA7E0
	ADD	HL,DE
	CP	18H
	JR	Z,JA7E0
	ADD	HL,DE
JA7E0:	POP	DE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA7E3:	PUSH	AF
	PUSH	DE
	LD	DE,I.0400
	RST	20H
	LD	A,20H	; " "
	JR	C,JA7FD
	LD	D,10H	; 16 
	RST	20H
	LD	A,30H	; "0"
	LD	D,04H	; 4 
	JR	C,JA7FA
	LD	D,10H	; 16 
	LD	A,50H	; "P"
JA7FA:	OR	A
	SBC	HL,DE
JA7FD:	CALL	CA809
	ADD	A,H
	LD	H,A
	LD	A,20H	; " "
	ADD	A,L
	LD	L,A
	POP	DE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA809:	PUSH	AF
	PUSH	DE
	XOR	A
	LD	DE,I$0060
JA80F:	SBC	HL,DE
	JR	C,JA816
	INC	A
	JR	JA80F

JA816:	ADD	HL,DE
	LD	H,A
	POP	DE
	POP	AF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CA81B:	PUSH	AF
	LD	A,H
	CALL	CB3AE
	LD	A,L
	CALL	CB3AE
	POP	AF
	RET

IA826:	DEC	DE
	LD	A,1BH
	INC	H
	LD	B,B
	DEC	DE
	JR	C,JA83D
	DEFB	0,0,0
	INC	E
	LD	H,1CH
	LD	D,L
	INC	D
	DEFB	0,0
	DEC	DE
	LD	A,11H	; 17 
	DEC	DE
	LD	C,E
JA83D:	RRCA
IA83E:	DEC	DE
	JR	Z,JA88B
	DEC	DE
	LD	E,(HL)
	INC	E
	RRCA
	DEFB	0,0,0
IA848:	DEC	DE
	LD	E,L
	DEC	DE
	INC	H
	LD	B,B
	INC	E
	LD	(DE),A
	DEFB	0,0,0
IA852:	RRCA
	INC	D
	RRCA
IA855:	DEC	DE
	SCF
	INC	E
	LD	C,D
	DEC	DE
	LD	(HL),H
IA85B:	DEC	DE
	JR	C,JA87A
	LD	C,E
	DEC	DE
	LD	C,E
IA861:	DEC	DE
	LD	D,A
	JR	NC,JA895
	LD	SP,I$1B36
	INC	SP
	JR	JA878

?A86B:	LD	A,(BC)
	NOP
	DEC	DE
	LD	D,H
	LD	SP,I$0D38
	LD	A,(BC)
IA873:	DEC	DE
	LD	D,A
	JR	NC,JA8A7
	LD	SP,I$1B31
JA878	EQU	$-2
JA87A:	INC	SP
	DJNZ	JA88A
	LD	A,(BC)
	NOP
	DEC	DE
	LD	D,H
	LD	SP,I$0D32
	LD	A,(BC)
IA885:	DEC	DE
	LD	C,C
	INC	B
	JR	C,JA88A
JA88A:	NOP
JA88B:	DEC	DE
	LD	HL,(D$3827)
	INC	B
	NOP
IA891:	DEC	DE
	LD	C,D
	JR	NC,JA8CE
JA895:	LD	(HL),30H	; "0"
IA897:	JR	NZ,JA8BA
	JR	NZ,JA8BD
	LD	E,C
	LD	H,5AH	; "Z"
	LD	H,5BH	; "["
	LD	H,5CH	; "\"
	LD	H,5DH	; "]"
	LD	H,5EH	; "^"
	LD	H,5FH	; "_"
JA8A7	EQU	$-1
	LD	H,60H	; "`"
	LD	H,61H	; "a"
	LD	H,62H	; "b"
	LD	H,67H	; "g"
	INC	HL
	LD	L,L
	INC	HL
	LD	A,(D$3926)
	LD	H,3BH	; ";"
	LD	H,3CH	; "<"
JA8BA:	LD	H,3DH	; "="
	LD	H,7AH	; "z"
JA8BD	EQU	$-1
	DEC	H
	LD	(HL),A
	DEC	H
	LD	A,B
	DEC	H
	LD	A,L
	INC	H
	JR	NZ,JA8EE
	LD	E,(HL)
	INC	HL
	LD	E,A
	INC	HL
	LD	H,B
	INC	HL
	LD	HL,I.2121
JA8CE	EQU	$-2
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
JA8EE:	LD	HL,I.2121
	LD	HL,I7121
	LD	H,72H	; "r"
	LD	H,73H	; "s"
	LD	H,74H	; "t"
	LD	H,75H	; "u"
	LD	H,76H	; "v"
	LD	H,77H	; "w"
	LD	H,78H	; "x"
	LD	H,79H	; "y"
	LD	H,7AH	; "z"
	LD	H,21H	; "!"
	LD	HL,I.2121
	LD	E,L
	INC	HL
	LD	A,E
	INC	H
	LD	HL,I6A21
IA911	EQU	$-1
	DEC	L
	LD	L,E
	DEC	L
	DEC	(HL)
	DEC	L
	LD	(HL),2DH	; "-"
	SCF
	DEC	L
	JR	C,JA94A
	ADD	HL,SP
	DEC	L
	LD	A,(D$3B2D)
	DEC	L
	INC	A
	DEC	L
	DEC	A
	DEC	L
	LD	A,2DH	; "-"
	LD	H,A
	INC	HL
	LD	L,L
	INC	HL
	LD	D,C
	DEC	L
	LD	D,B
	DEC	L
	LD	D,D
	DEC	L
	LD	HL,I5621
	DEC	L
	LD	HL,I5321
	DEC	L
	LD	D,H
	DEC	L
	LD	HL,I6C21
	DEC	L
	LD	H,E
	DEC	L
	LD	H,H
	DEC	L
	LD	H,D
	DEC	L
	LD	HL,I.2121
JA94A:	LD	HL,I$2D44
	LD	B,E
	DEC	L
	LD	B,D
	DEC	L
	LD	B,B
	DEC	L
	LD	B,A
	DEC	L
	LD	B,(HL)
	DEC	L
	LD	C,E
	DEC	L
	LD	B,L
	DEC	L
	LD	B,C
	DEC	L
	LD	HL,I.2121
	LD	HL,I$2D49
	LD	C,B
	DEC	L
	LD	C,L
	DEC	L
	LD	C,A
	DEC	L
	LD	HL,I.2121
	LD	HL,I$2D21
	LD	(D$232D),HL
	DEC	L
	INC	H
	DEC	L
	DEC	H
	DEC	L
	LD	H,2DH	; "-"
	DAA
	DEC	L
	JR	Z,JA9AA
	ADD	HL,HL
	DEC	L
	LD	HL,(D$212D)
	LD	HL,I.2121
	LD	HL,I.2121
	LD	HL,I.2121
IA98B:	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0
	INC	BC
	RST	38H
	INC	BC
	RST	38H
	DEFB	0,0,0,0,0
JA9AA:	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0
	INC	BC
	RST	38H
	INC	BC
	RST	38H
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0
	RST	38H
	INC	BC
	RST	38H
	INC	BC
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0
	RST	38H
	NOP
	RST	38H
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	RST	38H
	INC	BC
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	RST	38H
	INC	BC
	RST	38H
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	RST	38H
	NOP
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0
JAC0D:	DEFB	0,0,0,0,0,0
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	RST	38H
	NOP
	RST	38H
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	RST	38H
	RST	38H
	RST	38H
	RST	38H
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	NOP
	INC	BC
	DEFB	0
IACB5:	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0
	LD	BC,I.0100
	NOP
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CAD00:	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,X.0000
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0
	RST	38H
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0
	RST	38H
	RST	38H
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0,0
	RST	38H
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,X.0000
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	RST	38H
	RST	38H
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
IAE09:	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,X.0000
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.FF00
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.FF00
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.01FF
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,D.FFFF
	DEFB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DEFB	0,0,0,0,0
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.01FF
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,D.FFFF
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
	NOP
	LD	BC,I.0100
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CAF85:	LD	(D.DA88),SP
	LD	HL,(D.DA6C)
	LD	A,H
	CP	30H	; "0"
	JR	NZ,JAF94
	CP	L
	JR	Z,JAFD3
JAF94:	LD	A,L
	AND	0FH	; 15 
	SLA	A
	LD	L,A
	SLA	A
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,H
	AND	0FH	; 15 
	ADD	A,L
	LD	(D.DA76),A
	LD	HL,(D.DA95)
	LD	A,33H	; "3"
	CP	L
	JR	C,JAFD6
	LD	A,L
	AND	0FH	; 15 
	SLA	A
	LD	L,A
	SLA	A
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,H
	AND	0FH	; 15 
	ADD	A,L
	LD	(D.DA97),A
JAFC2:	LD	HL,(D.DA6E)
	LD	A,H
	CP	30H	; "0"
	JR	NZ,JAFE3
	CP	L
	JR	NZ,JAFE3
JAFCD:	LD	A,05H	; 5 
	LD	BC,I$083E
JAFD0	EQU	$-2
	LD	BC,I$0B3E
JAFD3	EQU	$-2
	LD	BC,I8B3E
JAFD6	EQU	$-2
	PUSH	AF
	CALL	C61D3			; beep
	POP	AF
	SCF
	LD	SP,(D.DA88)
	RET

JAFE3:	LD	A,(D.DA70)
	CP	L
	JR	C,JAFD0
	JR	NZ,JAFF1
	LD	A,(D.DA71)
	CP	H
	JR	C,JAFD0
JAFF1:	LD	A,L
	AND	0FH	; 15 
	SLA	A
	LD	L,A
	SLA	A
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,H
	AND	0FH	; 15 
IB000:	DEC	A
	ADD	A,L
	LD	(D.DA73),A
	LD	HL,(D.DA70)
	LD	A,L
	AND	0FH	; 15 
	SLA	A
	LD	L,A
	SLA	A
	SLA	A
	ADD	A,L
	LD	L,A
	LD	A,H
	AND	0FH	; 15 
	ADD	A,L
	PUSH	AF
	LD	A,(D.DA73)
	LD	L,A
	POP	AF
	SUB	L
	LD	(D.DA74),A
	LD	(D.DA7C),A
	LD	HL,X.8000
	LD	A,(D.DA73)
JB02B:	OR	A
	JR	Z,JB05C
	LD	A,(D.DA72)
	LD	(D.DA75),A
JB034:	CALL	C7CD6			; read byte from RAM
	CP	0FEH
	JR	Z,JAFCD
	CP	0FDH
	JR	Z,JB04F
	LD	A,(D.DA75)
	DEC	A
	LD	(D.DA75),A
	OR	A
	JR	Z,JB04F
	LD	DE,I.0078
	ADD	HL,DE
	JR	JB034

JB04F:	LD	DE,I.0078
	ADD	HL,DE
	LD	A,(D.DA73)
	DEC	A
	LD	(D.DA73),A
	JR	JB02B

JB05C:	LD	A,0CFH
	CP	H
	JR	NZ,JB067
	LD	A,38H	; "8"
	CP	L
	JP	Z,JAFCD
JB067:	LD	A,(D.DA72)
	LD	(D.DA75),A
	LD	A,(D.DA6B)
	LD	(D.DA77),A
	PUSH	HL
	LD	BC,I8647
	CALL	C71AB
	POP	IX
	XOR	A
	LD	(D.DAC7),A
	LD	B,00H
;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB082:	XOR	A
	CALL	CB3AE
	DJNZ	CB082
	LD	A,(D.DAC1)
	CP	04H	; 4 
	JP	Z,JA4CD
	CALL	CB344
JB093:	LD	A,(D.DAC7)
	OR	A
	JR	NZ,JB09E
	CALL	C7BA4
	JR	JB0A1

JB09E:	CALL	CA38C
JB0A1:	PUSH	IX
	LD	IX,I.F52B
	XOR	A
	LD	(D.DA8C),A
	LD	(D.DA8B),A
	LD	(D.DA79),A
	LD	(D.DA7B),A
	LD	(D.DA7F),A
	LD	(D.DA7E),A
	LD	(D.D921),A
	LD	A,(IX+0)
	CP	0FDH
	JP	Z,JB2C2
	CP	0FEH
	JP	Z,JB2CB
	LD	A,(D.DAC1)
	OR	A
	CALL	Z,CB34B
	CALL	CB37F
	CALL	CB35F
	PUSH	IX
JB0D9:	LD	H,(IX+0)
	LD	A,(D.DA79)
	OR	H
	LD	(D.DA79),A
	CALL	CB398
	JR	NC,JB10D
	LD	A,(IX+0)
	BIT	6,A
	JR	Z,JB0F4
	CALL	CB3B5
	JR	JB10D

JB0F4:	CALL	CB337
	LD	A,D
	CP	04H	; 4 
	JR	NC,JB10D
	CP	02H	; 2 
	JR	NZ,JB10A
	LD	A,E
	CP	0A0H
	JR	NZ,JB10A
	LD	(D.DA7E),A
	JR	JB11A

JB10A:	CALL	CB3CD
JB10D:	XOR	A
	CALL	CB3FD
	JP	C,JB2DC
	LD	A,(D.DA77)
	LD	(D.DA6B),A
JB11A:	INC	IX
	INC	IX
	INC	IX
	LD	A,(D.D921)
	INC	A
	LD	(D.D921),A
	LD	HL,D.DAC2
	CP	(HL)
	JR	NZ,JB0D9
	CALL	CB2F1
	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	Z,JB1B2
	XOR	A
	LD	(D.DA8B),A
	LD	(D.DA7E),A
	LD	(D.D921),A
	CALL	CB34B
	POP	IX
	PUSH	IX
	CALL	CB37F
	CALL	CB35F
JB14E:	CALL	CB398
	JR	NC,JB18E
	LD	A,(D.DAC1)
	CP	08H	; 8 
	JR	Z,JB169
	LD	A,D
	CP	03H	; 3 
	JR	NZ,JB169
	LD	A,E
	CP	52H	; "R"
	JR	NZ,JB169
	LD	DE,I.0061
	JR	JB18E

JB169:	LD	A,(IX+0)
	BIT	6,A
	JR	Z,JB175
	CALL	CB3B5
	JR	JB18E

JB175:	CALL	CB337
	LD	A,D
	CP	04H	; 4 
	JR	NC,JB18E
	CP	02H	; 2 
	JR	NZ,JB18B
	LD	A,E
	CP	0A0H
	JR	NZ,JB18B
	LD	(D.DA7E),A
	JR	JB19C

JB18B:	CALL	CB3CD
JB18E:	LD	A,01H	; 1 
	CALL	CB3FD
	JP	C,JB2DC
	LD	A,(D.DA77)
	LD	(D.DA6B),A
JB19C:	INC	IX
	INC	IX
	INC	IX
	LD	A,(D.D921)
	INC	A
	LD	(D.D921),A
	LD	HL,D.DAC2
	CP	(HL)
	JR	NZ,JB14E
	CALL	CB2F1
JB1B2:	XOR	A
	LD	(D.DA8B),A
	LD	(D.DA7E),A
	LD	(D.D921),A
	CALL	CB355
	POP	IX
	LD	A,(D.DAC5)
	OR	A
	JR	NZ,JB1DF
JB1C7:	XOR	A
	LD	(D.DA79),A
	LD	(D.DA7B),A
	POP	IX
	LD	A,(D.DAC7)
	OR	A
	JP	NZ,JB28E
	LD	DE,I.0078
	ADD	IX,DE
	JP	JB28E

JB1DF:	DEC	A
	JR	Z,JB1E8
	LD	A,(D.DA7B)
	OR	A
	JR	NZ,JB1C7
JB1E8:	LD	A,(D.DA79)
	AND	1FH
	JP	Z,JB267
	CALL	CB37F
	CALL	CB35F
	XOR	A
	LD	(D.DA6B),A
	DEC	A
	LD	(D.DA7A),A
JB1FE:	CALL	CB324
	LD	A,(IX+0)
	AND	1FH
	JR	NZ,JB20D
JB208:	LD	DE,I.0061
	JR	JB21A

JB20D:	AND	0FH	; 15 
	JR	Z,JB208
	LD	HL,IB656
	CALL	C7CEF
	LD	E,(HL)
	LD	D,03H	; 3 
JB21A:	EX	DE,HL
	CALL	C7B41
	LD	A,(D.DA77)
	OR	A
	JR	NZ,JB232
	LD	A,0FFH
	BIT	4,(IX+0)
	JR	Z,JB232
	LD	(D$D950),A
	LD	(D$D958),A
JB232:	BIT	1,(IX+0)
	JR	Z,JB23B
	LD	(D$D95C),A
JB23B:	LD	BC,IB244
	PUSH	BC
	PUSH	HL
	PUSH	AF
	JP	JB447

IB244:	JP	C,JB2DC
	INC	IX
	INC	IX
	INC	IX
	LD	A,(D.D921)
	INC	A
	LD	(D.D921),A
	LD	HL,D.DAC2
	CP	(HL)
	JR	NZ,JB1FE
	CALL	CB2F1
	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	NZ,JB267
	CALL	CB2F1
JB267:	LD	A,(D.DA77)
	LD	(D.DA6B),A
	XOR	A
	LD	(D.DA8B),A
	LD	(D.DA7A),A
	LD	(D.D921),A
	LD	(D.DA79),A
	LD	(D.DA7B),A
	CALL	CB355
	POP	IX
	LD	A,(D.DAC7)
	OR	A
	JP	NZ,JB28E
	LD	DE,I.0078
	ADD	IX,DE
JB28E:	LD	A,(D.DA75)
	CP	0FFH
	JP	Z,JB093
	DEC	A
	LD	(D.DA75),A
	JP	NZ,JB093
JB29D:	LD	A,(D.DA72)
	LD	(D.DA75),A
	LD	A,(D.DAC7)
	OR	A
	JR	NZ,JB2BA
	LD	A,(D.DA74)
	DEC	A
	LD	(D.DA74),A
	JR	NZ,JB2BA
	LD	A,(D.DA7C)
	LD	(D.DA74),A
	JR	JB2CD

JB2BA:	LD	A,0CH	; 12 
	CALL	CB3AE
	JP	JB093

JB2C2:	POP	IX
	LD	DE,I.0078
	ADD	IX,DE
	JR	JB29D

JB2CB:	POP	IX
JB2CD:	LD	A,0CH	; 12 
	CALL	CB3AE
	LD	A,(D.DA76)
	DEC	A
	LD	(D.DA76),A
	JP	NZ,JAFC2
JB2DC:	XOR	A
	LD	(D.DA7A),A
	LD	(D.DA79),A
	LD	(D.DA7B),A
	LD	A,(D.DA77)
	LD	(D.DA6B),A
	LD	SP,(D.DA88)
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB2F1:	PUSH	HL
	LD	A,(D.DA7E)
	LD	BC,I$0024
	OR	A
	JR	NZ,JB2FD
	LD	C,12H	; 18 
JB2FD:	LD	A,(D.DA94)
	BIT	7,A
	LD	A,(D.DA8B)
	JR	Z,JB309
	ADD	A,A
	ADD	A,C
JB309:	ADD	A,C
	LD	C,A
	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	NZ,JB319
	LD	A,C
	ADD	A,C
	LD	C,A
	LD	A,00H
	ADC	A,B
	LD	B,A
JB319:	XOR	A
	CALL	CB3AE
	DEC	BC
	LD	A,B
	OR	C
	JR	NZ,JB319
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB324:	LD	A,(IX+1)
	CP	0A0H
	JR	NZ,CB337
	LD	A,(IX+2)
	CP	02H	; 2 
	JR	NZ,CB337
	LD	A,(IX+5)
	JR	JB33A

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB337:	LD	A,(IX+2)
JB33A:	CP	0FFH
	RET	NZ
	LD	(D.DA7B),A
	LD	(D.DA8C),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB344:	LD	HL,I$DAB3
	LD	B,03H	; 3 
	JR	CB372

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB34B:	LD	HL,I$DAB6
	LD	B,03H	; 3 
	CALL	CB372
	JR	JB367

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB355:	LD	HL,I$DAB9
	LD	B,03H	; 3 
	CALL	CB372
	JR	JB367

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB35F:	LD	HL,I$DABC
	LD	B,05H	; 5 
	JP	CB372

JB367:	LD	A,0DH	; 13 
	CALL	CB3AE
	LD	A,0AH	; 10 
	CALL	CB3AE
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB372:	LD	A,1BH
	CALL	CB3AE
JB377:	LD	A,(HL)
	CALL	CB3AE
	INC	HL
	DJNZ	JB377
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB37F:	LD	A,(D.DA97)
	OR	A
	RET	Z
	SLA	A
	LD	B,A
	LD	A,(D.DA94)
	INC	A
	JR	NZ,JB390
	LD	A,B
	ADD	A,B
	LD	B,A
JB390:	LD	A,20H	; " "
	CALL	CB3AE
	DJNZ	JB390
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB398:	LD	D,(IX+2)
	LD	E,(IX+1)
	LD	A,E
	CP	25H	; "%"
	JR	NZ,JB3AC
	LD	A,D
	CP	01H	; 1 
	JR	NZ,JB3AC
	LD	DE,I.0061
	RET

JB3AC:	SCF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB3AE:	CALL	LPTOUT
	JP	C,JB2DC
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB3B5:	LD	(D.DA7F),A
	LD	A,(D.DA6B)
	OR	A
	RET	Z
	BIT	6,(IX-3)
	JR	NZ,JB3C8
	BIT	6,(IX+3)
	RET	Z
JB3C8:	XOR	A
	LD	(D.DA6B),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB3CD:	LD	A,(D.DA6B)
	OR	A
	RET	Z
	LD	A,D
	CP	03H	; 3 
	JR	Z,JB3F7
	OR	A
	RET	NZ
	LD	A,E
	CP	63H	; "c"
	JR	Z,JB3EE
	CP	62H	; "b"
	JR	Z,JB3EE
	CP	7CH	; "|"
	RET	C
	CP	9CH
	RET	NC
	CP	80H
	RET	Z
	CP	7FH
	RET	Z
JB3EE:	LD	A,E
	ADD	A,0A0H
	LD	E,A
	LD	A,D
	ADC	A,02H	; 2 
	LD	D,A
	RET

JB3F7:	LD	A,E
	CP	52H	; "R"
	RET	NZ
	DEC	E
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB3FD:	PUSH	HL
	PUSH	AF
	LD	A,(D.DA7F)
	OR	A
	JR	Z,JB443
	LD	H,00H
	LD	A,D
	CP	60H	; "`"
	JR	C,JB40E
	LD	H,03H	; 3 
JB40E:	PUSH	DE
	LD	L,A
	CALL	C7B41
	EX	DE,HL
	LD	DE,I.D98D
	LD	BC,32
	LDIR
	POP	DE
	LD	H,00H
	LD	A,E
	CP	60H	; "`"
	JR	C,JB426
	LD	H,03H	; 3 
JB426:	LD	L,A
	CALL	C7B41
	EX	DE,HL
	LD	DE,I$D995
	LD	BC,8
	LDIR
	LD	B,8
JB435:	INC	DE
	INC	HL
	DJNZ	JB435
	LD	BC,8
	LDIR
	LD	DE,I.D98D
	JR	JB447

JB443:	EX	DE,HL
	CALL	C7B41
JB447:	EX	DE,HL
	LD	DE,I.DA1B
	LD	BC,32
	LDIR
	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	Z,JB463
	LD	D,A
	LD	A,(D.DA7A)
	OR	A
	JR	NZ,JB473
	LD	A,D
	CP	08H	; 8 
	JR	NZ,JB473
JB463:	CALL	CB5DB
	LD	HL,I.DA1B
	LD	DE,I.D9EA
	LD	BC,32
	LDIR
	JR	JB49A

JB473:	CALL	CB5DB
	LD	DE,I.DA1B
	LD	HL,I.D9EA
	CALL	CB620
	LD	DE,I$DA1C
	LD	HL,I.D9FA
	CALL	CB620
	LD	DE,I.DA2B
	LD	HL,I$D9EE
	CALL	CB620
	LD	DE,I$DA2C
	LD	HL,I$D9FE
	CALL	CB620
JB49A:	LD	HL,I.D9EA
	LD	DE,I.DA1B
	CALL	CB636
	POP	AF
	LD	HL,I.DA1B
	OR	A
	JR	Z,JB4AD
	LD	HL,I.DA2B
JB4AD:	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	NZ,JB4B7
	LD	HL,I.DA1B
JB4B6	EQU	$-1
JB4B7:	LD	B,08H	; 8 
	CALL	CB599
	JP	C,JB5B6
	LD	A,(D.DA7F)
	OR	A
	JR	Z,JB4DA
	LD	A,(D.DA6B)
	OR	A
	JR	NZ,JB4DA
	LD	B,01H	; 1 
	CALL	CB554
	JR	C,JB4DA
	PUSH	HL
	LD	HL,I.D912
	CALL	CB599
	POP	HL
JB4DA:	LD	B,08H	; 8 
	CALL	CB599
	JP	C,JB5B6
	LD	A,(D.DA7F)
	OR	A
	JR	Z,JB500
	LD	A,(D.DA6B)
	OR	A
	JR	NZ,JB500
	LD	B,01H	; 1 
	CALL	CB554
	JR	C,JB54B
	LD	HL,I.D912
	CALL	CB599
	JP	C,JB5B6
	JR	JB54B

JB500:	DEC	HL
	LD	A,(D.DAC1)
	LD	E,A
	LD	B,02H	; 2 
	CALL	CB554
	JR	C,JB54B
JB50C:	LD	A,(D.DA7A)
	OR	A
	JR	Z,JB523
	LD	A,(D.DAC3)
	OR	A
	LD	A,(HL)
	JR	Z,JB523
	LD	D,08H	; 8 
	LD	C,(HL)
JB51C:	RLC	C
	RR	A
	DEC	D
	JR	NZ,JB51C
JB523:	LD	C,A
	CALL	CB5CE
	JP	C,JB5B6
	LD	A,E
	CP	02H	; 2 
	JR	NZ,JB533
	XOR	A
	CALL	LPTOUT
JB533:	LD	A,(D.DA7E)
	OR	A
	JR	Z,JB549
	LD	A,C
	CALL	CB5CE
	JP	C,JB5B6
	LD	A,E
	CP	02H	; 2 
	JR	NZ,JB549
	XOR	A
	CALL	LPTOUT
JB549:	DJNZ	JB50C
JB54B:	POP	HL
	XOR	A
	LD	(D.DA7E),A
	LD	(D.DA7F),A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB554:	OR	A
	PUSH	HL
	PUSH	AF
	LD	A,(D.DAC4)
	OR	A
	JR	Z,JB566
	DEC	A
	JR	Z,JB57C
	LD	A,(D.DA8C)
	OR	A
	JR	Z,JB57C
JB566:	LD	HL,D.DA8B
	LD	A,(D.DA7E)
	OR	A
	LD	A,B
	JR	Z,JB572
	SLA	A
JB572:	ADD	A,(HL)
	LD	(HL),A
	XOR	A
	LD	(D.DA8C),A
	POP	AF
	SCF
	POP	HL
	RET

JB57C:	POP	AF
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB57F:	PUSH	HL
	PUSH	AF
	LD	A,(D.DAC1)
	CP	02H	; 2 
	JR	NZ,JB596
	LD	A,10H	; 16 
	CALL	C7CEF
	PUSH	BC
	CALL	CB5BD
	LD	A,C
	CALL	LPTOUT
	POP	BC
JB596:	POP	AF
	POP	HL
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB599:	CALL	CB5BD
	LD	A,C
	CALL	CB5CE
	RET	C
	CALL	CB57F
	LD	A,(D.DA7E)
	OR	A
	JR	Z,JB5B2
	LD	A,C
	CALL	CB5CE
	RET	C
	CALL	CB57F
JB5B2:	INC	HL
	DJNZ	CB599
	RET

JB5B6:	XOR	A
	LD	(INTFLG),A		; reset STOP or CTRL-STOP flag
	POP	HL
	SCF
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB5BD:	LD	C,(HL)
	LD	A,(D.DAC3)
	OR	A
	RET	Z
	LD	D,08H	; 8 
JB5C5:	RLC	C
	RR	A
	DEC	D
	JR	NZ,JB5C5
	LD	C,A
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB5CE:	CALL	LPTOUT
	LD	A,(D.DA94)
	INC	A
	RET	NZ
	LD	A,C
	CALL	LPTOUT
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB5DB:	LD	A,(D.DA6B)
	OR	A
	RET	Z
	LD	HL,I.D9FA
	LD	DE,I.DA1B
	PUSH	DE
	CALL	CB60E
	LD	HL,I.D9EA
	PUSH	HL
	LD	DE,I$DA23
	CALL	CB60E
	LD	HL,I$DA02
	LD	DE,I.DA2B
	CALL	CB60E
	LD	HL,I$D9F2
	LD	DE,I$DA33
	CALL	CB60E
	POP	HL
	POP	DE
	LD	BC,32
	LDIR
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB60E:	LD	C,08H	; 8 
JB610:	LD	B,08H	; 8 
	LD	A,(DE)
	PUSH	HL
JB614:	RRA
	RL	(HL)
	INC	HL
	DJNZ	JB614
	POP	HL
	INC	DE
	DEC	C
	JR	NZ,JB610
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB620:	LD	C,02H	; 2 
JB622:	PUSH	HL
	LD	B,04H	; 4 
JB625:	LD	A,(DE)
	LD	(HL),A
	INC	DE
	INC	DE
	INC	HL
	DJNZ	JB625
	POP	HL
	LD	A,08H	; 8 
	CALL	C7CEF
	DEC	C
	JR	NZ,JB622
	RET

;	  Subroutine __________________________
;	     Inputs  ________________________
;	     Outputs ________________________

CB636:	LD	A,04H	; 4 
JB638:	PUSH	AF
	PUSH	HL
	LD	C,08H	; 8 
JB63C:	LD	B,08H	; 8 
	POP	HL
	PUSH	HL
JB640:	RLC	(HL)
	RRA
	INC	HL
	DJNZ	JB640
	LD	(DE),A
	INC	DE
	DEC	C
	JR	NZ,JB63C
	POP	HL
	LD	A,08H	; 8 
	CALL	C7CEF
	POP	AF
	DEC	A
	JR	NZ,JB638
	RET

IB656:	NOP
	RLCA
	DEC	B
	LD	D,H
	LD	B,52H	; "R"
	LD	D,E
	LD	E,B
	INC	B
	LD	D,L
	LD	D,C
	LD	E,C
	LD	D,(HL)
	LD	E,D
	LD	D,A
	LD	E,E
	INC	SP
	LD	(HL),24H	; "$"
	INC	(HL)
	JR	NC,JB69C
	INC	(HL)
	LD	A,1BH
	LD	C,L
	LD	D,H
	LD	SP,I5436
	LD	SP,I4936
	JR	NC,JB6B0
	LD	(D.0230),A
	JR	Z,JB67E
JB67E:	INC	(HL)
	JR	NC,JB6A9
	INC	(HL)
	JR	NC,JB6B4
	LD	(HL),45H	; "E"
	DEC	DE
	LD	A,54H	; "T"
	JR	NC,JB6BC
	LD	D,H
	LD	SP,I5335
	JR	NC,JB6C8
	LD	(X.0030),A
	JR	Z,JB696
JB696:	INC	(HL)
	JR	NC,JB6C1
	INC	(HL)
	JR	NC,JB6CC
JB69C:	LD	(D.0F3E),A
	NOP
	LD	D,H
	JR	NC,JB6D4
	LD	D,H
	LD	SP,I7335
	JR	NC,JB6E0
JB6A9:	LD	(X.0030),A
	JR	Z,JB6AE
JB6AE:	INC	(HL)
	JR	NC,JB6D9
JB6B0	EQU	$-1
	INC	(HL)
	JR	NC,JB6E5
JB6B4:	LD	SP,I.1B51
	LD	A,54H	; "T"
	JR	NC,JB6EC
	LD	D,H
JB6BC:	LD	SP,I5335
	JR	NC,JB6F8
JB6C1:	LD	(X.0030),A
	JR	Z,JB6C6
JB6C6:	INC	(HL)
	JR	NC,JB6F1
JB6C8	EQU	$-1
	INC	(HL)
	JR	NC,JB6FC
JB6CC:	LD	(HL),51H	; "Q"
	DEC	DE
	LD	A,54H	; "T"
	JR	NC,JB704
	LD	D,H
JB6D4:	LD	SP,I5335
	JR	NC,JB710
JB6D9:	LD	(X.0030),A
	JR	Z,JB6DE
JB6DE:	INC	(HL)
	JR	NC,JB709
JB6E0	EQU	$-1
	INC	(HL)
	JR	NC,JB714
	LD	(HL),3EH	; ">"
JB6E5	EQU	$-1
	DEC	DE
	LD	C,L
	LD	D,H
	LD	SP,I5436
JB6EC:	LD	SP,I4936
	JR	NC,JB728
JB6F1:	LD	(D.0230),A
	JR	Z,JB6F6
JB6F6:	INC	SP
	LD	(HL),24H	; "$"
JB6F8	EQU	$-1
	LD	(D.3032),A
JB6FC:	LD	(D.0F3E),A
	NOP
	LD	D,H
	JR	NC,JB734
	LD	D,H
JB704:	LD	SP,I5335
	JR	NC,JB73C
JB709:	ADD	HL,SP
	LD	(HL),00H
	LD	D,00H
	INC	SP
	LD	(D$3420),A
JB710	EQU	$-2
	JR	NC,JB744
JB714:	INC	(HL)
	LD	D,B
	DEFB	0,0
	LD	D,H
	LD	SP,I5436
	LD	SP,I4936
	JR	NC,JB758
	LD	(D.0230),A
	JR	Z,JB726
JB726:	LD	(D$1430),A
JB728	EQU	$-1
	LD	SP,D.3036
	LD	SP,I.0F42
	NOP
	LD	D,H
	JR	NC,JB764
	LD	D,H
JB734:	LD	SP,I5335
	JR	NC,JB76B
	JR	C,JB773
	NOP
JB73C:	DJNZ	JB73E
JB73E:	INC	(HL)
	JR	NC,JB769
	INC	SP
	LD	(D.3230),A
JB744	EQU	$-1
	LD	C,A
	JR	JB757

?B748:	LD	D,H
	JR	NC,JB77C
	LD	D,H
	LD	SP,I5335
	JR	NC,JB786
	SCF
	LD	(HL),00H
	JR	NZ,JB756
JB756:	INC	(HL)
JB757:	JR	NC,JB781
JB758	EQU	$-1
	INC	(HL)
	JR	NC,JB78C
	LD	(HL),30H	; "0"
	RRCA
	NOP
	LD	D,H
	JR	NC,JB794
	LD	D,H
JB764:	LD	SP,I4C35
	JP	NC,J.0002
JB769	EQU	$-1
	DEFB	0
JB76B:	DEFB	0
	JR	Z,JB76F
	INC	(HL)
JB76F:	JR	NC,JB799
	INC	(HL)
	JR	NC,JB7A4
JB773	EQU	$-1
	INC	(HL)
	LD	D,L
	LD	BC,I.3300
	LD	BC,I.3300
JB77C:	RLA
	NOP
	LD	C,H
	JP	NC,J.0002
JB781	EQU	$-1
	DEFB	0,0
	JR	Z,JB787
JB786:	LD	(D.1834),A
JB787	EQU	$-2
	INC	(HL)
	JR	NC,JB7BC
JB78C:	INC	(HL)
	LD	A,1BH
	LD	C,L
	LD	D,H
	LD	SP,I5436
JB794:	LD	SP,I5336
	JR	NC,JB7D0
JB799:	LD	(D.0830),A
	JR	Z,JB79E
JB79E:	INC	SP
	JR	NC,JB7BF
	INC	(HL)
	JR	NC,JB7D4
JB7A4:	LD	(HL),45H	; "E"
	DEC	DE
	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB7E8
	LD	(D.0830),A
	JR	Z,JB7B6
JB7B6:	LD	(D.1A36),A
	INC	(HL)
	JR	NC,JB7EC
JB7BC:	LD	(D.0F3E),A
JB7BF:	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I7336
	JR	NC,JB800
	LD	(D.0830),A
	JR	Z,JB7CE
JB7CE:	LD	(D.1C38),A
JB7D0	EQU	$-1
	INC	(HL)
	JR	NC,JB805
JB7D4:	LD	SP,I.1B51
	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB818
	LD	(D.0830),A
	JR	Z,JB7E6
JB7E6:	INC	SP
	JR	NC,JB807
JB7E8	EQU	$-1
	INC	(HL)
	JR	NC,JB81C
JB7EC:	LD	(HL),51H	; "Q"
	DEC	DE
	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB830
	LD	(D.0830),A
	JR	Z,JB7FE
JB7FE:	INC	SP
	JR	NC,JB81F
JB800	EQU	$-1
	INC	(HL)
	JR	NC,JB834
	LD	(HL),3EH	; ">"
JB805	EQU	$-1
	DEC	DE
JB807:	LD	C,L
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB848
	LD	(D.0830),A
	JR	Z,JB816
JB816:	LD	(D.1834),A
JB818	EQU	$-1
	LD	(D.3036),A
JB81C:	LD	(D.0F3E),A
JB81F:	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB85D
	LD	(HL),38H	; "8"
	EX	AF,AF'
	LD	A,(DE)
	NOP
	LD	(D.1834),A
JB830	EQU	$-1
	LD	(D.3032),A
JB834:	LD	(D.0F3E),A
	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB874
	ADD	HL,SP
	LD	(HL),08H	; 8 
	LD	D,00H
	LD	(D.1632),A
JB848	EQU	$-1
	INC	(HL)
	JR	NC,JB87C
	INC	(HL)
	LD	D,B
	DEFB	0,0
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB890
	LD	(D.0830),A
	JR	Z,JB85E
JB85D	EQU	$-1
JB85E:	LD	SP,I.0E34
	LD	SP,D.3036
	LD	SP,I.0F42
	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB8A3
	JR	C,JB8AB
	EX	AF,AF'
JB874:	DJNZ	JB876
JB876:	INC	SP
	JR	NC,JB897
	INC	SP
	LD	(D.3230),A
JB87C	EQU	$-1
	LD	C,A
	JR	JB894

?B880:	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB8BE
	SCF
	LD	(HL),08H	; 8 
	JR	NZ,JB88E
JB88E:	INC	SP
	JR	NC,JB8AF
JB890	EQU	$-1
	INC	(HL)
	JR	NC,JB8C4
JB894:	LD	(HL),4FH	; "O"
	INC	D
JB897:	NOP
	LD	B,C
	EX	AF,AF'
	NOP
	LD	B,C
	EX	AF,AF'
	NOP
	LD	C,H
	JP	NC,J.0002
	NOP
JB8A3:	EX	AF,AF'
	JR	Z,JB8A7
	INC	SP
JB8A7:	JR	NC,JB8C7
	INC	(HL)
	JR	NC,JB8DC
JB8AB	EQU	$-1
	LD	(HL),30H	; "0"
	RRCA
JB8AF:	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I4C36
	JP	NC,J.0002
	NOP
	EX	AF,AF'
	JR	Z,JB8BF
JB8BE:	INC	SP
JB8BF:	JR	NC,JB8DF
	INC	(HL)
	JR	NC,JB8F4
JB8C4:	INC	(HL)
	LD	D,L
	LD	BC,I4100
JB8C7	EQU	$-2
	EX	AF,AF'
	NOP
	LD	B,C
	EX	AF,AF'
	NOP
	LD	C,H
	JP	NC,J.0002
	NOP
	EX	AF,AF'
	JR	Z,JB8D7
	LD	(D.1834),A
JB8D7	EQU	$-2
	LD	(D.3031),A
JB8DC:	LD	(D$1B3E),A
JB8DF:	LD	C,L
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB920
	DEC	(HL)
	LD	(HL),08H	; 8 
	DEC	D
	NOP
	INC	SP
	JR	NC,JB90F
	LD	(D.3030),A
JB8F4:	INC	SP
	LD	B,L
	DEC	DE
	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB938
	LD	(D.0830),A
	INC	D
	NOP
	LD	(D.1A36),A
	LD	(D.3030),A
	LD	SP,I$003E
JB90F:	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I7336
	JR	NC,JB950
	LD	(D.0830),A
	INC	D
	NOP
	LD	(D.1C38),A
JB920	EQU	$-1
	LD	(D.3030),A
	LD	(HL),51H	; "Q"
	DEC	DE
	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB968
	LD	(D.0830),A
	INC	D
	NOP
	INC	SP
	JR	NC,JB957
JB938	EQU	$-1
	LD	(D.3030),A
	INC	SP
	LD	A,1BH
	LD	C,L
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB980
	LD	(D.0830),A
	INC	D
	NOP
	LD	(D.1834),A
JB950	EQU	$-1
	LD	SP,D.3031
	LD	SP,D.0F3E
JB957:	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB994
	ADD	HL,SP
	LD	(HL),08H	; 8 
	DEC	BC
	NOP
	LD	(D.1632),A
JB968	EQU	$-1
	LD	(D.3030),A
	LD	(D$0050),A
	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB9B0
	LD	(D.0830),A
	INC	D
	NOP
	LD	SP,I.0E34
JB980	EQU	$-1
	JR	NC,JB9BB
	JR	NC,JB9B5
	LD	B,D
	RRCA
	NOP
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB9C3
	JR	C,JB9CB
	EX	AF,AF'
JB994:	EX	AF,AF'
	NOP
	INC	SP
	JR	NC,JB9B7
	LD	SP,D.3036
	LD	SP,I$184F
	INC	D
	LD	D,H
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JB9DE
	SCF
	LD	(HL),08H	; 8 
	DJNZ	JB9AE
JB9AE:	INC	SP
	JR	NC,JB9CF
JB9B0	EQU	$-1
	LD	(D.3030),A
	INC	SP
JB9B5:	LD	C,A
	INC	D
JB9B7:	NOP
	LD	B,C
	EX	AF,AF'
	NOP
JB9BB:	LD	B,C
	EX	AF,AF'
	NOP
	LD	C,H
	JP	NC,J.0002
	NOP
JB9C3:	EX	AF,AF'
	INC	D
	LD	BC,I$3033
	LD	E,32H	; "2"
	JR	NC,JB9FC
JB9CB	EQU	$-1
	INC	SP
	LD	D,C
	DEC	DE
JB9CF:	LD	A,54H	; "T"
	LD	SP,I5436
	LD	SP,I5336
	JR	NC,JBA10
	LD	(D.0830),A
	INC	D
	NOP
JB9DE:	INC	SP
<*TILT* error: address not in table>
	END
